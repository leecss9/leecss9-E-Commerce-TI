(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function N0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qm={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE;function YR(){if(gE)return Yl;gE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var h=null;if(l!==void 0&&(h=""+l),a.key!==void 0&&(h=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:h,ref:a!==void 0?a:null,props:l}}return Yl.Fragment=e,Yl.jsx=t,Yl.jsxs=t,Yl}var yE;function XR(){return yE||(yE=1,qm.exports=YR()),qm.exports}var T=XR(),Fm={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function WR(){if(_E)return Re;_E=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,L={};function V(M,re,ce){this.props=M,this.context=re,this.refs=L,this.updater=ce||C}V.prototype.isReactComponent={},V.prototype.setState=function(M,re){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,re,"setState")},V.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function z(){}z.prototype=V.prototype;function U(M,re,ce){this.props=M,this.context=re,this.refs=L,this.updater=ce||C}var q=U.prototype=new z;q.constructor=U,R(q,V.prototype),q.isPureReactComponent=!0;var se=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},ie=Object.prototype.hasOwnProperty;function O(M,re,ce,le,ye,De){return ce=De.ref,{$$typeof:n,type:M,key:re,ref:ce!==void 0?ce:null,props:De}}function I(M,re){return O(M.type,re,void 0,void 0,void 0,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function P(M){var re={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ce){return re[ce]})}var B=/\/+/g;function H(M,re){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):re.toString(36)}function N(){}function Ie(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(N,N):(M.status="pending",M.then(function(re){M.status==="pending"&&(M.status="fulfilled",M.value=re)},function(re){M.status==="pending"&&(M.status="rejected",M.reason=re)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Me(M,re,ce,le,ye){var De=typeof M;(De==="undefined"||De==="boolean")&&(M=null);var we=!1;if(M===null)we=!0;else switch(De){case"bigint":case"string":case"number":we=!0;break;case"object":switch(M.$$typeof){case n:case e:we=!0;break;case _:return we=M._init,Me(we(M._payload),re,ce,le,ye)}}if(we)return ye=ye(M),we=le===""?"."+H(M,0):le,se(ye)?(ce="",we!=null&&(ce=we.replace(B,"$&/")+"/"),Me(ye,re,ce,"",function(lr){return lr})):ye!=null&&(D(ye)&&(ye=I(ye,ce+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(B,"$&/")+"/")+we)),re.push(ye)),1;we=0;var kt=le===""?".":le+":";if(se(M))for(var nt=0;nt<M.length;nt++)le=M[nt],De=kt+H(le,nt),we+=Me(le,re,ce,De,ye);else if(nt=w(M),typeof nt=="function")for(M=nt.call(M),nt=0;!(le=M.next()).done;)le=le.value,De=kt+H(le,nt++),we+=Me(le,re,ce,De,ye);else if(De==="object"){if(typeof M.then=="function")return Me(Ie(M),re,ce,le,ye);throw re=String(M),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return we}function W(M,re,ce){if(M==null)return M;var le=[],ye=0;return Me(M,le,"","",function(De){return re.call(ce,De,ye++)}),le}function oe(M){if(M._status===-1){var re=M._result;re=re(),re.then(function(ce){(M._status===0||M._status===-1)&&(M._status=1,M._result=ce)},function(ce){(M._status===0||M._status===-1)&&(M._status=2,M._result=ce)}),M._status===-1&&(M._status=0,M._result=re)}if(M._status===1)return M._result.default;throw M._result}var me=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Oe(){}return Re.Children={map:W,forEach:function(M,re,ce){W(M,function(){re.apply(this,arguments)},ce)},count:function(M){var re=0;return W(M,function(){re++}),re},toArray:function(M){return W(M,function(re){return re})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Re.Component=V,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=U,Re.StrictMode=s,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Re.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ae.H.useMemoCache(M)}},Re.cache=function(M){return function(){return M.apply(null,arguments)}},Re.cloneElement=function(M,re,ce){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=R({},M.props),ye=M.key,De=void 0;if(re!=null)for(we in re.ref!==void 0&&(De=void 0),re.key!==void 0&&(ye=""+re.key),re)!ie.call(re,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&re.ref===void 0||(le[we]=re[we]);var we=arguments.length-2;if(we===1)le.children=ce;else if(1<we){for(var kt=Array(we),nt=0;nt<we;nt++)kt[nt]=arguments[nt+2];le.children=kt}return O(M.type,ye,void 0,void 0,De,le)},Re.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Re.createElement=function(M,re,ce){var le,ye={},De=null;if(re!=null)for(le in re.key!==void 0&&(De=""+re.key),re)ie.call(re,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=re[le]);var we=arguments.length-2;if(we===1)ye.children=ce;else if(1<we){for(var kt=Array(we),nt=0;nt<we;nt++)kt[nt]=arguments[nt+2];ye.children=kt}if(M&&M.defaultProps)for(le in we=M.defaultProps,we)ye[le]===void 0&&(ye[le]=we[le]);return O(M,De,void 0,void 0,null,ye)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:d,render:M}},Re.isValidElement=D,Re.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:oe}},Re.memo=function(M,re){return{$$typeof:g,type:M,compare:re===void 0?null:re}},Re.startTransition=function(M){var re=ae.T,ce={};ae.T=ce;try{var le=M(),ye=ae.S;ye!==null&&ye(ce,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Oe,me)}catch(De){me(De)}finally{ae.T=re}},Re.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Re.use=function(M){return ae.H.use(M)},Re.useActionState=function(M,re,ce){return ae.H.useActionState(M,re,ce)},Re.useCallback=function(M,re){return ae.H.useCallback(M,re)},Re.useContext=function(M){return ae.H.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M,re){return ae.H.useDeferredValue(M,re)},Re.useEffect=function(M,re,ce){var le=ae.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(M,re)},Re.useId=function(){return ae.H.useId()},Re.useImperativeHandle=function(M,re,ce){return ae.H.useImperativeHandle(M,re,ce)},Re.useInsertionEffect=function(M,re){return ae.H.useInsertionEffect(M,re)},Re.useLayoutEffect=function(M,re){return ae.H.useLayoutEffect(M,re)},Re.useMemo=function(M,re){return ae.H.useMemo(M,re)},Re.useOptimistic=function(M,re){return ae.H.useOptimistic(M,re)},Re.useReducer=function(M,re,ce){return ae.H.useReducer(M,re,ce)},Re.useRef=function(M){return ae.H.useRef(M)},Re.useState=function(M){return ae.H.useState(M)},Re.useSyncExternalStore=function(M,re,ce){return ae.H.useSyncExternalStore(M,re,ce)},Re.useTransition=function(){return ae.H.useTransition()},Re.version="19.1.0",Re}var vE;function Fp(){return vE||(vE=1,Fm.exports=WR()),Fm.exports}var k=Fp();const ui=N0(k);var Hm={exports:{}},Xl={},Gm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function ZR(){return EE||(EE=1,function(n){function e(W,oe){var me=W.length;W.push(oe);e:for(;0<me;){var Oe=me-1>>>1,M=W[Oe];if(0<a(M,oe))W[Oe]=oe,W[me]=M,me=Oe;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var oe=W[0],me=W.pop();if(me!==oe){W[0]=me;e:for(var Oe=0,M=W.length,re=M>>>1;Oe<re;){var ce=2*(Oe+1)-1,le=W[ce],ye=ce+1,De=W[ye];if(0>a(le,me))ye<M&&0>a(De,le)?(W[Oe]=De,W[ye]=me,Oe=ye):(W[Oe]=le,W[ce]=me,Oe=ce);else if(ye<M&&0>a(De,me))W[Oe]=De,W[ye]=me,Oe=ye;else break e}}return oe}function a(W,oe){var me=W.sortIndex-oe.sortIndex;return me!==0?me:W.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();n.unstable_now=function(){return h.now()-d}}var p=[],g=[],_=1,b=null,w=3,C=!1,R=!1,L=!1,V=!1,z=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function se(W){for(var oe=t(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=W)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=t(g)}}function ae(W){if(L=!1,se(W),!R)if(t(p)!==null)R=!0,ie||(ie=!0,H());else{var oe=t(g);oe!==null&&Me(ae,oe.startTime-W)}}var ie=!1,O=-1,I=5,D=-1;function P(){return V?!0:!(n.unstable_now()-D<I)}function B(){if(V=!1,ie){var W=n.unstable_now();D=W;var oe=!0;try{e:{R=!1,L&&(L=!1,U(O),O=-1),C=!0;var me=w;try{t:{for(se(W),b=t(p);b!==null&&!(b.expirationTime>W&&P());){var Oe=b.callback;if(typeof Oe=="function"){b.callback=null,w=b.priorityLevel;var M=Oe(b.expirationTime<=W);if(W=n.unstable_now(),typeof M=="function"){b.callback=M,se(W),oe=!0;break t}b===t(p)&&s(p),se(W)}else s(p);b=t(p)}if(b!==null)oe=!0;else{var re=t(g);re!==null&&Me(ae,re.startTime-W),oe=!1}}break e}finally{b=null,w=me,C=!1}oe=void 0}}finally{oe?H():ie=!1}}}var H;if(typeof q=="function")H=function(){q(B)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ie=N.port2;N.port1.onmessage=B,H=function(){Ie.postMessage(null)}}else H=function(){z(B,0)};function Me(W,oe){O=z(function(){W(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(W){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var me=w;w=oe;try{return W()}finally{w=me}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var me=w;w=W;try{return oe()}finally{w=me}},n.unstable_scheduleCallback=function(W,oe,me){var Oe=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Oe+me:Oe):me=Oe,W){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=me+M,W={id:_++,callback:oe,priorityLevel:W,startTime:me,expirationTime:M,sortIndex:-1},me>Oe?(W.sortIndex=me,e(g,W),t(p)===null&&W===t(g)&&(L?(U(O),O=-1):L=!0,Me(ae,me-Oe))):(W.sortIndex=M,e(p,W),R||C||(R=!0,ie||(ie=!0,H()))),W},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(W){var oe=w;return function(){var me=w;w=oe;try{return W.apply(this,arguments)}finally{w=me}}}}(Km)),Km}var TE;function JR(){return TE||(TE=1,Gm.exports=ZR()),Gm.exports}var $m={exports:{}},Wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function eI(){if(bE)return Wt;bE=1;var n=Fp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:p,containerInfo:g,implementation:_}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Wt.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},Wt.flushSync=function(p){var g=h.T,_=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=_,s.d.f()}},Wt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Wt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Wt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,b=d(_,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:C}):_==="script"&&s.d.X(p,{crossOrigin:b,integrity:w,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Wt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Wt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,b=d(_,g.crossOrigin);s.d.L(p,_,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Wt.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Wt.requestFormReset=function(p){s.d.r(p)},Wt.unstable_batchedUpdates=function(p,g){return p(g)},Wt.useFormState=function(p,g,_){return h.H.useFormState(p,g,_)},Wt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Wt.version="19.1.0",Wt}var wE;function tI(){if(wE)return $m.exports;wE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$m.exports=eI(),$m.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE;function nI(){if(AE)return Xl;AE=1;var n=JR(),e=Fp(),t=tI();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function h(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(s(188))}function p(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),r;if(m===u)return d(f),i;m=m.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=m;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=m;break}if(A===u){E=!0,u=f,o=m;break}A=A.sibling}if(!E){for(A=m.child;A;){if(A===o){E=!0,o=m,u=f;break}if(A===u){E=!0,u=m,o=f;break}A=A.sibling}if(!E)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function g(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=g(r),i!==null)return i;r=r.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),q=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=B&&r[B]||r["@@iterator"],typeof r=="function"?r:null)}var N=Symbol.for("react.client.reference");function Ie(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===N?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case V:return"Profiler";case L:return"StrictMode";case ae:return"Suspense";case ie:return"SuspenseList";case D:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case C:return"Portal";case q:return(r.displayName||"Context")+".Provider";case U:return(r._context.displayName||"Context")+".Consumer";case se:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return i=r.displayName||null,i!==null?i:Ie(r.type)||"Memo";case I:i=r._payload,r=r._init;try{return Ie(r(i))}catch{}}return null}var Me=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Oe=[],M=-1;function re(r){return{current:r}}function ce(r){0>M||(r.current=Oe[M],Oe[M]=null,M--)}function le(r,i){M++,Oe[M]=r.current,r.current=i}var ye=re(null),De=re(null),we=re(null),kt=re(null);function nt(r,i){switch(le(we,i),le(De,r),le(ye,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Hv(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Hv(i),r=Gv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ce(ye),le(ye,r)}function lr(){ce(ye),ce(De),ce(we)}function vi(r){r.memoizedState!==null&&le(kt,r);var i=ye.current,o=Gv(i,r.type);i!==o&&(le(De,r),le(ye,o))}function kr(r){De.current===r&&(ce(ye),ce(De)),kt.current===r&&(ce(kt),Hl._currentValue=me)}var Es=Object.prototype.hasOwnProperty,Ts=n.unstable_scheduleCallback,bs=n.unstable_cancelCallback,Bo=n.unstable_shouldYield,qu=n.unstable_requestPaint,xn=n.unstable_now,qf=n.unstable_getCurrentPriorityLevel,qo=n.unstable_ImmediatePriority,Ta=n.unstable_UserBlockingPriority,ws=n.unstable_NormalPriority,Ff=n.unstable_LowPriority,ba=n.unstable_IdlePriority,Fo=n.log,Fu=n.unstable_setDisableYieldValue,ht=null,$e=null;function vn(r){if(typeof Fo=="function"&&Fu(r),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ht,r)}catch{}}var Yt=Math.clz32?Math.clz32:As,Hu=Math.log,Hf=Math.LN2;function As(r){return r>>>=0,r===0?32:31-(Hu(r)/Hf|0)|0}var Ss=256,Rs=4194304;function Wn(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function wa(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var A=u&134217727;return A!==0?(u=A&~m,u!==0?f=Wn(u):(E&=A,E!==0?f=Wn(E):o||(o=A&~r,o!==0&&(f=Wn(o))))):(A=u&~m,A!==0?f=Wn(A):E!==0?f=Wn(E):o||(o=u&~r,o!==0&&(f=Wn(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function Is(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Ho(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Go(){var r=Ss;return Ss<<=1,(Ss&4194048)===0&&(Ss=256),r}function Ko(){var r=Rs;return Rs<<=1,(Rs&62914560)===0&&(Rs=4194304),r}function Mr(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Vr(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function $o(r,i,o,u,f,m){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var A=r.entanglements,x=r.expirationTimes,$=r.hiddenUpdates;for(o=E&~o;0<o;){var Z=31-Yt(o),ee=1<<Z;A[Z]=0,x[Z]=-1;var Q=$[Z];if(Q!==null)for($[Z]=null,Z=0;Z<Q.length;Z++){var Y=Q[Z];Y!==null&&(Y.lane&=-536870913)}o&=~ee}u!==0&&ur(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(E&~i))}function ur(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Yt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Qo(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Yt(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function Ei(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Aa(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ti(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:cE(r.type))}function Gu(r,i){var o=oe.p;try{return oe.p=r,i()}finally{oe.p=o}}var at=Math.random().toString(36).slice(2),It="__reactFiber$"+at,Et="__reactProps$"+at,On="__reactContainer$"+at,Yo="__reactEvents$"+at,Gf="__reactListeners$"+at,bi="__reactHandles$"+at,Ku="__reactResources$"+at,Cs="__reactMarker$"+at;function wi(r){delete r[It],delete r[Et],delete r[Yo],delete r[Gf],delete r[bi]}function Ur(r){var i=r[It];if(i)return i;for(var o=r.parentNode;o;){if(i=o[On]||o[It]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=Yv(r);r!==null;){if(o=r[It])return o;r=Yv(r)}return i}r=o,o=r.parentNode}return null}function cr(r){if(r=r[It]||r[On]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function hr(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function sn(r){var i=r[Ku];return i||(i=r[Ku]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function gt(r){r[Cs]=!0}var Xo=new Set,Sa={};function Zn(r,i){Lr(r,i),Lr(r+"Capture",i)}function Lr(r,i){for(Sa[r]=i,r=0;r<i.length;r++)Xo.add(i[r])}var $u=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},Ns={};function Yu(r){return Es.call(Ns,r)?!0:Es.call(Qu,r)?!1:$u.test(r)?Ns[r]=!0:(Qu[r]=!0,!1)}function Ai(r,i,o){if(Yu(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function fr(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Bt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}var Ds,Xu;function jr(r){if(Ds===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ds=i&&i[1]||"",Xu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ds+r+Xu}var Ra=!1;function Ia(r,i){if(!r||Ra)return"";Ra=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Y){var Q=Y}Reflect.construct(r,[],ee)}else{try{ee.call()}catch(Y){Q=Y}r.call(ee.prototype)}}else{try{throw Error()}catch(Y){Q=Y}(ee=r())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Y){if(Y&&Q&&typeof Y.stack=="string")return[Y.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],A=m[1];if(E&&A){var x=E.split(`
`),$=A.split(`
`);for(f=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(u===x.length||f===$.length)for(u=x.length-1,f=$.length-1;1<=u&&0<=f&&x[u]!==$[f];)f--;for(;1<=u&&0<=f;u--,f--)if(x[u]!==$[f]){if(u!==1||f!==1)do if(u--,f--,0>f||x[u]!==$[f]){var Z=`
`+x[u].replace(" at new "," at ");return r.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",r.displayName)),Z}while(1<=u&&0<=f);break}}}finally{Ra=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?jr(o):""}function Wo(r){switch(r.tag){case 26:case 27:case 5:return jr(r.type);case 16:return jr("Lazy");case 13:return jr("Suspense");case 19:return jr("SuspenseList");case 0:case 15:return Ia(r.type,!1);case 11:return Ia(r.type.render,!1);case 1:return Ia(r.type,!0);case 31:return jr("Activity");default:return""}}function Ca(r){try{var i="";do i+=Wo(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function an(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Zo(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Kf(r){var i=Zo(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,m.call(this,E)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Na(r){r._valueTracker||(r._valueTracker=Kf(r))}function Jo(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=Zo(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function xs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var $f=/[\n"\\]/g;function Tt(r){return r.replace($f,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function En(r,i,o,u,f,m,E,A){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),i!=null?E==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+an(i)):r.value!==""+an(i)&&(r.value=""+an(i)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),i!=null?Si(r,E,an(i)):o!=null?Si(r,E,an(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+an(A):r.removeAttribute("name")}function Os(r,i,o,u,f,m,E,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;o=o!=null?""+an(o):"",i=i!=null?""+an(i):o,A||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=A?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function Si(r,i,o){i==="number"&&xs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function zr(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+an(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function We(r,i,o){if(i!=null&&(i=""+an(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+an(o):""}function Ps(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(Me(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=an(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Pn(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wu(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||ks.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function el(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Wu(r,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Wu(r,m,i[m])}function tl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Da(r){return Yf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Br=null;function kn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var qr=null,Fr=null;function nl(r){var i=cr(r);if(i&&(r=i.stateNode)){var o=r[Et]||null;e:switch(r=i.stateNode,i.type){case"input":if(En(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Tt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[Et]||null;if(!f)throw Error(s(90));En(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&Jo(u)}break e;case"textarea":We(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&zr(r,!!o.multiple,i,!1)}}}var dr=!1;function Zu(r,i,o){if(dr)return r(i,o);dr=!0;try{var u=r(i);return u}finally{if(dr=!1,(qr!==null||Fr!==null)&&(Gc(),qr&&(i=qr,r=Fr,Fr=qr=null,nl(i),r)))for(i=0;i<r.length;i++)nl(r[i])}}function Ms(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Et]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mn=!1;if(Jn)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){Mn=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{Mn=!1}var mr=null,Ri=null,Hr=null;function rl(){if(Hr)return Hr;var r,i=Ri,o=i.length,u,f="value"in mr?mr.value:mr.textContent,m=f.length;for(r=0;r<o&&i[r]===f[r];r++);var E=o-r;for(u=1;u<=E&&i[o-u]===f[m-u];u++);return Hr=f.slice(r,1<u?1-u:void 0)}function pr(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function gr(){return!0}function il(){return!1}function Mt(r){function i(o,u,f,m,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(o=r[A],this[A]=o?o(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?gr:il,this.isPropagationStopped=il,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),i}var Ge={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=Mt(Ge),Us=_({},Ge,{view:0,detail:0}),Ju=Mt(Us),Oa,Pa,yr,Ls=_({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==yr&&(yr&&r.type==="mousemove"?(Oa=r.screenX-yr.screenX,Pa=r.screenY-yr.screenY):Pa=Oa=0,yr=r),Oa)},movementY:function(r){return"movementY"in r?r.movementY:Pa}}),Vn=Mt(Ls),ec=_({},Ls,{dataTransfer:0}),Xf=Mt(ec),js=_({},Us,{relatedTarget:0}),ka=Mt(js),sl=_({},Ge,{animationName:0,elapsedTime:0,pseudoElement:0}),Ma=Mt(sl),tc=_({},Ge,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Va=Mt(tc),Wf=_({},Ge,{data:0}),al=Mt(Wf),zs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=rc[r])?!!i[r]:!1}function Bs(){return ol}var ic=_({},Us,{key:function(r){if(r.key){var i=zs[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=pr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(r){return r.type==="keypress"?pr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?pr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ua=Mt(ic),sc=_({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=Mt(sc),Gr=_({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),ac=Mt(Gr),oc=_({},Ge,{propertyName:0,elapsedTime:0,pseudoElement:0}),lc=Mt(oc),uc=_({},Ls,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),La=Mt(uc),on=_({},Ge,{newState:0,oldState:0}),cc=Mt(on),hc=[9,13,27,32],_r=Jn&&"CompositionEvent"in window,c=null;Jn&&"documentMode"in document&&(c=document.documentMode);var y=Jn&&"TextEvent"in window&&!c,v=Jn&&(!_r||c&&8<c&&11>=c),S=" ",G=!1;function X(r,i){switch(r){case"keyup":return hc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var je=!1;function Ct(r,i){switch(r){case"compositionend":return ue(i);case"keypress":return i.which!==32?null:(G=!0,S);case"textInput":return r=i.data,r===S&&G?null:r;default:return null}}function ze(r,i){if(je)return r==="compositionend"||!_r&&X(r,i)?(r=rl(),Hr=Ri=mr=null,je=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Vt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Vt[r.type]:i==="textarea"}function Kr(r,i,o,u){qr?Fr?Fr.push(u):Fr=[u]:qr=u,i=Wc(i,"onChange"),0<i.length&&(o=new xa("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var qt=null,vr=null;function ul(r){jv(r,0)}function fc(r){var i=hr(r);if(Jo(i))return r}function ay(r,i){if(r==="change")return i}var oy=!1;if(Jn){var Zf;if(Jn){var Jf="oninput"in document;if(!Jf){var ly=document.createElement("div");ly.setAttribute("oninput","return;"),Jf=typeof ly.oninput=="function"}Zf=Jf}else Zf=!1;oy=Zf&&(!document.documentMode||9<document.documentMode)}function uy(){qt&&(qt.detachEvent("onpropertychange",cy),vr=qt=null)}function cy(r){if(r.propertyName==="value"&&fc(vr)){var i=[];Kr(i,vr,r,kn(r)),Zu(ul,i)}}function SS(r,i,o){r==="focusin"?(uy(),qt=i,vr=o,qt.attachEvent("onpropertychange",cy)):r==="focusout"&&uy()}function RS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fc(vr)}function IS(r,i){if(r==="click")return fc(i)}function CS(r,i){if(r==="input"||r==="change")return fc(i)}function NS(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Tn=typeof Object.is=="function"?Object.is:NS;function cl(r,i){if(Tn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Es.call(i,f)||!Tn(r[f],i[f]))return!1}return!0}function hy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function fy(r,i){var o=hy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=hy(o)}}function dy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?dy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function my(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=xs(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=xs(r.document)}return i}function ed(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var DS=Jn&&"documentMode"in document&&11>=document.documentMode,ja=null,td=null,hl=null,nd=!1;function py(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;nd||ja==null||ja!==xs(u)||(u=ja,"selectionStart"in u&&ed(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),hl&&cl(hl,u)||(hl=u,u=Wc(td,"onSelect"),0<u.length&&(i=new xa("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=ja)))}function qs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var za={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},rd={},gy={};Jn&&(gy=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Fs(r){if(rd[r])return rd[r];if(!za[r])return r;var i=za[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in gy)return rd[r]=i[o];return r}var yy=Fs("animationend"),_y=Fs("animationiteration"),vy=Fs("animationstart"),xS=Fs("transitionrun"),OS=Fs("transitionstart"),PS=Fs("transitioncancel"),Ey=Fs("transitionend"),Ty=new Map,id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");id.push("scrollEnd");function er(r,i){Ty.set(r,i),Zn(i,[r])}var by=new WeakMap;function Un(r,i){if(typeof r=="object"&&r!==null){var o=by.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Ca(i)},by.set(r,i),i)}return{value:r,source:i,stack:Ca(i)}}var Ln=[],Ba=0,sd=0;function dc(){for(var r=Ba,i=sd=Ba=0;i<r;){var o=Ln[i];Ln[i++]=null;var u=Ln[i];Ln[i++]=null;var f=Ln[i];Ln[i++]=null;var m=Ln[i];if(Ln[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}m!==0&&wy(o,f,m)}}function mc(r,i,o,u){Ln[Ba++]=r,Ln[Ba++]=i,Ln[Ba++]=o,Ln[Ba++]=u,sd|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function ad(r,i,o,u){return mc(r,i,o,u),pc(r)}function qa(r,i){return mc(r,null,null,i),pc(r)}function wy(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-Yt(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function pc(r){if(50<Vl)throw Vl=0,fm=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Fa={};function kS(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(r,i,o,u){return new kS(r,i,o,u)}function od(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $r(r,i){var o=r.alternate;return o===null?(o=bn(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Ay(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function gc(r,i,o,u,f,m){var E=0;if(u=r,typeof r=="function")od(r)&&(E=1);else if(typeof r=="string")E=VR(r,o,ye.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case D:return r=bn(31,o,i,f),r.elementType=D,r.lanes=m,r;case R:return Hs(o.children,f,m,i);case L:E=8,f|=24;break;case V:return r=bn(12,o,i,f|2),r.elementType=V,r.lanes=m,r;case ae:return r=bn(13,o,i,f),r.elementType=ae,r.lanes=m,r;case ie:return r=bn(19,o,i,f),r.elementType=ie,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:case q:E=10;break e;case U:E=9;break e;case se:E=11;break e;case O:E=14;break e;case I:E=16,u=null;break e}E=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=bn(E,o,i,f),i.elementType=r,i.type=u,i.lanes=m,i}function Hs(r,i,o,u){return r=bn(7,r,u,i),r.lanes=o,r}function ld(r,i,o){return r=bn(6,r,null,i),r.lanes=o,r}function ud(r,i,o){return i=bn(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Ha=[],Ga=0,yc=null,_c=0,jn=[],zn=0,Gs=null,Qr=1,Yr="";function Ks(r,i){Ha[Ga++]=_c,Ha[Ga++]=yc,yc=r,_c=i}function Sy(r,i,o){jn[zn++]=Qr,jn[zn++]=Yr,jn[zn++]=Gs,Gs=r;var u=Qr;r=Yr;var f=32-Yt(u)-1;u&=~(1<<f),o+=1;var m=32-Yt(i)+f;if(30<m){var E=f-f%5;m=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Qr=1<<32-Yt(i)+f|o<<f|u,Yr=m+r}else Qr=1<<m|o<<f|u,Yr=r}function cd(r){r.return!==null&&(Ks(r,1),Sy(r,1,0))}function hd(r){for(;r===yc;)yc=Ha[--Ga],Ha[Ga]=null,_c=Ha[--Ga],Ha[Ga]=null;for(;r===Gs;)Gs=jn[--zn],jn[zn]=null,Yr=jn[--zn],jn[zn]=null,Qr=jn[--zn],jn[zn]=null}var ln=null,ft=null,He=!1,$s=null,Er=!1,fd=Error(s(519));function Qs(r){var i=Error(s(418,""));throw ml(Un(i,r)),fd}function Ry(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[It]=r,i[Et]=u,o){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(o=0;o<Ll.length;o++)ke(Ll[o],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":ke("invalid",i),Os(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Na(i);break;case"select":ke("invalid",i);break;case"textarea":ke("invalid",i),Ps(i,u.value,u.defaultValue,u.children),Na(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Fv(i.textContent,o)?(u.popover!=null&&(ke("beforetoggle",i),ke("toggle",i)),u.onScroll!=null&&ke("scroll",i),u.onScrollEnd!=null&&ke("scrollend",i),u.onClick!=null&&(i.onclick=Zc),i=!0):i=!1,i||Qs(r)}function Iy(r){for(ln=r.return;ln;)switch(ln.tag){case 5:case 13:Er=!1;return;case 27:case 3:Er=!0;return;default:ln=ln.return}}function fl(r){if(r!==ln)return!1;if(!He)return Iy(r),He=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Cm(r.type,r.memoizedProps)),o=!o),o&&ft&&Qs(r),Iy(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){ft=nr(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}ft=null}}else i===27?(i=ft,qi(r.type)?(r=Om,Om=null,ft=r):ft=i):ft=ln?nr(r.stateNode.nextSibling):null;return!0}function dl(){ft=ln=null,He=!1}function Cy(){var r=$s;return r!==null&&(fn===null?fn=r:fn.push.apply(fn,r),$s=null),r}function ml(r){$s===null?$s=[r]:$s.push(r)}var dd=re(null),Ys=null,Xr=null;function Ii(r,i,o){le(dd,i._currentValue),i._currentValue=o}function Wr(r){r._currentValue=dd.current,ce(dd)}function md(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function pd(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var x=0;x<i.length;x++)if(A.context===i[x]){m.lanes|=o,A=m.alternate,A!==null&&(A.lanes|=o),md(m.return,o,r),u||(E=null);break e}m=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=o,m=E.alternate,m!==null&&(m.lanes|=o),md(E,o,r),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function pl(r,i,o,u){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var A=f.type;Tn(f.pendingProps.value,E.value)||(r!==null?r.push(A):r=[A])}}else if(f===kt.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Hl):r=[Hl])}f=f.return}r!==null&&pd(i,r,o,u),i.flags|=262144}function vc(r){for(r=r.firstContext;r!==null;){if(!Tn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Xs(r){Ys=r,Xr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Xt(r){return Ny(Ys,r)}function Ec(r,i){return Ys===null&&Xs(r),Ny(r,i)}function Ny(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Xr===null){if(r===null)throw Error(s(308));Xr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Xr=Xr.next=i;return o}var MS=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},VS=n.unstable_scheduleCallback,US=n.unstable_NormalPriority,Dt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new MS,data:new Map,refCount:0}}function gl(r){r.refCount--,r.refCount===0&&VS(US,function(){r.controller.abort()})}var yl=null,yd=0,Ka=0,$a=null;function LS(r,i){if(yl===null){var o=yl=[];yd=0,Ka=vm(),$a={status:"pending",value:void 0,then:function(u){o.push(u)}}}return yd++,i.then(Dy,Dy),i}function Dy(){if(--yd===0&&yl!==null){$a!==null&&($a.status="fulfilled");var r=yl;yl=null,Ka=0,$a=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function jS(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var xy=W.S;W.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&LS(r,i),xy!==null&&xy(r,i)};var Ws=re(null);function _d(){var r=Ws.current;return r!==null?r:rt.pooledCache}function Tc(r,i){i===null?le(Ws,Ws.current):le(Ws,i.pool)}function Oy(){var r=_d();return r===null?null:{parent:Dt._currentValue,pool:r}}var _l=Error(s(460)),Py=Error(s(474)),bc=Error(s(542)),vd={then:function(){}};function ky(r){return r=r.status,r==="fulfilled"||r==="rejected"}function wc(){}function My(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(wc,wc),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Uy(r),r;default:if(typeof i.status=="string")i.then(wc,wc);else{if(r=rt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Uy(r),r}throw vl=i,_l}}var vl=null;function Vy(){if(vl===null)throw Error(s(459));var r=vl;return vl=null,r}function Uy(r){if(r===_l||r===bc)throw Error(s(483))}var Ci=!1;function Ed(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Td(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ni(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Di(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=pc(r),wy(r,null,o),i}return mc(r,u,i,o),pc(r)}function El(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Qo(r,o)}}function bd(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var wd=!1;function Tl(){if(wd){var r=$a;if(r!==null)throw r}}function bl(r,i,o,u){wd=!1;var f=r.updateQueue;Ci=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var x=A,$=x.next;x.next=null,E===null?m=$:E.next=$,E=x;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==E&&(A===null?Z.firstBaseUpdate=$:A.next=$,Z.lastBaseUpdate=x))}if(m!==null){var ee=f.baseState;E=0,Z=$=x=null,A=m;do{var Q=A.lane&-536870913,Y=Q!==A.lane;if(Y?(Be&Q)===Q:(u&Q)===Q){Q!==0&&Q===Ka&&(wd=!0),Z!==null&&(Z=Z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var be=r,_e=A;Q=i;var et=o;switch(_e.tag){case 1:if(be=_e.payload,typeof be=="function"){ee=be.call(et,ee,Q);break e}ee=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=_e.payload,Q=typeof be=="function"?be.call(et,ee,Q):be,Q==null)break e;ee=_({},ee,Q);break e;case 2:Ci=!0}}Q=A.callback,Q!==null&&(r.flags|=64,Y&&(r.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[Q]:Y.push(Q))}else Y={lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?($=Z=Y,x=ee):Z=Z.next=Y,E|=Q;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);Z===null&&(x=ee),f.baseState=x,f.firstBaseUpdate=$,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),Li|=E,r.lanes=E,r.memoizedState=ee}}function Ly(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function jy(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Ly(o[r],i)}var Qa=re(null),Ac=re(0);function zy(r,i){r=ii,le(Ac,r),le(Qa,i),ii=r|i.baseLanes}function Ad(){le(Ac,ii),le(Qa,Qa.current)}function Sd(){ii=Ac.current,ce(Qa),ce(Ac)}var xi=0,Ce=null,Ze=null,bt=null,Sc=!1,Ya=!1,Zs=!1,Rc=0,wl=0,Xa=null,zS=0;function yt(){throw Error(s(321))}function Rd(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Tn(r[o],i[o]))return!1;return!0}function Id(r,i,o,u,f,m){return xi=m,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,W.H=r===null||r.memoizedState===null?w_:A_,Zs=!1,m=o(u,f),Zs=!1,Ya&&(m=qy(i,o,u,f)),By(r),m}function By(r){W.H=Oc;var i=Ze!==null&&Ze.next!==null;if(xi=0,bt=Ze=Ce=null,Sc=!1,wl=0,Xa=null,i)throw Error(s(300));r===null||Ut||(r=r.dependencies,r!==null&&vc(r)&&(Ut=!0))}function qy(r,i,o,u){Ce=r;var f=0;do{if(Ya&&(Xa=null),wl=0,Ya=!1,25<=f)throw Error(s(301));if(f+=1,bt=Ze=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}W.H=$S,m=i(o,u)}while(Ya);return m}function BS(){var r=W.H,i=r.useState()[0];return i=typeof i.then=="function"?Al(i):i,r=r.useState()[0],(Ze!==null?Ze.memoizedState:null)!==r&&(Ce.flags|=1024),i}function Cd(){var r=Rc!==0;return Rc=0,r}function Nd(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Dd(r){if(Sc){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sc=!1}xi=0,bt=Ze=Ce=null,Ya=!1,wl=Rc=0,Xa=null}function cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Ce.memoizedState=bt=r:bt=bt.next=r,bt}function wt(){if(Ze===null){var r=Ce.alternate;r=r!==null?r.memoizedState:null}else r=Ze.next;var i=bt===null?Ce.memoizedState:bt.next;if(i!==null)bt=i,Ze=r;else{if(r===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));Ze=r,r={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},bt===null?Ce.memoizedState=bt=r:bt=bt.next=r}return bt}function xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(r){var i=wl;return wl+=1,Xa===null&&(Xa=[]),r=My(Xa,r,i),i=Ce,(bt===null?i.memoizedState:bt.next)===null&&(i=i.alternate,W.H=i===null||i.memoizedState===null?w_:A_),r}function Ic(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Al(r);if(r.$$typeof===q)return Xt(r)}throw Error(s(438,String(r)))}function Od(r){var i=null,o=Ce.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=xd(),Ce.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=P;return i.index++,o}function Zr(r,i){return typeof i=="function"?i(r):i}function Cc(r){var i=wt();return Pd(i,Ze,r)}function Pd(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}i.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var A=E=null,x=null,$=i,Z=!1;do{var ee=$.lane&-536870913;if(ee!==$.lane?(Be&ee)===ee:(xi&ee)===ee){var Q=$.revertLane;if(Q===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ee===Ka&&(Z=!0);else if((xi&Q)===Q){$=$.next,Q===Ka&&(Z=!0);continue}else ee={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},x===null?(A=x=ee,E=m):x=x.next=ee,Ce.lanes|=Q,Li|=Q;ee=$.action,Zs&&o(m,ee),m=$.hasEagerState?$.eagerState:o(m,ee)}else Q={lane:ee,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},x===null?(A=x=Q,E=m):x=x.next=Q,Ce.lanes|=ee,Li|=ee;$=$.next}while($!==null&&$!==i);if(x===null?E=m:x.next=A,!Tn(m,r.memoizedState)&&(Ut=!0,Z&&(o=$a,o!==null)))throw o;r.memoizedState=m,r.baseState=E,r.baseQueue=x,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function kd(r){var i=wt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do m=r(m,E.action),E=E.next;while(E!==f);Tn(m,i.memoizedState)||(Ut=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function Fy(r,i,o){var u=Ce,f=wt(),m=He;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=i();var E=!Tn((Ze||f).memoizedState,o);E&&(f.memoizedState=o,Ut=!0),f=f.queue;var A=Ky.bind(null,u,f,r);if(Sl(2048,8,A,[r]),f.getSnapshot!==i||E||bt!==null&&bt.memoizedState.tag&1){if(u.flags|=2048,Wa(9,Nc(),Gy.bind(null,u,f,o,i),null),rt===null)throw Error(s(349));m||(xi&124)!==0||Hy(u,i,o)}return o}function Hy(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Ce.updateQueue,i===null?(i=xd(),Ce.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Gy(r,i,o,u){i.value=o,i.getSnapshot=u,$y(i)&&Qy(r)}function Ky(r,i,o){return o(function(){$y(i)&&Qy(r)})}function $y(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Tn(r,o)}catch{return!0}}function Qy(r){var i=qa(r,2);i!==null&&In(i,r,2)}function Md(r){var i=cn();if(typeof r=="function"){var o=r;if(r=o(),Zs){vn(!0);try{o()}finally{vn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:r},i}function Yy(r,i,o,u){return r.baseState=o,Pd(r,Ze,typeof u=="function"?u:Zr)}function qS(r,i,o,u,f){if(xc(r))throw Error(s(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};W.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,Xy(i,m)):(m.next=o.next,i.pending=o.next=m)}}function Xy(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var m=W.T,E={};W.T=E;try{var A=o(f,u),x=W.S;x!==null&&x(E,A),Wy(r,i,A)}catch($){Vd(r,i,$)}finally{W.T=m}}else try{m=o(f,u),Wy(r,i,m)}catch($){Vd(r,i,$)}}function Wy(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Zy(r,i,u)},function(u){return Vd(r,i,u)}):Zy(r,i,o)}function Zy(r,i,o){i.status="fulfilled",i.value=o,Jy(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Xy(r,o)))}function Vd(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Jy(i),i=i.next;while(i!==u)}r.action=null}function Jy(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function e_(r,i){return i}function t_(r,i){if(He){var o=rt.formState;if(o!==null){e:{var u=Ce;if(He){if(ft){t:{for(var f=ft,m=Er;f.nodeType!==8;){if(!m){f=null;break t}if(f=nr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ft=nr(f.nextSibling),u=f.data==="F!";break e}}Qs(u)}u=!1}u&&(i=o[0])}}return o=cn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e_,lastRenderedState:i},o.queue=u,o=E_.bind(null,Ce,u),u.dispatch=o,u=Md(!1),m=Bd.bind(null,Ce,!1,u.queue),u=cn(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=qS.bind(null,Ce,f,m,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function n_(r){var i=wt();return r_(i,Ze,r)}function r_(r,i,o){if(i=Pd(r,i,e_)[0],r=Cc(Zr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Al(i)}catch(E){throw E===_l?bc:E}else u=i;i=wt();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(Ce.flags|=2048,Wa(9,Nc(),FS.bind(null,f,o),null)),[u,m,r]}function FS(r,i){r.action=i}function i_(r){var i=wt(),o=Ze;if(o!==null)return r_(i,o,r);wt(),i=i.memoizedState,o=wt();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Wa(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=xd(),Ce.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function Nc(){return{destroy:void 0,resource:void 0}}function s_(){return wt().memoizedState}function Dc(r,i,o,u){var f=cn();u=u===void 0?null:u,Ce.flags|=r,f.memoizedState=Wa(1|i,Nc(),o,u)}function Sl(r,i,o,u){var f=wt();u=u===void 0?null:u;var m=f.memoizedState.inst;Ze!==null&&u!==null&&Rd(u,Ze.memoizedState.deps)?f.memoizedState=Wa(i,m,o,u):(Ce.flags|=r,f.memoizedState=Wa(1|i,m,o,u))}function a_(r,i){Dc(8390656,8,r,i)}function o_(r,i){Sl(2048,8,r,i)}function l_(r,i){return Sl(4,2,r,i)}function u_(r,i){return Sl(4,4,r,i)}function c_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function h_(r,i,o){o=o!=null?o.concat([r]):null,Sl(4,4,c_.bind(null,i,r),o)}function Ud(){}function f_(r,i){var o=wt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Rd(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function d_(r,i){var o=wt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Rd(i,u[1]))return u[0];if(u=r(),Zs){vn(!0);try{r()}finally{vn(!1)}}return o.memoizedState=[u,i],u}function Ld(r,i,o){return o===void 0||(xi&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=gv(),Ce.lanes|=r,Li|=r,o)}function m_(r,i,o,u){return Tn(o,i)?o:Qa.current!==null?(r=Ld(r,o,u),Tn(r,i)||(Ut=!0),r):(xi&42)===0?(Ut=!0,r.memoizedState=o):(r=gv(),Ce.lanes|=r,Li|=r,i)}function p_(r,i,o,u,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var E=W.T,A={};W.T=A,Bd(r,!1,i,o);try{var x=f(),$=W.S;if($!==null&&$(A,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Z=jS(x,u);Rl(r,i,Z,Rn(r))}else Rl(r,i,u,Rn(r))}catch(ee){Rl(r,i,{then:function(){},status:"rejected",reason:ee},Rn())}finally{oe.p=m,W.T=E}}function HS(){}function jd(r,i,o,u){if(r.tag!==5)throw Error(s(476));var f=g_(r).queue;p_(r,f,i,me,o===null?HS:function(){return y_(r),o(u)})}function g_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:me},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function y_(r){var i=g_(r).next.queue;Rl(r,i,{},Rn())}function zd(){return Xt(Hl)}function __(){return wt().memoizedState}function v_(){return wt().memoizedState}function GS(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Rn();r=Ni(o);var u=Di(i,r,o);u!==null&&(In(u,i,o),El(u,i,o)),i={cache:gd()},r.payload=i;return}i=i.return}}function KS(r,i,o){var u=Rn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},xc(r)?T_(i,o):(o=ad(r,i,o,u),o!==null&&(In(o,r,u),b_(o,i,u)))}function E_(r,i,o){var u=Rn();Rl(r,i,o,u)}function Rl(r,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(xc(r))T_(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var E=i.lastRenderedState,A=m(E,o);if(f.hasEagerState=!0,f.eagerState=A,Tn(A,E))return mc(r,i,f,0),rt===null&&dc(),!1}catch{}finally{}if(o=ad(r,i,f,u),o!==null)return In(o,r,u),b_(o,i,u),!0}return!1}function Bd(r,i,o,u){if(u={lane:2,revertLane:vm(),action:u,hasEagerState:!1,eagerState:null,next:null},xc(r)){if(i)throw Error(s(479))}else i=ad(r,o,u,2),i!==null&&In(i,r,2)}function xc(r){var i=r.alternate;return r===Ce||i!==null&&i===Ce}function T_(r,i){Ya=Sc=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function b_(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Qo(r,o)}}var Oc={readContext:Xt,use:Ic,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},w_={readContext:Xt,use:Ic,useCallback:function(r,i){return cn().memoizedState=[r,i===void 0?null:i],r},useContext:Xt,useEffect:a_,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Dc(4194308,4,c_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Dc(4194308,4,r,i)},useInsertionEffect:function(r,i){Dc(4,2,r,i)},useMemo:function(r,i){var o=cn();i=i===void 0?null:i;var u=r();if(Zs){vn(!0);try{r()}finally{vn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=cn();if(o!==void 0){var f=o(i);if(Zs){vn(!0);try{o(i)}finally{vn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=KS.bind(null,Ce,r),[u.memoizedState,r]},useRef:function(r){var i=cn();return r={current:r},i.memoizedState=r},useState:function(r){r=Md(r);var i=r.queue,o=E_.bind(null,Ce,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Ud,useDeferredValue:function(r,i){var o=cn();return Ld(o,r,i)},useTransition:function(){var r=Md(!1);return r=p_.bind(null,Ce,r.queue,!0,!1),cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=Ce,f=cn();if(He){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),rt===null)throw Error(s(349));(Be&124)!==0||Hy(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,a_(Ky.bind(null,u,m,r),[r]),u.flags|=2048,Wa(9,Nc(),Gy.bind(null,u,m,o,i),null),o},useId:function(){var r=cn(),i=rt.identifierPrefix;if(He){var o=Yr,u=Qr;o=(u&~(1<<32-Yt(u)-1)).toString(32)+o,i=""+i+"R"+o,o=Rc++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=zS++,i=""+i+"r"+o.toString(32)+"";return r.memoizedState=i},useHostTransitionStatus:zd,useFormState:t_,useActionState:t_,useOptimistic:function(r){var i=cn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Bd.bind(null,Ce,!0,o),o.dispatch=i,[r,i]},useMemoCache:Od,useCacheRefresh:function(){return cn().memoizedState=GS.bind(null,Ce)}},A_={readContext:Xt,use:Ic,useCallback:f_,useContext:Xt,useEffect:o_,useImperativeHandle:h_,useInsertionEffect:l_,useLayoutEffect:u_,useMemo:d_,useReducer:Cc,useRef:s_,useState:function(){return Cc(Zr)},useDebugValue:Ud,useDeferredValue:function(r,i){var o=wt();return m_(o,Ze.memoizedState,r,i)},useTransition:function(){var r=Cc(Zr)[0],i=wt().memoizedState;return[typeof r=="boolean"?r:Al(r),i]},useSyncExternalStore:Fy,useId:__,useHostTransitionStatus:zd,useFormState:n_,useActionState:n_,useOptimistic:function(r,i){var o=wt();return Yy(o,Ze,r,i)},useMemoCache:Od,useCacheRefresh:v_},$S={readContext:Xt,use:Ic,useCallback:f_,useContext:Xt,useEffect:o_,useImperativeHandle:h_,useInsertionEffect:l_,useLayoutEffect:u_,useMemo:d_,useReducer:kd,useRef:s_,useState:function(){return kd(Zr)},useDebugValue:Ud,useDeferredValue:function(r,i){var o=wt();return Ze===null?Ld(o,r,i):m_(o,Ze.memoizedState,r,i)},useTransition:function(){var r=kd(Zr)[0],i=wt().memoizedState;return[typeof r=="boolean"?r:Al(r),i]},useSyncExternalStore:Fy,useId:__,useHostTransitionStatus:zd,useFormState:i_,useActionState:i_,useOptimistic:function(r,i){var o=wt();return Ze!==null?Yy(o,Ze,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Od,useCacheRefresh:v_},Za=null,Il=0;function Pc(r){var i=Il;return Il+=1,Za===null&&(Za=[]),My(Za,r,i)}function Cl(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function kc(r,i){throw i.$$typeof===b?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function S_(r){var i=r._init;return i(r._payload)}function R_(r){function i(F,j){if(r){var K=F.deletions;K===null?(F.deletions=[j],F.flags|=16):K.push(j)}}function o(F,j){if(!r)return null;for(;j!==null;)i(F,j),j=j.sibling;return null}function u(F){for(var j=new Map;F!==null;)F.key!==null?j.set(F.key,F):j.set(F.index,F),F=F.sibling;return j}function f(F,j){return F=$r(F,j),F.index=0,F.sibling=null,F}function m(F,j,K){return F.index=K,r?(K=F.alternate,K!==null?(K=K.index,K<j?(F.flags|=67108866,j):K):(F.flags|=67108866,j)):(F.flags|=1048576,j)}function E(F){return r&&F.alternate===null&&(F.flags|=67108866),F}function A(F,j,K,J){return j===null||j.tag!==6?(j=ld(K,F.mode,J),j.return=F,j):(j=f(j,K),j.return=F,j)}function x(F,j,K,J){var de=K.type;return de===R?Z(F,j,K.props.children,J,K.key):j!==null&&(j.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===I&&S_(de)===j.type)?(j=f(j,K.props),Cl(j,K),j.return=F,j):(j=gc(K.type,K.key,K.props,null,F.mode,J),Cl(j,K),j.return=F,j)}function $(F,j,K,J){return j===null||j.tag!==4||j.stateNode.containerInfo!==K.containerInfo||j.stateNode.implementation!==K.implementation?(j=ud(K,F.mode,J),j.return=F,j):(j=f(j,K.children||[]),j.return=F,j)}function Z(F,j,K,J,de){return j===null||j.tag!==7?(j=Hs(K,F.mode,J,de),j.return=F,j):(j=f(j,K),j.return=F,j)}function ee(F,j,K){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=ld(""+j,F.mode,K),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return K=gc(j.type,j.key,j.props,null,F.mode,K),Cl(K,j),K.return=F,K;case C:return j=ud(j,F.mode,K),j.return=F,j;case I:var J=j._init;return j=J(j._payload),ee(F,j,K)}if(Me(j)||H(j))return j=Hs(j,F.mode,K,null),j.return=F,j;if(typeof j.then=="function")return ee(F,Pc(j),K);if(j.$$typeof===q)return ee(F,Ec(F,j),K);kc(F,j)}return null}function Q(F,j,K,J){var de=j!==null?j.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return de!==null?null:A(F,j,""+K,J);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return K.key===de?x(F,j,K,J):null;case C:return K.key===de?$(F,j,K,J):null;case I:return de=K._init,K=de(K._payload),Q(F,j,K,J)}if(Me(K)||H(K))return de!==null?null:Z(F,j,K,J,null);if(typeof K.then=="function")return Q(F,j,Pc(K),J);if(K.$$typeof===q)return Q(F,j,Ec(F,K),J);kc(F,K)}return null}function Y(F,j,K,J,de){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return F=F.get(K)||null,A(j,F,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return F=F.get(J.key===null?K:J.key)||null,x(j,F,J,de);case C:return F=F.get(J.key===null?K:J.key)||null,$(j,F,J,de);case I:var xe=J._init;return J=xe(J._payload),Y(F,j,K,J,de)}if(Me(J)||H(J))return F=F.get(K)||null,Z(j,F,J,de,null);if(typeof J.then=="function")return Y(F,j,K,Pc(J),de);if(J.$$typeof===q)return Y(F,j,K,Ec(j,J),de);kc(j,J)}return null}function be(F,j,K,J){for(var de=null,xe=null,pe=j,ve=j=0,jt=null;pe!==null&&ve<K.length;ve++){pe.index>ve?(jt=pe,pe=null):jt=pe.sibling;var Fe=Q(F,pe,K[ve],J);if(Fe===null){pe===null&&(pe=jt);break}r&&pe&&Fe.alternate===null&&i(F,pe),j=m(Fe,j,ve),xe===null?de=Fe:xe.sibling=Fe,xe=Fe,pe=jt}if(ve===K.length)return o(F,pe),He&&Ks(F,ve),de;if(pe===null){for(;ve<K.length;ve++)pe=ee(F,K[ve],J),pe!==null&&(j=m(pe,j,ve),xe===null?de=pe:xe.sibling=pe,xe=pe);return He&&Ks(F,ve),de}for(pe=u(pe);ve<K.length;ve++)jt=Y(pe,F,ve,K[ve],J),jt!==null&&(r&&jt.alternate!==null&&pe.delete(jt.key===null?ve:jt.key),j=m(jt,j,ve),xe===null?de=jt:xe.sibling=jt,xe=jt);return r&&pe.forEach(function($i){return i(F,$i)}),He&&Ks(F,ve),de}function _e(F,j,K,J){if(K==null)throw Error(s(151));for(var de=null,xe=null,pe=j,ve=j=0,jt=null,Fe=K.next();pe!==null&&!Fe.done;ve++,Fe=K.next()){pe.index>ve?(jt=pe,pe=null):jt=pe.sibling;var $i=Q(F,pe,Fe.value,J);if($i===null){pe===null&&(pe=jt);break}r&&pe&&$i.alternate===null&&i(F,pe),j=m($i,j,ve),xe===null?de=$i:xe.sibling=$i,xe=$i,pe=jt}if(Fe.done)return o(F,pe),He&&Ks(F,ve),de;if(pe===null){for(;!Fe.done;ve++,Fe=K.next())Fe=ee(F,Fe.value,J),Fe!==null&&(j=m(Fe,j,ve),xe===null?de=Fe:xe.sibling=Fe,xe=Fe);return He&&Ks(F,ve),de}for(pe=u(pe);!Fe.done;ve++,Fe=K.next())Fe=Y(pe,F,ve,Fe.value,J),Fe!==null&&(r&&Fe.alternate!==null&&pe.delete(Fe.key===null?ve:Fe.key),j=m(Fe,j,ve),xe===null?de=Fe:xe.sibling=Fe,xe=Fe);return r&&pe.forEach(function(QR){return i(F,QR)}),He&&Ks(F,ve),de}function et(F,j,K,J){if(typeof K=="object"&&K!==null&&K.type===R&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case w:e:{for(var de=K.key;j!==null;){if(j.key===de){if(de=K.type,de===R){if(j.tag===7){o(F,j.sibling),J=f(j,K.props.children),J.return=F,F=J;break e}}else if(j.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===I&&S_(de)===j.type){o(F,j.sibling),J=f(j,K.props),Cl(J,K),J.return=F,F=J;break e}o(F,j);break}else i(F,j);j=j.sibling}K.type===R?(J=Hs(K.props.children,F.mode,J,K.key),J.return=F,F=J):(J=gc(K.type,K.key,K.props,null,F.mode,J),Cl(J,K),J.return=F,F=J)}return E(F);case C:e:{for(de=K.key;j!==null;){if(j.key===de)if(j.tag===4&&j.stateNode.containerInfo===K.containerInfo&&j.stateNode.implementation===K.implementation){o(F,j.sibling),J=f(j,K.children||[]),J.return=F,F=J;break e}else{o(F,j);break}else i(F,j);j=j.sibling}J=ud(K,F.mode,J),J.return=F,F=J}return E(F);case I:return de=K._init,K=de(K._payload),et(F,j,K,J)}if(Me(K))return be(F,j,K,J);if(H(K)){if(de=H(K),typeof de!="function")throw Error(s(150));return K=de.call(K),_e(F,j,K,J)}if(typeof K.then=="function")return et(F,j,Pc(K),J);if(K.$$typeof===q)return et(F,j,Ec(F,K),J);kc(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,j!==null&&j.tag===6?(o(F,j.sibling),J=f(j,K),J.return=F,F=J):(o(F,j),J=ld(K,F.mode,J),J.return=F,F=J),E(F)):o(F,j)}return function(F,j,K,J){try{Il=0;var de=et(F,j,K,J);return Za=null,de}catch(pe){if(pe===_l||pe===bc)throw pe;var xe=bn(29,pe,null,F.mode);return xe.lanes=J,xe.return=F,xe}finally{}}}var Ja=R_(!0),I_=R_(!1),Bn=re(null),Tr=null;function Oi(r){var i=r.alternate;le(xt,xt.current&1),le(Bn,r),Tr===null&&(i===null||Qa.current!==null||i.memoizedState!==null)&&(Tr=r)}function C_(r){if(r.tag===22){if(le(xt,xt.current),le(Bn,r),Tr===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Tr=r)}}else Pi()}function Pi(){le(xt,xt.current),le(Bn,Bn.current)}function Jr(r){ce(Bn),Tr===r&&(Tr=null),ce(xt)}var xt=re(0);function Mc(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||xm(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qd(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Fd={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Rn(),f=Ni(u);f.payload=i,o!=null&&(f.callback=o),i=Di(r,f,u),i!==null&&(In(i,r,u),El(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Rn(),f=Ni(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Di(r,f,u),i!==null&&(In(i,r,u),El(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Rn(),u=Ni(o);u.tag=2,i!=null&&(u.callback=i),i=Di(r,u,o),i!==null&&(In(i,r,o),El(i,r,o))}};function N_(r,i,o,u,f,m,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,E):i.prototype&&i.prototype.isPureReactComponent?!cl(o,u)||!cl(f,m):!0}function D_(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Fd.enqueueReplaceState(i,i.state,null)}function Js(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=_({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Vc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function x_(r){Vc(r)}function O_(r){console.error(r)}function P_(r){Vc(r)}function Uc(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function k_(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Hd(r,i,o){return o=Ni(o),o.tag=3,o.payload={element:null},o.callback=function(){Uc(r,i)},o}function M_(r){return r=Ni(r),r.tag=3,r}function V_(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){k_(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){k_(i,o,u),typeof f!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function QS(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&pl(i,o,f,!0),o=Bn.current,o!==null){switch(o.tag){case 13:return Tr===null?mm():o.alternate===null&&dt===0&&(dt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===vd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),gm(r,u,f)),!1;case 22:return o.flags|=65536,u===vd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),gm(r,u,f)),!1}throw Error(s(435,o.tag))}return gm(r,u,f),mm(),!1}if(He)return i=Bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==fd&&(r=Error(s(422),{cause:u}),ml(Un(r,o)))):(u!==fd&&(i=Error(s(423),{cause:u}),ml(Un(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Un(u,o),f=Hd(r.stateNode,u,f),bd(r,f),dt!==4&&(dt=2)),!1;var m=Error(s(520),{cause:u});if(m=Un(m,o),Ml===null?Ml=[m]:Ml.push(m),dt!==4&&(dt=2),i===null)return!0;u=Un(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=Hd(o.stateNode,u,r),bd(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ji===null||!ji.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=M_(f),V_(f,r,o,u),bd(o,f),!1}o=o.return}while(o!==null);return!1}var U_=Error(s(461)),Ut=!1;function Ft(r,i,o,u){i.child=r===null?I_(i,null,o,u):Ja(i,r.child,o,u)}function L_(r,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return Xs(i),u=Id(r,i,o,E,m,f),A=Cd(),r!==null&&!Ut?(Nd(r,i,f),ei(r,i,f)):(He&&A&&cd(i),i.flags|=1,Ft(r,i,u,f),i.child)}function j_(r,i,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!od(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,z_(r,i,m,u,f)):(r=gc(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!Zd(r,f)){var E=m.memoizedProps;if(o=o.compare,o=o!==null?o:cl,o(E,u)&&r.ref===i.ref)return ei(r,i,f)}return i.flags|=1,r=$r(m,u),r.ref=i.ref,r.return=i,i.child=r}function z_(r,i,o,u,f){if(r!==null){var m=r.memoizedProps;if(cl(m,u)&&r.ref===i.ref)if(Ut=!1,i.pendingProps=u=m,Zd(r,f))(r.flags&131072)!==0&&(Ut=!0);else return i.lanes=r.lanes,ei(r,i,f)}return Gd(r,i,o,u,f)}function B_(r,i,o){var u=i.pendingProps,f=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(f=i.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return q_(r,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Tc(i,m!==null?m.cachePool:null),m!==null?zy(i,m):Ad(),C_(i);else return i.lanes=i.childLanes=536870912,q_(r,i,m!==null?m.baseLanes|o:o,o)}else m!==null?(Tc(i,m.cachePool),zy(i,m),Pi(),i.memoizedState=null):(r!==null&&Tc(i,null),Ad(),Pi());return Ft(r,i,f,o),i.child}function q_(r,i,o,u){var f=_d();return f=f===null?null:{parent:Dt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},r!==null&&Tc(i,null),Ad(),C_(i),r!==null&&pl(r,i,u,!0),null}function Lc(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Gd(r,i,o,u,f){return Xs(i),o=Id(r,i,o,u,void 0,f),u=Cd(),r!==null&&!Ut?(Nd(r,i,f),ei(r,i,f)):(He&&u&&cd(i),i.flags|=1,Ft(r,i,o,f),i.child)}function F_(r,i,o,u,f,m){return Xs(i),i.updateQueue=null,o=qy(i,u,o,f),By(r),u=Cd(),r!==null&&!Ut?(Nd(r,i,m),ei(r,i,m)):(He&&u&&cd(i),i.flags|=1,Ft(r,i,o,m),i.child)}function H_(r,i,o,u,f){if(Xs(i),i.stateNode===null){var m=Fa,E=o.contextType;typeof E=="object"&&E!==null&&(m=Xt(E)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Fd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Ed(i),E=o.contextType,m.context=typeof E=="object"&&E!==null?Xt(E):Fa,m.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(qd(i,o,E,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&Fd.enqueueReplaceState(m,m.state,null),bl(i,u,m,f),Tl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var A=i.memoizedProps,x=Js(o,A);m.props=x;var $=m.context,Z=o.contextType;E=Fa,typeof Z=="object"&&Z!==null&&(E=Xt(Z));var ee=o.getDerivedStateFromProps;Z=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||$!==E)&&D_(i,m,u,E),Ci=!1;var Q=i.memoizedState;m.state=Q,bl(i,u,m,f),Tl(),$=i.memoizedState,A||Q!==$||Ci?(typeof ee=="function"&&(qd(i,o,ee,u),$=i.memoizedState),(x=Ci||N_(i,o,x,u,Q,$,E))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=$),m.props=u,m.state=$,m.context=E,u=x):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Td(r,i),E=i.memoizedProps,Z=Js(o,E),m.props=Z,ee=i.pendingProps,Q=m.context,$=o.contextType,x=Fa,typeof $=="object"&&$!==null&&(x=Xt($)),A=o.getDerivedStateFromProps,($=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==ee||Q!==x)&&D_(i,m,u,x),Ci=!1,Q=i.memoizedState,m.state=Q,bl(i,u,m,f),Tl();var Y=i.memoizedState;E!==ee||Q!==Y||Ci||r!==null&&r.dependencies!==null&&vc(r.dependencies)?(typeof A=="function"&&(qd(i,o,A,u),Y=i.memoizedState),(Z=Ci||N_(i,o,Z,u,Q,Y,x)||r!==null&&r.dependencies!==null&&vc(r.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Y,x),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Y,x)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===r.memoizedProps&&Q===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&Q===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Y),m.props=u,m.state=Y,m.context=x,u=Z):(typeof m.componentDidUpdate!="function"||E===r.memoizedProps&&Q===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&Q===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Lc(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Ja(i,r.child,null,f),i.child=Ja(i,null,o,f)):Ft(r,i,o,f),i.memoizedState=m.state,r=i.child):r=ei(r,i,f),r}function G_(r,i,o,u){return dl(),i.flags|=256,Ft(r,i,o,u),i.child}var Kd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $d(r){return{baseLanes:r,cachePool:Oy()}}function Qd(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=qn),r}function K_(r,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,E;if((E=m)||(E=r!==null&&r.memoizedState===null?!1:(xt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,r===null){if(He){if(f?Oi(i):Pi(),He){var A=ft,x;if(x=A){e:{for(x=A,A=Er;x.nodeType!==8;){if(!A){A=null;break e}if(x=nr(x.nextSibling),x===null){A=null;break e}}A=x}A!==null?(i.memoizedState={dehydrated:A,treeContext:Gs!==null?{id:Qr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},x=bn(18,null,null,0),x.stateNode=A,x.return=i,i.child=x,ln=i,ft=null,x=!0):x=!1}x||Qs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return xm(A)?i.lanes=32:i.lanes=536870912,null;Jr(i)}return A=u.children,u=u.fallback,f?(Pi(),f=i.mode,A=jc({mode:"hidden",children:A},f),u=Hs(u,f,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,f=i.child,f.memoizedState=$d(o),f.childLanes=Qd(r,E,o),i.memoizedState=Kd,u):(Oi(i),Yd(i,A))}if(x=r.memoizedState,x!==null&&(A=x.dehydrated,A!==null)){if(m)i.flags&256?(Oi(i),i.flags&=-257,i=Xd(r,i,o)):i.memoizedState!==null?(Pi(),i.child=r.child,i.flags|=128,i=null):(Pi(),f=u.fallback,A=i.mode,u=jc({mode:"visible",children:u.children},A),f=Hs(f,A,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,Ja(i,r.child,null,o),u=i.child,u.memoizedState=$d(o),u.childLanes=Qd(r,E,o),i.memoizedState=Kd,i=f);else if(Oi(i),xm(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var $=E.dgst;E=$,u=Error(s(419)),u.stack="",u.digest=E,ml({value:u,source:null,stack:null}),i=Xd(r,i,o)}else if(Ut||pl(r,i,o,!1),E=(o&r.childLanes)!==0,Ut||E){if(E=rt,E!==null&&(u=o&-o,u=(u&42)!==0?1:Ei(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==x.retryLane))throw x.retryLane=u,qa(r,u),In(E,r,u),U_;A.data==="$?"||mm(),i=Xd(r,i,o)}else A.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=x.treeContext,ft=nr(A.nextSibling),ln=i,He=!0,$s=null,Er=!1,r!==null&&(jn[zn++]=Qr,jn[zn++]=Yr,jn[zn++]=Gs,Qr=r.id,Yr=r.overflow,Gs=i),i=Yd(i,u.children),i.flags|=4096);return i}return f?(Pi(),f=u.fallback,A=i.mode,x=r.child,$=x.sibling,u=$r(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&65011712,$!==null?f=$r($,f):(f=Hs(f,A,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,A=r.child.memoizedState,A===null?A=$d(o):(x=A.cachePool,x!==null?($=Dt._currentValue,x=x.parent!==$?{parent:$,pool:$}:x):x=Oy(),A={baseLanes:A.baseLanes|o,cachePool:x}),f.memoizedState=A,f.childLanes=Qd(r,E,o),i.memoizedState=Kd,u):(Oi(i),o=r.child,r=o.sibling,o=$r(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(E=i.deletions,E===null?(i.deletions=[r],i.flags|=16):E.push(r)),i.child=o,i.memoizedState=null,o)}function Yd(r,i){return i=jc({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function jc(r,i){return r=bn(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Xd(r,i,o){return Ja(i,r.child,null,o),r=Yd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function $_(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),md(r.return,i,o)}function Wd(r,i,o,u,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function Q_(r,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;if(Ft(r,i,u.children,o),u=xt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&$_(r,o,i);else if(r.tag===19)$_(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(le(xt,u),f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&Mc(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Wd(i,!1,f,o,m);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&Mc(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Wd(i,!0,o,null,m);break;case"together":Wd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ei(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Li|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(pl(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=$r(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=$r(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Zd(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&vc(r)))}function YS(r,i,o){switch(i.tag){case 3:nt(i,i.stateNode.containerInfo),Ii(i,Dt,r.memoizedState.cache),dl();break;case 27:case 5:vi(i);break;case 4:nt(i,i.stateNode.containerInfo);break;case 10:Ii(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Oi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?K_(r,i,o):(Oi(i),r=ei(r,i,o),r!==null?r.sibling:null);Oi(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(pl(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return Q_(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(xt,xt.current),u)break;return null;case 22:case 23:return i.lanes=0,B_(r,i,o);case 24:Ii(i,Dt,r.memoizedState.cache)}return ei(r,i,o)}function Y_(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)Ut=!0;else{if(!Zd(r,o)&&(i.flags&128)===0)return Ut=!1,YS(r,i,o);Ut=(r.flags&131072)!==0}else Ut=!1,He&&(i.flags&1048576)!==0&&Sy(i,_c,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")od(u)?(r=Js(u,r),i.tag=1,i=H_(null,i,u,r,o)):(i.tag=0,i=Gd(null,i,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===se){i.tag=11,i=L_(null,i,u,r,o);break e}else if(f===O){i.tag=14,i=j_(null,i,u,r,o);break e}}throw i=Ie(u)||u,Error(s(306,i,""))}}return i;case 0:return Gd(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Js(u,i.pendingProps),H_(r,i,u,f,o);case 3:e:{if(nt(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,Td(r,i),bl(i,u,null,o);var E=i.memoizedState;if(u=E.cache,Ii(i,Dt,u),u!==m.cache&&pd(i,[Dt],o,!0),Tl(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=G_(r,i,u,o);break e}else if(u!==f){f=Un(Error(s(424)),i),ml(f),i=G_(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ft=nr(r.firstChild),ln=i,He=!0,$s=null,Er=!0,o=I_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(dl(),u===f){i=ei(r,i,o);break e}Ft(r,i,u,o)}i=i.child}return i;case 26:return Lc(r,i),r===null?(o=Jv(i.type,null,i.pendingProps,null))?i.memoizedState=o:He||(o=i.type,r=i.pendingProps,u=Jc(we.current).createElement(o),u[It]=i,u[Et]=r,Gt(u,o,r),gt(u),i.stateNode=u):i.memoizedState=Jv(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return vi(i),r===null&&He&&(u=i.stateNode=Xv(i.type,i.pendingProps,we.current),ln=i,Er=!0,f=ft,qi(i.type)?(Om=f,ft=nr(u.firstChild)):ft=f),Ft(r,i,i.pendingProps.children,o),Lc(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&He&&((f=u=ft)&&(u=wR(u,i.type,i.pendingProps,Er),u!==null?(i.stateNode=u,ln=i,ft=nr(u.firstChild),Er=!1,f=!0):f=!1),f||Qs(i)),vi(i),f=i.type,m=i.pendingProps,E=r!==null?r.memoizedProps:null,u=m.children,Cm(f,m)?u=null:E!==null&&Cm(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=Id(r,i,BS,null,null,o),Hl._currentValue=f),Lc(r,i),Ft(r,i,u,o),i.child;case 6:return r===null&&He&&((r=o=ft)&&(o=AR(o,i.pendingProps,Er),o!==null?(i.stateNode=o,ln=i,ft=null,r=!0):r=!1),r||Qs(i)),null;case 13:return K_(r,i,o);case 4:return nt(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Ja(i,null,u,o):Ft(r,i,u,o),i.child;case 11:return L_(r,i,i.type,i.pendingProps,o);case 7:return Ft(r,i,i.pendingProps,o),i.child;case 8:return Ft(r,i,i.pendingProps.children,o),i.child;case 12:return Ft(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ii(i,i.type,u.value),Ft(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Xs(i),f=Xt(f),u=u(f),i.flags|=1,Ft(r,i,u,o),i.child;case 14:return j_(r,i,i.type,i.pendingProps,o);case 15:return z_(r,i,i.type,i.pendingProps,o);case 19:return Q_(r,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},r===null?(o=jc(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=$r(r.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return B_(r,i,o);case 24:return Xs(i),u=Xt(Dt),r===null?(f=_d(),f===null&&(f=rt,m=gd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},Ed(i),Ii(i,Dt,f)):((r.lanes&o)!==0&&(Td(r,i),bl(i,null,null,o),Tl()),f=r.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ii(i,Dt,u)):(u=m.cache,Ii(i,Dt,u),u!==f.cache&&pd(i,[Dt],o,!0))),Ft(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ti(r){r.flags|=4}function X_(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!iE(i)){if(i=Bn.current,i!==null&&((Be&4194048)===Be?Tr!==null:(Be&62914560)!==Be&&(Be&536870912)===0||i!==Tr))throw vl=vd,Py;r.flags|=8192}}function zc(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ko():536870912,r.lanes|=i,ro|=i)}function Nl(r,i){if(!He)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function lt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function XS(r,i,o){var u=i.pendingProps;switch(hd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Wr(Dt),lr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(fl(i)?ti(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cy())),lt(i),null;case 26:return o=i.memoizedState,r===null?(ti(i),o!==null?(lt(i),X_(i,o)):(lt(i),i.flags&=-16777217)):o?o!==r.memoizedState?(ti(i),lt(i),X_(i,o)):(lt(i),i.flags&=-16777217):(r.memoizedProps!==u&&ti(i),lt(i),i.flags&=-16777217),null;case 27:kr(i),o=we.current;var f=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&ti(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}r=ye.current,fl(i)?Ry(i):(r=Xv(f,u,o),i.stateNode=r,ti(i))}return lt(i),null;case 5:if(kr(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&ti(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(r=ye.current,fl(i))Ry(i);else{switch(f=Jc(we.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[It]=i,r[Et]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=r;e:switch(Gt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ti(i)}}return lt(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&ti(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=we.current,fl(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=ln,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[It]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Fv(r.nodeValue,o)),r||Qs(i)}else r=Jc(r).createTextNode(u),r[It]=i,i.stateNode=r}return lt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=fl(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[It]=i}else dl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),f=!1}else f=Cy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Jr(i),i):(Jr(i),null)}if(Jr(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),zc(i,i.updateQueue),lt(i),null;case 4:return lr(),r===null&&wm(i.stateNode.containerInfo),lt(i),null;case 10:return Wr(i.type),lt(i),null;case 19:if(ce(xt),f=i.memoizedState,f===null)return lt(i),null;if(u=(i.flags&128)!==0,m=f.rendering,m===null)if(u)Nl(f,!1);else{if(dt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=Mc(r),m!==null){for(i.flags|=128,Nl(f,!1),r=m.updateQueue,i.updateQueue=r,zc(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Ay(o,r),o=o.sibling;return le(xt,xt.current&1|2),i.child}r=r.sibling}f.tail!==null&&xn()>Fc&&(i.flags|=128,u=!0,Nl(f,!1),i.lanes=4194304)}else{if(!u)if(r=Mc(m),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,zc(i,r),Nl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!He)return lt(i),null}else 2*xn()-f.renderingStartTime>Fc&&o!==536870912&&(i.flags|=128,u=!0,Nl(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(r=f.last,r!==null?r.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=xn(),i.sibling=null,r=xt.current,le(xt,u?r&1|2:r&1),i):(lt(i),null);case 22:case 23:return Jr(i),Sd(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),o=i.updateQueue,o!==null&&zc(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ce(Ws),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Wr(Dt),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function WS(r,i){switch(hd(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Wr(Dt),lr(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return kr(i),null;case 13:if(Jr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));dl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ce(xt),null;case 4:return lr(),null;case 10:return Wr(i.type),null;case 22:case 23:return Jr(i),Sd(),r!==null&&ce(Ws),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Wr(Dt),null;case 25:return null;default:return null}}function W_(r,i){switch(hd(i),i.tag){case 3:Wr(Dt),lr();break;case 26:case 27:case 5:kr(i);break;case 4:lr();break;case 13:Jr(i);break;case 19:ce(xt);break;case 10:Wr(i.type);break;case 22:case 23:Jr(i),Sd(),r!==null&&ce(Ws);break;case 24:Wr(Dt)}}function Dl(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,E=o.inst;u=m(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){tt(i,i.return,A)}}function ki(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=i;var x=o,$=A;try{$()}catch(Z){tt(f,x,Z)}}}u=u.next}while(u!==m)}}catch(Z){tt(i,i.return,Z)}}function Z_(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{jy(i,o)}catch(u){tt(r,r.return,u)}}}function J_(r,i,o){o.props=Js(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){tt(r,i,u)}}function xl(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){tt(r,i,f)}}function br(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){tt(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(r,i,f)}else o.current=null}function ev(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){tt(r,r.return,f)}}function Jd(r,i,o){try{var u=r.stateNode;_R(u,r.type,o,i),u[Et]=i}catch(f){tt(r,r.return,f)}}function tv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&qi(r.type)||r.tag===4}function em(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||tv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&qi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tm(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Zc));else if(u!==4&&(u===27&&qi(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(tm(r,i,o),r=r.sibling;r!==null;)tm(r,i,o),r=r.sibling}function Bc(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&qi(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Bc(r,i,o),r=r.sibling;r!==null;)Bc(r,i,o),r=r.sibling}function nv(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Gt(i,u,o),i[It]=r,i[Et]=o}catch(m){tt(r,r.return,m)}}var ni=!1,_t=!1,nm=!1,rv=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function ZS(r,i){if(r=r.containerInfo,Rm=sh,r=my(r),ed(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var E=0,A=-1,x=-1,$=0,Z=0,ee=r,Q=null;t:for(;;){for(var Y;ee!==o||f!==0&&ee.nodeType!==3||(A=E+f),ee!==m||u!==0&&ee.nodeType!==3||(x=E+u),ee.nodeType===3&&(E+=ee.nodeValue.length),(Y=ee.firstChild)!==null;)Q=ee,ee=Y;for(;;){if(ee===r)break t;if(Q===o&&++$===f&&(A=E),Q===m&&++Z===u&&(x=E),(Y=ee.nextSibling)!==null)break;ee=Q,Q=ee.parentNode}ee=Y}o=A===-1||x===-1?null:{start:A,end:x}}else o=null}o=o||{start:0,end:0}}else o=null;for(Im={focusedElem:r,selectionRange:o},sh=!1,Lt=i;Lt!==null;)if(i=Lt,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,Lt=r;else for(;Lt!==null;){switch(i=Lt,m=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var be=Js(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(be,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(_e){tt(o,o.return,_e)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Dm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Dm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Lt=r;break}Lt=i.return}}function iv(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Mi(r,o),u&4&&Dl(5,o);break;case 1:if(Mi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(E){tt(o,o.return,E)}else{var f=Js(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(E){tt(o,o.return,E)}}u&64&&Z_(o),u&512&&xl(o,o.return);break;case 3:if(Mi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{jy(r,i)}catch(E){tt(o,o.return,E)}}break;case 27:i===null&&u&4&&nv(o);case 26:case 5:Mi(r,o),i===null&&u&4&&ev(o),u&512&&xl(o,o.return);break;case 12:Mi(r,o);break;case 13:Mi(r,o),u&4&&ov(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=oR.bind(null,o),SR(r,o))));break;case 22:if(u=o.memoizedState!==null||ni,!u){i=i!==null&&i.memoizedState!==null||_t,f=ni;var m=_t;ni=u,(_t=i)&&!m?Vi(r,o,(o.subtreeFlags&8772)!==0):Mi(r,o),ni=f,_t=m}break;case 30:break;default:Mi(r,o)}}function sv(r){var i=r.alternate;i!==null&&(r.alternate=null,sv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&wi(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ot=null,hn=!1;function ri(r,i,o){for(o=o.child;o!==null;)av(r,i,o),o=o.sibling}function av(r,i,o){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ht,o)}catch{}switch(o.tag){case 26:_t||br(o,i),ri(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_t||br(o,i);var u=ot,f=hn;qi(o.type)&&(ot=o.stateNode,hn=!1),ri(r,i,o),zl(o.stateNode),ot=u,hn=f;break;case 5:_t||br(o,i);case 6:if(u=ot,f=hn,ot=null,ri(r,i,o),ot=u,hn=f,ot!==null)if(hn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(o.stateNode)}catch(m){tt(o,i,m)}else try{ot.removeChild(o.stateNode)}catch(m){tt(o,i,m)}break;case 18:ot!==null&&(hn?(r=ot,Qv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Ql(r)):Qv(ot,o.stateNode));break;case 4:u=ot,f=hn,ot=o.stateNode.containerInfo,hn=!0,ri(r,i,o),ot=u,hn=f;break;case 0:case 11:case 14:case 15:_t||ki(2,o,i),_t||ki(4,o,i),ri(r,i,o);break;case 1:_t||(br(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&J_(o,i,u)),ri(r,i,o);break;case 21:ri(r,i,o);break;case 22:_t=(u=_t)||o.memoizedState!==null,ri(r,i,o),_t=u;break;default:ri(r,i,o)}}function ov(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ql(r)}catch(o){tt(i,i.return,o)}}function JS(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new rv),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new rv),i;default:throw Error(s(435,r.tag))}}function rm(r,i){var o=JS(r);i.forEach(function(u){var f=lR.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function wn(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(qi(A.type)){ot=A.stateNode,hn=!1;break e}break;case 5:ot=A.stateNode,hn=!1;break e;case 3:case 4:ot=A.stateNode.containerInfo,hn=!0;break e}A=A.return}if(ot===null)throw Error(s(160));av(m,E,f),ot=null,hn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)lv(i,r),i=i.sibling}var tr=null;function lv(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:wn(i,r),An(r),u&4&&(ki(3,r,r.return),Dl(3,r),ki(5,r,r.return));break;case 1:wn(i,r),An(r),u&512&&(_t||o===null||br(o,o.return)),u&64&&ni&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=tr;if(wn(i,r),An(r),u&512&&(_t||o===null||br(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Cs]||m[It]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Gt(m,u,o),m[It]=r,gt(m),u=m;break e;case"link":var E=nE("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(m=E[A],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}m=f.createElement(u),Gt(m,u,o),f.head.appendChild(m);break;case"meta":if(E=nE("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(m=E[A],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}m=f.createElement(u),Gt(m,u,o),f.head.appendChild(m);break;default:throw Error(s(468,u))}m[It]=r,gt(m),u=m}r.stateNode=u}else rE(f,r.type,r.stateNode);else r.stateNode=tE(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?rE(f,r.type,r.stateNode):tE(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Jd(r,r.memoizedProps,o.memoizedProps)}break;case 27:wn(i,r),An(r),u&512&&(_t||o===null||br(o,o.return)),o!==null&&u&4&&Jd(r,r.memoizedProps,o.memoizedProps);break;case 5:if(wn(i,r),An(r),u&512&&(_t||o===null||br(o,o.return)),r.flags&32){f=r.stateNode;try{Pn(f,"")}catch(Y){tt(r,r.return,Y)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Jd(r,f,o!==null?o.memoizedProps:f)),u&1024&&(nm=!0);break;case 6:if(wn(i,r),An(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Y){tt(r,r.return,Y)}}break;case 3:if(nh=null,f=tr,tr=eh(i.containerInfo),wn(i,r),tr=f,An(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ql(i.containerInfo)}catch(Y){tt(r,r.return,Y)}nm&&(nm=!1,uv(r));break;case 4:u=tr,tr=eh(r.stateNode.containerInfo),wn(i,r),An(r),tr=u;break;case 12:wn(i,r),An(r);break;case 13:wn(i,r),An(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(um=xn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,rm(r,u)));break;case 22:f=r.memoizedState!==null;var x=o!==null&&o.memoizedState!==null,$=ni,Z=_t;if(ni=$||f,_t=Z||x,wn(i,r),_t=Z,ni=$,An(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||x||ni||_t||ea(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){x=o=i;try{if(m=x.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=x.stateNode;var ee=x.memoizedProps.style,Q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;A.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Y){tt(x,x.return,Y)}}}else if(i.tag===6){if(o===null){x=i;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(Y){tt(x,x.return,Y)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,rm(r,o))));break;case 19:wn(i,r),An(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,rm(r,u)));break;case 30:break;case 21:break;default:wn(i,r),An(r)}}function An(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(tv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,m=em(r);Bc(r,m,f);break;case 5:var E=o.stateNode;o.flags&32&&(Pn(E,""),o.flags&=-33);var A=em(r);Bc(r,A,E);break;case 3:case 4:var x=o.stateNode.containerInfo,$=em(r);tm(r,$,x);break;default:throw Error(s(161))}}catch(Z){tt(r,r.return,Z)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function uv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;uv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Mi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)iv(r,i.alternate,i),i=i.sibling}function ea(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:ki(4,i,i.return),ea(i);break;case 1:br(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&J_(i,i.return,o),ea(i);break;case 27:zl(i.stateNode);case 26:case 5:br(i,i.return),ea(i);break;case 22:i.memoizedState===null&&ea(i);break;case 30:ea(i);break;default:ea(i)}r=r.sibling}}function Vi(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,m=i,E=m.flags;switch(m.tag){case 0:case 11:case 15:Vi(f,m,o),Dl(4,m);break;case 1:if(Vi(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){tt(u,u.return,$)}if(u=m,f=u.updateQueue,f!==null){var A=u.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)Ly(x[f],A)}catch($){tt(u,u.return,$)}}o&&E&64&&Z_(m),xl(m,m.return);break;case 27:nv(m);case 26:case 5:Vi(f,m,o),o&&u===null&&E&4&&ev(m),xl(m,m.return);break;case 12:Vi(f,m,o);break;case 13:Vi(f,m,o),o&&E&4&&ov(f,m);break;case 22:m.memoizedState===null&&Vi(f,m,o),xl(m,m.return);break;case 30:break;default:Vi(f,m,o)}i=i.sibling}}function im(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&gl(o))}function sm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&gl(r))}function wr(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)cv(r,i,o,u),i=i.sibling}function cv(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:wr(r,i,o,u),f&2048&&Dl(9,i);break;case 1:wr(r,i,o,u);break;case 3:wr(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&gl(r)));break;case 12:if(f&2048){wr(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,E=m.id,A=m.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(x){tt(i,i.return,x)}}else wr(r,i,o,u);break;case 13:wr(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,E=i.alternate,i.memoizedState!==null?m._visibility&2?wr(r,i,o,u):Ol(r,i):m._visibility&2?wr(r,i,o,u):(m._visibility|=2,eo(r,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&im(E,i);break;case 24:wr(r,i,o,u),f&2048&&sm(i.alternate,i);break;default:wr(r,i,o,u)}}function eo(r,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=r,E=i,A=o,x=u,$=E.flags;switch(E.tag){case 0:case 11:case 15:eo(m,E,A,x,f),Dl(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?eo(m,E,A,x,f):Ol(m,E):(Z._visibility|=2,eo(m,E,A,x,f)),f&&$&2048&&im(E.alternate,E);break;case 24:eo(m,E,A,x,f),f&&$&2048&&sm(E.alternate,E);break;default:eo(m,E,A,x,f)}i=i.sibling}}function Ol(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:Ol(o,u),f&2048&&im(u.alternate,u);break;case 24:Ol(o,u),f&2048&&sm(u.alternate,u);break;default:Ol(o,u)}i=i.sibling}}var Pl=8192;function to(r){if(r.subtreeFlags&Pl)for(r=r.child;r!==null;)hv(r),r=r.sibling}function hv(r){switch(r.tag){case 26:to(r),r.flags&Pl&&r.memoizedState!==null&&LR(tr,r.memoizedState,r.memoizedProps);break;case 5:to(r);break;case 3:case 4:var i=tr;tr=eh(r.stateNode.containerInfo),to(r),tr=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=Pl,Pl=16777216,to(r),Pl=i):to(r));break;default:to(r)}}function fv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function kl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Lt=u,mv(u,r)}fv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)dv(r),r=r.sibling}function dv(r){switch(r.tag){case 0:case 11:case 15:kl(r),r.flags&2048&&ki(9,r,r.return);break;case 3:kl(r);break;case 12:kl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,qc(r)):kl(r);break;default:kl(r)}}function qc(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Lt=u,mv(u,r)}fv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:ki(8,i,i.return),qc(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,qc(i));break;default:qc(i)}r=r.sibling}}function mv(r,i){for(;Lt!==null;){var o=Lt;switch(o.tag){case 0:case 11:case 15:ki(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:gl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Lt=u;else e:for(o=r;Lt!==null;){u=Lt;var f=u.sibling,m=u.return;if(sv(u),u===o){Lt=null;break e}if(f!==null){f.return=m,Lt=f;break e}Lt=m}}}var eR={getCacheForType:function(r){var i=Xt(Dt),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},tR=typeof WeakMap=="function"?WeakMap:Map,Qe=0,rt=null,Pe=null,Be=0,Ye=0,Sn=null,Ui=!1,no=!1,am=!1,ii=0,dt=0,Li=0,ta=0,om=0,qn=0,ro=0,Ml=null,fn=null,lm=!1,um=0,Fc=1/0,Hc=null,ji=null,Ht=0,zi=null,io=null,so=0,cm=0,hm=null,pv=null,Vl=0,fm=null;function Rn(){if((Qe&2)!==0&&Be!==0)return Be&-Be;if(W.T!==null){var r=Ka;return r!==0?r:vm()}return Ti()}function gv(){qn===0&&(qn=(Be&536870912)===0||He?Go():536870912);var r=Bn.current;return r!==null&&(r.flags|=32),qn}function In(r,i,o){(r===rt&&(Ye===2||Ye===9)||r.cancelPendingCommit!==null)&&(ao(r,0),Bi(r,Be,qn,!1)),Vr(r,o),((Qe&2)===0||r!==rt)&&(r===rt&&((Qe&2)===0&&(ta|=o),dt===4&&Bi(r,Be,qn,!1)),Ar(r))}function yv(r,i,o){if((Qe&6)!==0)throw Error(s(327));var u=!o&&(i&124)===0&&(i&r.expiredLanes)===0||Is(r,i),f=u?iR(r,i):pm(r,i,!0),m=u;do{if(f===0){no&&!u&&Bi(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!nR(o)){f=pm(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=r;f=Ml;var x=A.current.memoizedState.isDehydrated;if(x&&(ao(A,E).flags|=256),E=pm(A,E,!1),E!==2){if(am&&!x){A.errorRecoveryDisabledLanes|=m,ta|=m,f=4;break e}m=fn,fn=f,m!==null&&(fn===null?fn=m:fn.push.apply(fn,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){ao(r,0),Bi(r,i,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Bi(u,i,qn,!Ui);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=um+300-xn(),10<f)){if(Bi(u,i,qn,!Ui),wa(u,0,!0)!==0)break e;u.timeoutHandle=Kv(_v.bind(null,u,o,fn,Hc,lm,i,qn,ta,ro,Ui,m,2,-0,0),f);break e}_v(u,o,fn,Hc,lm,i,qn,ta,ro,Ui,m,0,-0,0)}}break}while(!0);Ar(r)}function _v(r,i,o,u,f,m,E,A,x,$,Z,ee,Q,Y){if(r.timeoutHandle=-1,ee=i.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Fl={stylesheets:null,count:0,unsuspend:UR},hv(i),ee=jR(),ee!==null)){r.cancelPendingCommit=ee(Sv.bind(null,r,i,m,o,u,f,E,A,x,Z,1,Q,Y)),Bi(r,m,E,!$);return}Sv(r,i,m,o,u,f,E,A,x)}function nR(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Tn(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Bi(r,i,o,u){i&=~om,i&=~ta,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var m=31-Yt(f),E=1<<m;u[m]=-1,f&=~E}o!==0&&ur(r,o,i)}function Gc(){return(Qe&6)===0?(Ul(0),!1):!0}function dm(){if(Pe!==null){if(Ye===0)var r=Pe.return;else r=Pe,Xr=Ys=null,Dd(r),Za=null,Il=0,r=Pe;for(;r!==null;)W_(r.alternate,r),r=r.return;Pe=null}}function ao(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,ER(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),dm(),rt=r,Pe=o=$r(r.current,null),Be=i,Ye=0,Sn=null,Ui=!1,no=Is(r,i),am=!1,ro=qn=om=ta=Li=dt=0,fn=Ml=null,lm=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Yt(u),m=1<<f;i|=r[f],u&=~m}return ii=i,dc(),o}function vv(r,i){Ce=null,W.H=Oc,i===_l||i===bc?(i=Vy(),Ye=3):i===Py?(i=Vy(),Ye=4):Ye=i===U_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sn=i,Pe===null&&(dt=1,Uc(r,Un(i,r.current)))}function Ev(){var r=W.H;return W.H=Oc,r===null?Oc:r}function Tv(){var r=W.A;return W.A=eR,r}function mm(){dt=4,Ui||(Be&4194048)!==Be&&Bn.current!==null||(no=!0),(Li&134217727)===0&&(ta&134217727)===0||rt===null||Bi(rt,Be,qn,!1)}function pm(r,i,o){var u=Qe;Qe|=2;var f=Ev(),m=Tv();(rt!==r||Be!==i)&&(Hc=null,ao(r,i)),i=!1;var E=dt;e:do try{if(Ye!==0&&Pe!==null){var A=Pe,x=Sn;switch(Ye){case 8:dm(),E=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(i=!0);var $=Ye;if(Ye=0,Sn=null,oo(r,A,x,$),o&&no){E=0;break e}break;default:$=Ye,Ye=0,Sn=null,oo(r,A,x,$)}}rR(),E=dt;break}catch(Z){vv(r,Z)}while(!0);return i&&r.shellSuspendCounter++,Xr=Ys=null,Qe=u,W.H=f,W.A=m,Pe===null&&(rt=null,Be=0,dc()),E}function rR(){for(;Pe!==null;)bv(Pe)}function iR(r,i){var o=Qe;Qe|=2;var u=Ev(),f=Tv();rt!==r||Be!==i?(Hc=null,Fc=xn()+500,ao(r,i)):no=Is(r,i);e:do try{if(Ye!==0&&Pe!==null){i=Pe;var m=Sn;t:switch(Ye){case 1:Ye=0,Sn=null,oo(r,i,m,1);break;case 2:case 9:if(ky(m)){Ye=0,Sn=null,wv(i);break}i=function(){Ye!==2&&Ye!==9||rt!==r||(Ye=7),Ar(r)},m.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:ky(m)?(Ye=0,Sn=null,wv(i)):(Ye=0,Sn=null,oo(r,i,m,7));break;case 5:var E=null;switch(Pe.tag){case 26:E=Pe.memoizedState;case 5:case 27:var A=Pe;if(!E||iE(E)){Ye=0,Sn=null;var x=A.sibling;if(x!==null)Pe=x;else{var $=A.return;$!==null?(Pe=$,Kc($)):Pe=null}break t}}Ye=0,Sn=null,oo(r,i,m,5);break;case 6:Ye=0,Sn=null,oo(r,i,m,6);break;case 8:dm(),dt=6;break e;default:throw Error(s(462))}}sR();break}catch(Z){vv(r,Z)}while(!0);return Xr=Ys=null,W.H=u,W.A=f,Qe=o,Pe!==null?0:(rt=null,Be=0,dc(),dt)}function sR(){for(;Pe!==null&&!Bo();)bv(Pe)}function bv(r){var i=Y_(r.alternate,r,ii);r.memoizedProps=r.pendingProps,i===null?Kc(r):Pe=i}function wv(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=F_(o,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=F_(o,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Dd(i);default:W_(o,i),i=Pe=Ay(i,ii),i=Y_(o,i,ii)}r.memoizedProps=r.pendingProps,i===null?Kc(r):Pe=i}function oo(r,i,o,u){Xr=Ys=null,Dd(i),Za=null,Il=0;var f=i.return;try{if(QS(r,f,i,o,Be)){dt=1,Uc(r,Un(o,r.current)),Pe=null;return}}catch(m){if(f!==null)throw Pe=f,m;dt=1,Uc(r,Un(o,r.current)),Pe=null;return}i.flags&32768?(He||u===1?r=!0:no||(Be&536870912)!==0?r=!1:(Ui=r=!0,(u===2||u===9||u===3||u===6)&&(u=Bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Av(i,r)):Kc(i)}function Kc(r){var i=r;do{if((i.flags&32768)!==0){Av(i,Ui);return}r=i.return;var o=XS(i.alternate,i,ii);if(o!==null){Pe=o;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=r}while(i!==null);dt===0&&(dt=5)}function Av(r,i){do{var o=WS(r.alternate,r);if(o!==null){o.flags&=32767,Pe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Pe=r;return}Pe=r=o}while(r!==null);dt=6,Pe=null}function Sv(r,i,o,u,f,m,E,A,x){r.cancelPendingCommit=null;do $c();while(Ht!==0);if((Qe&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=sd,$o(r,o,m,E,A,x),r===rt&&(Pe=rt=null,Be=0),io=i,zi=r,so=o,cm=m,hm=f,pv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,uR(ws,function(){return Dv(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,f=oe.p,oe.p=2,E=Qe,Qe|=4;try{ZS(r,i,o)}finally{Qe=E,oe.p=f,W.T=u}}Ht=1,Rv(),Iv(),Cv()}}function Rv(){if(Ht===1){Ht=0;var r=zi,i=io,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=oe.p;oe.p=2;var f=Qe;Qe|=4;try{lv(i,r);var m=Im,E=my(r.containerInfo),A=m.focusedElem,x=m.selectionRange;if(E!==A&&A&&A.ownerDocument&&dy(A.ownerDocument.documentElement,A)){if(x!==null&&ed(A)){var $=x.start,Z=x.end;if(Z===void 0&&(Z=$),"selectionStart"in A)A.selectionStart=$,A.selectionEnd=Math.min(Z,A.value.length);else{var ee=A.ownerDocument||document,Q=ee&&ee.defaultView||window;if(Q.getSelection){var Y=Q.getSelection(),be=A.textContent.length,_e=Math.min(x.start,be),et=x.end===void 0?_e:Math.min(x.end,be);!Y.extend&&_e>et&&(E=et,et=_e,_e=E);var F=fy(A,_e),j=fy(A,et);if(F&&j&&(Y.rangeCount!==1||Y.anchorNode!==F.node||Y.anchorOffset!==F.offset||Y.focusNode!==j.node||Y.focusOffset!==j.offset)){var K=ee.createRange();K.setStart(F.node,F.offset),Y.removeAllRanges(),_e>et?(Y.addRange(K),Y.extend(j.node,j.offset)):(K.setEnd(j.node,j.offset),Y.addRange(K))}}}}for(ee=[],Y=A;Y=Y.parentNode;)Y.nodeType===1&&ee.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ee.length;A++){var J=ee[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}sh=!!Rm,Im=Rm=null}finally{Qe=f,oe.p=u,W.T=o}}r.current=i,Ht=2}}function Iv(){if(Ht===2){Ht=0;var r=zi,i=io,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=oe.p;oe.p=2;var f=Qe;Qe|=4;try{iv(r,i.alternate,i)}finally{Qe=f,oe.p=u,W.T=o}}Ht=3}}function Cv(){if(Ht===4||Ht===3){Ht=0,qu();var r=zi,i=io,o=so,u=pv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ht=5:(Ht=0,io=zi=null,Nv(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(ji=null),Aa(o),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ht,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=W.T,f=oe.p,oe.p=2,W.T=null;try{for(var m=r.onRecoverableError,E=0;E<u.length;E++){var A=u[E];m(A.value,{componentStack:A.stack})}}finally{W.T=i,oe.p=f}}(so&3)!==0&&$c(),Ar(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===fm?Vl++:(Vl=0,fm=r):Vl=0,Ul(0)}}function Nv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,gl(i)))}function $c(r){return Rv(),Iv(),Cv(),Dv()}function Dv(){if(Ht!==5)return!1;var r=zi,i=cm;cm=0;var o=Aa(so),u=W.T,f=oe.p;try{oe.p=32>o?32:o,W.T=null,o=hm,hm=null;var m=zi,E=so;if(Ht=0,io=zi=null,so=0,(Qe&6)!==0)throw Error(s(331));var A=Qe;if(Qe|=4,dv(m.current),cv(m,m.current,E,o),Qe=A,Ul(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ht,m)}catch{}return!0}finally{oe.p=f,W.T=u,Nv(r,i)}}function xv(r,i,o){i=Un(o,i),i=Hd(r.stateNode,i,2),r=Di(r,i,2),r!==null&&(Vr(r,2),Ar(r))}function tt(r,i,o){if(r.tag===3)xv(r,r,o);else for(;i!==null;){if(i.tag===3){xv(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ji===null||!ji.has(u))){r=Un(o,r),o=M_(2),u=Di(i,o,2),u!==null&&(V_(o,u,i,r),Vr(u,2),Ar(u));break}}i=i.return}}function gm(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new tR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(am=!0,f.add(o),r=aR.bind(null,r,i,o),i.then(r,r))}function aR(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,rt===r&&(Be&o)===o&&(dt===4||dt===3&&(Be&62914560)===Be&&300>xn()-um?(Qe&2)===0&&ao(r,0):om|=o,ro===Be&&(ro=0)),Ar(r)}function Ov(r,i){i===0&&(i=Ko()),r=qa(r,i),r!==null&&(Vr(r,i),Ar(r))}function oR(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),Ov(r,o)}function lR(r,i){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),Ov(r,o)}function uR(r,i){return Ts(r,i)}var Qc=null,lo=null,ym=!1,Yc=!1,_m=!1,na=0;function Ar(r){r!==lo&&r.next===null&&(lo===null?Qc=lo=r:lo=lo.next=r),Yc=!0,ym||(ym=!0,hR())}function Ul(r,i){if(!_m&&Yc){_m=!0;do for(var o=!1,u=Qc;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var E=u.suspendedLanes,A=u.pingedLanes;m=(1<<31-Yt(42|r)+1)-1,m&=f&~(E&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Vv(u,m))}else m=Be,m=wa(u,u===rt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Is(u,m)||(o=!0,Vv(u,m));u=u.next}while(o);_m=!1}}function cR(){Pv()}function Pv(){Yc=ym=!1;var r=0;na!==0&&(vR()&&(r=na),na=0);for(var i=xn(),o=null,u=Qc;u!==null;){var f=u.next,m=kv(u,i);m===0?(u.next=null,o===null?Qc=f:o.next=f,f===null&&(lo=o)):(o=u,(r!==0||(m&3)!==0)&&(Yc=!0)),u=f}Ul(r)}function kv(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var E=31-Yt(m),A=1<<E,x=f[E];x===-1?((A&o)===0||(A&u)!==0)&&(f[E]=Ho(A,i)):x<=i&&(r.expiredLanes|=A),m&=~A}if(i=rt,o=Be,o=wa(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Ye===2||Ye===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&bs(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Is(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&bs(u),Aa(o)){case 2:case 8:o=Ta;break;case 32:o=ws;break;case 268435456:o=ba;break;default:o=ws}return u=Mv.bind(null,r),o=Ts(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&bs(u),r.callbackPriority=2,r.callbackNode=null,2}function Mv(r,i){if(Ht!==0&&Ht!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if($c()&&r.callbackNode!==o)return null;var u=Be;return u=wa(r,r===rt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(yv(r,u,i),kv(r,xn()),r.callbackNode!=null&&r.callbackNode===o?Mv.bind(null,r):null)}function Vv(r,i){if($c())return null;yv(r,i,!0)}function hR(){TR(function(){(Qe&6)!==0?Ts(qo,cR):Pv()})}function vm(){return na===0&&(na=Go()),na}function Uv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Da(""+r)}function Lv(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function fR(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=Uv((f[Et]||null).action),E=u.submitter;E&&(i=(i=E[Et]||null)?Uv(i.formAction):E.getAttribute("formAction"),i!==null&&(m=i,E=null));var A=new xa("action","action",null,u,f);r.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(na!==0){var x=E?Lv(f,E):new FormData(f);jd(o,{pending:!0,data:x,method:f.method,action:m},null,x)}}else typeof m=="function"&&(A.preventDefault(),x=E?Lv(f,E):new FormData(f),jd(o,{pending:!0,data:x,method:f.method,action:m},m,x))},currentTarget:f}]})}}for(var Em=0;Em<id.length;Em++){var Tm=id[Em],dR=Tm.toLowerCase(),mR=Tm[0].toUpperCase()+Tm.slice(1);er(dR,"on"+mR)}er(yy,"onAnimationEnd"),er(_y,"onAnimationIteration"),er(vy,"onAnimationStart"),er("dblclick","onDoubleClick"),er("focusin","onFocus"),er("focusout","onBlur"),er(xS,"onTransitionRun"),er(OS,"onTransitionStart"),er(PS,"onTransitionCancel"),er(Ey,"onTransitionEnd"),Lr("onMouseEnter",["mouseout","mouseover"]),Lr("onMouseLeave",["mouseout","mouseover"]),Lr("onPointerEnter",["pointerout","pointerover"]),Lr("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function jv(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var E=u.length-1;0<=E;E--){var A=u[E],x=A.instance,$=A.currentTarget;if(A=A.listener,x!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=$;try{m(f)}catch(Z){Vc(Z)}f.currentTarget=null,m=x}else for(E=0;E<u.length;E++){if(A=u[E],x=A.instance,$=A.currentTarget,A=A.listener,x!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=$;try{m(f)}catch(Z){Vc(Z)}f.currentTarget=null,m=x}}}}function ke(r,i){var o=i[Yo];o===void 0&&(o=i[Yo]=new Set);var u=r+"__bubble";o.has(u)||(zv(i,r,2,!1),o.add(u))}function bm(r,i,o){var u=0;i&&(u|=4),zv(o,r,u,i)}var Xc="_reactListening"+Math.random().toString(36).slice(2);function wm(r){if(!r[Xc]){r[Xc]=!0,Xo.forEach(function(o){o!=="selectionchange"&&(pR.has(o)||bm(o,!1,r),bm(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Xc]||(i[Xc]=!0,bm("selectionchange",!1,i))}}function zv(r,i,o,u){switch(cE(i)){case 2:var f=qR;break;case 8:f=FR;break;default:f=Um}o=f.bind(null,i,o,r),f=void 0,!Mn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function Am(r,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var x=E.tag;if((x===3||x===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Ur(A),E===null)return;if(x=E.tag,x===5||x===6||x===26||x===27){u=m=E;continue e}A=A.parentNode}}u=u.return}Zu(function(){var $=m,Z=kn(o),ee=[];e:{var Q=Ty.get(r);if(Q!==void 0){var Y=xa,be=r;switch(r){case"keypress":if(pr(o)===0)break e;case"keydown":case"keyup":Y=Ua;break;case"focusin":be="focus",Y=ka;break;case"focusout":be="blur",Y=ka;break;case"beforeblur":case"afterblur":Y=ka;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Xf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=ac;break;case yy:case _y:case vy:Y=Ma;break;case Ey:Y=lc;break;case"scroll":case"scrollend":Y=Ju;break;case"wheel":Y=La;break;case"copy":case"cut":case"paste":Y=Va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ll;break;case"toggle":case"beforetoggle":Y=cc}var _e=(i&4)!==0,et=!_e&&(r==="scroll"||r==="scrollend"),F=_e?Q!==null?Q+"Capture":null:Q;_e=[];for(var j=$,K;j!==null;){var J=j;if(K=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||K===null||F===null||(J=Ms(j,F),J!=null&&_e.push(jl(j,J,K))),et)break;j=j.return}0<_e.length&&(Q=new Y(Q,be,null,o,Z),ee.push({event:Q,listeners:_e}))}}if((i&7)===0){e:{if(Q=r==="mouseover"||r==="pointerover",Y=r==="mouseout"||r==="pointerout",Q&&o!==Br&&(be=o.relatedTarget||o.fromElement)&&(Ur(be)||be[On]))break e;if((Y||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,Y?(be=o.relatedTarget||o.toElement,Y=$,be=be?Ur(be):null,be!==null&&(et=l(be),_e=be.tag,be!==et||_e!==5&&_e!==27&&_e!==6)&&(be=null)):(Y=null,be=$),Y!==be)){if(_e=Vn,J="onMouseLeave",F="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(_e=ll,J="onPointerLeave",F="onPointerEnter",j="pointer"),et=Y==null?Q:hr(Y),K=be==null?Q:hr(be),Q=new _e(J,j+"leave",Y,o,Z),Q.target=et,Q.relatedTarget=K,J=null,Ur(Z)===$&&(_e=new _e(F,j+"enter",be,o,Z),_e.target=K,_e.relatedTarget=et,J=_e),et=J,Y&&be)t:{for(_e=Y,F=be,j=0,K=_e;K;K=uo(K))j++;for(K=0,J=F;J;J=uo(J))K++;for(;0<j-K;)_e=uo(_e),j--;for(;0<K-j;)F=uo(F),K--;for(;j--;){if(_e===F||F!==null&&_e===F.alternate)break t;_e=uo(_e),F=uo(F)}_e=null}else _e=null;Y!==null&&Bv(ee,Q,Y,_e,!1),be!==null&&et!==null&&Bv(ee,et,be,_e,!0)}}e:{if(Q=$?hr($):window,Y=Q.nodeName&&Q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&Q.type==="file")var de=ay;else if(Nt(Q))if(oy)de=CS;else{de=RS;var xe=SS}else Y=Q.nodeName,!Y||Y.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&tl($.elementType)&&(de=ay):de=IS;if(de&&(de=de(r,$))){Kr(ee,de,o,Z);break e}xe&&xe(r,Q,$),r==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&Si(Q,"number",Q.value)}switch(xe=$?hr($):window,r){case"focusin":(Nt(xe)||xe.contentEditable==="true")&&(ja=xe,td=$,hl=null);break;case"focusout":hl=td=ja=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,py(ee,o,Z);break;case"selectionchange":if(DS)break;case"keydown":case"keyup":py(ee,o,Z)}var pe;if(_r)e:{switch(r){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else je?X(r,o)&&(ve="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ve="onCompositionStart");ve&&(v&&o.locale!=="ko"&&(je||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&je&&(pe=rl()):(mr=Z,Ri="value"in mr?mr.value:mr.textContent,je=!0)),xe=Wc($,ve),0<xe.length&&(ve=new al(ve,r,null,o,Z),ee.push({event:ve,listeners:xe}),pe?ve.data=pe:(pe=ue(o),pe!==null&&(ve.data=pe)))),(pe=y?Ct(r,o):ze(r,o))&&(ve=Wc($,"onBeforeInput"),0<ve.length&&(xe=new al("onBeforeInput","beforeinput",null,o,Z),ee.push({event:xe,listeners:ve}),xe.data=pe)),fR(ee,r,$,o,Z)}jv(ee,i)})}function jl(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Wc(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ms(r,o),f!=null&&u.unshift(jl(r,f,m)),f=Ms(r,i),f!=null&&u.push(jl(r,f,m))),r.tag===3)return u;r=r.return}return[]}function uo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Bv(r,i,o,u,f){for(var m=i._reactName,E=[];o!==null&&o!==u;){var A=o,x=A.alternate,$=A.stateNode;if(A=A.tag,x!==null&&x===u)break;A!==5&&A!==26&&A!==27||$===null||(x=$,f?($=Ms(o,m),$!=null&&E.unshift(jl(o,$,x))):f||($=Ms(o,m),$!=null&&E.push(jl(o,$,x)))),o=o.return}E.length!==0&&r.push({event:i,listeners:E})}var gR=/\r\n?/g,yR=/\u0000|\uFFFD/g;function qv(r){return(typeof r=="string"?r:""+r).replace(gR,`
`).replace(yR,"")}function Fv(r,i){return i=qv(i),qv(r)===i}function Zc(){}function Je(r,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Pn(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Pn(r,""+u);break;case"className":fr(r,"class",u);break;case"tabIndex":fr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(r,o,u);break;case"style":el(r,u,m);break;case"data":if(i!=="object"){fr(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Da(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Je(r,i,"name",f.name,f,null),Je(r,i,"formEncType",f.formEncType,f,null),Je(r,i,"formMethod",f.formMethod,f,null),Je(r,i,"formTarget",f.formTarget,f,null)):(Je(r,i,"encType",f.encType,f,null),Je(r,i,"method",f.method,f,null),Je(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Da(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Zc);break;case"onScroll":u!=null&&ke("scroll",r);break;case"onScrollEnd":u!=null&&ke("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Da(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ke("beforetoggle",r),ke("toggle",r),Ai(r,"popover",u);break;case"xlinkActuate":Bt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Bt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Bt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Bt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Bt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Bt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Bt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Bt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Bt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ai(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Qf.get(o)||o,Ai(r,o,u))}}function Sm(r,i,o,u,f,m){switch(o){case"style":el(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Pn(r,u):(typeof u=="number"||typeof u=="bigint")&&Pn(r,""+u);break;case"onScroll":u!=null&&ke("scroll",r);break;case"onScrollEnd":u!=null&&ke("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Zc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sa.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=r[Et]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Ai(r,o,u)}}}function Gt(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",r),ke("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var E=o[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(r,i,m,E,o,null)}}f&&Je(r,i,"srcSet",o.srcSet,o,null),u&&Je(r,i,"src",o.src,o,null);return;case"input":ke("invalid",r);var A=m=E=f=null,x=null,$=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":E=Z;break;case"checked":x=Z;break;case"defaultChecked":$=Z;break;case"value":m=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:Je(r,i,u,Z,o,null)}}Os(r,m,A,x,$,E,f,!1),Na(r);return;case"select":ke("invalid",r),u=E=m=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:Je(r,i,f,A,o,null)}i=m,o=E,r.multiple=!!u,i!=null?zr(r,!!u,i,!1):o!=null&&zr(r,!!u,o,!0);return;case"textarea":ke("invalid",r),m=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:Je(r,i,E,A,o,null)}Ps(r,u,f,m),Na(r);return;case"option":for(x in o)if(o.hasOwnProperty(x)&&(u=o[x],u!=null))switch(x){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Je(r,i,x,u,o,null)}return;case"dialog":ke("beforetoggle",r),ke("toggle",r),ke("cancel",r),ke("close",r);break;case"iframe":case"object":ke("load",r);break;case"video":case"audio":for(u=0;u<Ll.length;u++)ke(Ll[u],r);break;case"image":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"embed":case"source":case"link":ke("error",r),ke("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(u=o[$],u!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(r,i,$,u,o,null)}return;default:if(tl(i)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&Sm(r,i,Z,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&Je(r,i,A,u,o,null))}function _R(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,A=null,x=null,$=null,Z=null;for(Y in o){var ee=o[Y];if(o.hasOwnProperty(Y)&&ee!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":x=ee;default:u.hasOwnProperty(Y)||Je(r,i,Y,null,u,ee)}}for(var Q in u){var Y=u[Q];if(ee=o[Q],u.hasOwnProperty(Q)&&(Y!=null||ee!=null))switch(Q){case"type":m=Y;break;case"name":f=Y;break;case"checked":$=Y;break;case"defaultChecked":Z=Y;break;case"value":E=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==ee&&Je(r,i,Q,Y,u,ee)}}En(r,E,A,x,$,Z,m,f);return;case"select":Y=E=A=Q=null;for(m in o)if(x=o[m],o.hasOwnProperty(m)&&x!=null)switch(m){case"value":break;case"multiple":Y=x;default:u.hasOwnProperty(m)||Je(r,i,m,null,u,x)}for(f in u)if(m=u[f],x=o[f],u.hasOwnProperty(f)&&(m!=null||x!=null))switch(f){case"value":Q=m;break;case"defaultValue":A=m;break;case"multiple":E=m;default:m!==x&&Je(r,i,f,m,u,x)}i=A,o=E,u=Y,Q!=null?zr(r,!!o,Q,!1):!!u!=!!o&&(i!=null?zr(r,!!o,i,!0):zr(r,!!o,o?[]:"",!1));return;case"textarea":Y=Q=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Je(r,i,A,null,u,f)}for(E in u)if(f=u[E],m=o[E],u.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":Q=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Je(r,i,E,f,u,m)}We(r,Q,Y);return;case"option":for(var be in o)if(Q=o[be],o.hasOwnProperty(be)&&Q!=null&&!u.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:Je(r,i,be,null,u,Q)}for(x in u)if(Q=u[x],Y=o[x],u.hasOwnProperty(x)&&Q!==Y&&(Q!=null||Y!=null))switch(x){case"selected":r.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Je(r,i,x,Q,u,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in o)Q=o[_e],o.hasOwnProperty(_e)&&Q!=null&&!u.hasOwnProperty(_e)&&Je(r,i,_e,null,u,Q);for($ in u)if(Q=u[$],Y=o[$],u.hasOwnProperty($)&&Q!==Y&&(Q!=null||Y!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Je(r,i,$,Q,u,Y)}return;default:if(tl(i)){for(var et in o)Q=o[et],o.hasOwnProperty(et)&&Q!==void 0&&!u.hasOwnProperty(et)&&Sm(r,i,et,void 0,u,Q);for(Z in u)Q=u[Z],Y=o[Z],!u.hasOwnProperty(Z)||Q===Y||Q===void 0&&Y===void 0||Sm(r,i,Z,Q,u,Y);return}}for(var F in o)Q=o[F],o.hasOwnProperty(F)&&Q!=null&&!u.hasOwnProperty(F)&&Je(r,i,F,null,u,Q);for(ee in u)Q=u[ee],Y=o[ee],!u.hasOwnProperty(ee)||Q===Y||Q==null&&Y==null||Je(r,i,ee,Q,u,Y)}var Rm=null,Im=null;function Jc(r){return r.nodeType===9?r:r.ownerDocument}function Hv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Cm(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nm=null;function vR(){var r=window.event;return r&&r.type==="popstate"?r===Nm?!1:(Nm=r,!0):(Nm=null,!1)}var Kv=typeof setTimeout=="function"?setTimeout:void 0,ER=typeof clearTimeout=="function"?clearTimeout:void 0,$v=typeof Promise=="function"?Promise:void 0,TR=typeof queueMicrotask=="function"?queueMicrotask:typeof $v<"u"?function(r){return $v.resolve(null).then(r).catch(bR)}:Kv;function bR(r){setTimeout(function(){throw r})}function qi(r){return r==="head"}function Qv(r,i){var o=i,u=0,f=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&zl(E.documentElement),o&2&&zl(E.body),o&4)for(o=E.head,zl(o),E=o.firstChild;E;){var A=E.nextSibling,x=E.nodeName;E[Cs]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){r.removeChild(m),Ql(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Ql(i)}function Dm(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dm(o),wi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function wR(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Cs])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=nr(r.nextSibling),r===null)break}return null}function AR(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=nr(r.nextSibling),r===null))return null;return r}function xm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function SR(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function nr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var Om=null;function Yv(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function Xv(r,i,o){switch(i=Jc(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function zl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);wi(r)}var Fn=new Map,Wv=new Set;function eh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var si=oe.d;oe.d={f:RR,r:IR,D:CR,C:NR,L:DR,m:xR,X:PR,S:OR,M:kR};function RR(){var r=si.f(),i=Gc();return r||i}function IR(r){var i=cr(r);i!==null&&i.tag===5&&i.type==="form"?y_(i):si.r(r)}var co=typeof document>"u"?null:document;function Zv(r,i,o){var u=co;if(u&&typeof i=="string"&&i){var f=Tt(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Wv.has(f)||(Wv.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Gt(i,"link",r),gt(i),u.head.appendChild(i)))}}function CR(r){si.D(r),Zv("dns-prefetch",r,null)}function NR(r,i){si.C(r,i),Zv("preconnect",r,i)}function DR(r,i,o){si.L(r,i,o);var u=co;if(u&&r&&i){var f='link[rel="preload"][as="'+Tt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Tt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Tt(o.imageSizes)+'"]')):f+='[href="'+Tt(r)+'"]';var m=f;switch(i){case"style":m=ho(r);break;case"script":m=fo(r)}Fn.has(m)||(r=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Fn.set(m,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Bl(m))||i==="script"&&u.querySelector(ql(m))||(i=u.createElement("link"),Gt(i,"link",r),gt(i),u.head.appendChild(i)))}}function xR(r,i){si.m(r,i);var o=co;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Tt(u)+'"][href="'+Tt(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=fo(r)}if(!Fn.has(m)&&(r=_({rel:"modulepreload",href:r},i),Fn.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ql(m)))return}u=o.createElement("link"),Gt(u,"link",r),gt(u),o.head.appendChild(u)}}}function OR(r,i,o){si.S(r,i,o);var u=co;if(u&&r){var f=sn(u).hoistableStyles,m=ho(r);i=i||"default";var E=f.get(m);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(Bl(m)))A.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Fn.get(m))&&Pm(r,o);var x=E=u.createElement("link");gt(x),Gt(x,"link",r),x._p=new Promise(function($,Z){x.onload=$,x.onerror=Z}),x.addEventListener("load",function(){A.loading|=1}),x.addEventListener("error",function(){A.loading|=2}),A.loading|=4,th(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(m,E)}}}function PR(r,i){si.X(r,i);var o=co;if(o&&r){var u=sn(o).hoistableScripts,f=fo(r),m=u.get(f);m||(m=o.querySelector(ql(f)),m||(r=_({src:r,async:!0},i),(i=Fn.get(f))&&km(r,i),m=o.createElement("script"),gt(m),Gt(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function kR(r,i){si.M(r,i);var o=co;if(o&&r){var u=sn(o).hoistableScripts,f=fo(r),m=u.get(f);m||(m=o.querySelector(ql(f)),m||(r=_({src:r,async:!0,type:"module"},i),(i=Fn.get(f))&&km(r,i),m=o.createElement("script"),gt(m),Gt(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Jv(r,i,o,u){var f=(f=we.current)?eh(f):null;if(!f)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ho(o.href),o=sn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ho(o.href);var m=sn(f).hoistableStyles,E=m.get(r);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,E),(m=f.querySelector(Bl(r)))&&!m._p&&(E.instance=m,E.state.loading=5),Fn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Fn.set(r,o),m||MR(f,r,o,E.state))),i&&u===null)throw Error(s(528,""));return E}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=fo(o),o=sn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ho(r){return'href="'+Tt(r)+'"'}function Bl(r){return'link[rel="stylesheet"]['+r+"]"}function eE(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function MR(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Gt(i,"link",o),gt(i),r.head.appendChild(i))}function fo(r){return'[src="'+Tt(r)+'"]'}function ql(r){return"script[async]"+r}function tE(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Tt(o.href)+'"]');if(u)return i.instance=u,gt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),gt(u),Gt(u,"style",f),th(u,o.precedence,r),i.instance=u;case"stylesheet":f=ho(o.href);var m=r.querySelector(Bl(f));if(m)return i.state.loading|=4,i.instance=m,gt(m),m;u=eE(o),(f=Fn.get(f))&&Pm(u,f),m=(r.ownerDocument||r).createElement("link"),gt(m);var E=m;return E._p=new Promise(function(A,x){E.onload=A,E.onerror=x}),Gt(m,"link",u),i.state.loading|=4,th(m,o.precedence,r),i.instance=m;case"script":return m=fo(o.src),(f=r.querySelector(ql(m)))?(i.instance=f,gt(f),f):(u=o,(f=Fn.get(m))&&(u=_({},o),km(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),gt(f),Gt(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,th(u,o.precedence,r));return i.instance}function th(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===i)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Pm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function km(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var nh=null;function nE(r,i,o){if(nh===null){var u=new Map,f=nh=new Map;f.set(o,u)}else f=nh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Cs]||m[It]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(i)||"";E=r+E;var A=u.get(E);A?A.push(m):u.set(E,[m])}}return u}function rE(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function VR(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function iE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Fl=null;function UR(){}function LR(r,i,o){if(Fl===null)throw Error(s(475));var u=Fl;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=ho(o.href),m=r.querySelector(Bl(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=rh.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=m,gt(m);return}m=r.ownerDocument||r,o=eE(o),(f=Fn.get(f))&&Pm(o,f),m=m.createElement("link"),gt(m);var E=m;E._p=new Promise(function(A,x){E.onload=A,E.onerror=x}),Gt(m,"link",o),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=rh.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function jR(){if(Fl===null)throw Error(s(475));var r=Fl;return r.stylesheets&&r.count===0&&Mm(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&Mm(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function rh(){if(this.count--,this.count===0){if(this.stylesheets)Mm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ih=null;function Mm(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ih=new Map,i.forEach(zR,r),ih=null,rh.call(r))}function zR(r,i){if(!(i.state.loading&4)){var o=ih.get(r);if(o)var u=o.get(null);else{o=new Map,ih.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),m=o.get(E)||u,m===u&&o.set(null,f),o.set(E,f),this.count++,u=rh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Hl={$$typeof:q,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function BR(r,i,o,u,f,m,E,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function sE(r,i,o,u,f,m,E,A,x,$,Z,ee){return r=new BR(r,i,o,E,A,x,$,ee),i=1,m===!0&&(i|=24),m=bn(3,null,null,i),r.current=m,m.stateNode=r,i=gd(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},Ed(m),r}function aE(r){return r?(r=Fa,r):Fa}function oE(r,i,o,u,f,m){f=aE(f),u.context===null?u.context=f:u.pendingContext=f,u=Ni(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Di(r,u,i),o!==null&&(In(o,r,i),El(o,r,i))}function lE(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Vm(r,i){lE(r,i),(r=r.alternate)&&lE(r,i)}function uE(r){if(r.tag===13){var i=qa(r,67108864);i!==null&&In(i,r,67108864),Vm(r,67108864)}}var sh=!0;function qR(r,i,o,u){var f=W.T;W.T=null;var m=oe.p;try{oe.p=2,Um(r,i,o,u)}finally{oe.p=m,W.T=f}}function FR(r,i,o,u){var f=W.T;W.T=null;var m=oe.p;try{oe.p=8,Um(r,i,o,u)}finally{oe.p=m,W.T=f}}function Um(r,i,o,u){if(sh){var f=Lm(u);if(f===null)Am(r,i,u,ah,o),hE(r,u);else if(GR(f,r,i,o,u))u.stopPropagation();else if(hE(r,u),i&4&&-1<HR.indexOf(r)){for(;f!==null;){var m=cr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=Wn(m.pendingLanes);if(E!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var x=1<<31-Yt(E);A.entanglements[1]|=x,E&=~x}Ar(m),(Qe&6)===0&&(Fc=xn()+500,Ul(0))}}break;case 13:A=qa(m,2),A!==null&&In(A,m,2),Gc(),Vm(m,2)}if(m=Lm(u),m===null&&Am(r,i,u,ah,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Am(r,i,u,null,o)}}function Lm(r){return r=kn(r),jm(r)}var ah=null;function jm(r){if(ah=null,r=Ur(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=h(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return ah=r,null}function cE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qf()){case qo:return 2;case Ta:return 8;case ws:case Ff:return 32;case ba:return 268435456;default:return 32}default:return 32}}var zm=!1,Fi=null,Hi=null,Gi=null,Gl=new Map,Kl=new Map,Ki=[],HR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hE(r,i){switch(r){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Gl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(i.pointerId)}}function $l(r,i,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=cr(i),i!==null&&uE(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function GR(r,i,o,u,f){switch(i){case"focusin":return Fi=$l(Fi,r,i,o,u,f),!0;case"dragenter":return Hi=$l(Hi,r,i,o,u,f),!0;case"mouseover":return Gi=$l(Gi,r,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return Gl.set(m,$l(Gl.get(m)||null,r,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Kl.set(m,$l(Kl.get(m)||null,r,i,o,u,f)),!0}return!1}function fE(r){var i=Ur(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=h(o),i!==null){r.blockedOn=i,Gu(r.priority,function(){if(o.tag===13){var u=Rn();u=Ei(u);var f=qa(o,u);f!==null&&In(f,o,u),Vm(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function oh(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Lm(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Br=u,o.target.dispatchEvent(u),Br=null}else return i=cr(o),i!==null&&uE(i),r.blockedOn=o,!1;i.shift()}return!0}function dE(r,i,o){oh(r)&&o.delete(i)}function KR(){zm=!1,Fi!==null&&oh(Fi)&&(Fi=null),Hi!==null&&oh(Hi)&&(Hi=null),Gi!==null&&oh(Gi)&&(Gi=null),Gl.forEach(dE),Kl.forEach(dE)}function lh(r,i){r.blockedOn===i&&(r.blockedOn=null,zm||(zm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,KR)))}var uh=null;function mE(r){uh!==r&&(uh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){uh===r&&(uh=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(jm(u||o)===null)continue;break}var m=cr(o);m!==null&&(r.splice(i,3),i-=3,jd(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Ql(r){function i(x){return lh(x,r)}Fi!==null&&lh(Fi,r),Hi!==null&&lh(Hi,r),Gi!==null&&lh(Gi,r),Gl.forEach(i),Kl.forEach(i);for(var o=0;o<Ki.length;o++){var u=Ki[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Ki.length&&(o=Ki[0],o.blockedOn===null);)fE(o),o.blockedOn===null&&Ki.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],E=f[Et]||null;if(typeof m=="function")E||mE(o);else if(E){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[Et]||null)A=E.formAction;else if(jm(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),mE(o)}}}function Bm(r){this._internalRoot=r}ch.prototype.render=Bm.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Rn();oE(o,u,r,i,null,null)},ch.prototype.unmount=Bm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;oE(r.current,2,null,r,null,null),Gc(),i[On]=null}};function ch(r){this._internalRoot=r}ch.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ti();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Ki.length&&i!==0&&i<Ki[o].priority;o++);Ki.splice(o,0,r),o===0&&fE(r)}};var pE=e.version;if(pE!=="19.1.0")throw Error(s(527,pE,"19.1.0"));oe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=p(i),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var $R={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{ht=hh.inject($R),$e=hh}catch{}}return Xl.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",f=x_,m=O_,E=P_,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=sE(r,1,!1,null,null,o,u,f,m,E,A,null),r[On]=i.current,wm(r),new Bm(i)},Xl.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,f="",m=x_,E=O_,A=P_,x=null,$=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(x=o.unstable_transitionCallbacks),o.formState!==void 0&&($=o.formState)),i=sE(r,1,!0,i,o??null,u,f,m,E,A,x,$),i.context=aE(null),o=i.current,u=Rn(),u=Ei(u),f=Ni(u),f.callback=null,Di(o,f,u),o=u,i.current.lanes=o,Vr(i,o),Ar(i),r[On]=i.current,wm(r),new ch(i)},Xl.version="19.1.0",Xl}var SE;function rI(){if(SE)return Hm.exports;SE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hm.exports=nI(),Hm.exports}var iI=rI();const sI=N0(iI);var Wl={},RE;function aI(){if(RE)return Wl;RE=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.parse=h,Wl.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function h(w,C){const R=new l,L=w.length;if(L<2)return R;const V=(C==null?void 0:C.decode)||_;let z=0;do{const U=w.indexOf("=",z);if(U===-1)break;const q=w.indexOf(";",z),se=q===-1?L:q;if(U>se){z=w.lastIndexOf(";",U-1)+1;continue}const ae=d(w,z,U),ie=p(w,U,ae),O=w.slice(ae,ie);if(R[O]===void 0){let I=d(w,U+1,se),D=p(w,se,I);const P=V(w.slice(I,D));R[O]=P}z=se+1}while(z<L);return R}function d(w,C,R){do{const L=w.charCodeAt(C);if(L!==32&&L!==9)return C}while(++C<R);return R}function p(w,C,R){for(;C>R;){const L=w.charCodeAt(--C);if(L!==32&&L!==9)return C+1}return R}function g(w,C,R){const L=(R==null?void 0:R.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const V=L(C);if(!e.test(V))throw new TypeError(`argument val is invalid: ${C}`);let z=w+"="+V;if(!R)return z;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);z+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);z+="; Domain="+R.domain}if(R.path){if(!s.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);z+="; Path="+R.path}if(R.expires){if(!b(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);z+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(z+="; HttpOnly"),R.secure&&(z+="; Secure"),R.partitioned&&(z+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return z}function _(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function b(w){return a.call(w)==="[object Date]"}return Wl}aI();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var IE="popstate";function oI(n={}){function e(s,a){let{pathname:l,search:h,hash:d}=s.location;return fp("",{pathname:l,search:h,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:mu(a)}return uI(e,t,null,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lI(){return Math.random().toString(36).substring(2,10)}function CE(n,e){return{usr:n.state,key:n.key,idx:e}}function fp(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Oo(e):e,state:t,key:e&&e.key||s||lI()}}function mu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Oo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function uI(n,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,h=a.history,d="POP",p=null,g=_();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function _(){return(h.state||{idx:null}).idx}function b(){d="POP";let V=_(),z=V==null?null:V-g;g=V,p&&p({action:d,location:L.location,delta:z})}function w(V,z){d="PUSH";let U=fp(L.location,V,z);g=_()+1;let q=CE(U,g),se=L.createHref(U);try{h.pushState(q,"",se)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;a.location.assign(se)}l&&p&&p({action:d,location:L.location,delta:1})}function C(V,z){d="REPLACE";let U=fp(L.location,V,z);g=_();let q=CE(U,g),se=L.createHref(U);h.replaceState(q,"",se),l&&p&&p({action:d,location:L.location,delta:0})}function R(V){let z=a.location.origin!=="null"?a.location.origin:a.location.href,U=typeof V=="string"?V:mu(V);return U=U.replace(/ $/,"%20"),ut(z,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,z)}let L={get action(){return d},get location(){return n(a,h)},listen(V){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(IE,b),p=V,()=>{a.removeEventListener(IE,b),p=null}},createHref(V){return e(a,V)},createURL:R,encodeLocation(V){let z=R(V);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:w,replace:C,go(V){return h.go(V)}};return L}function D0(n,e,t="/"){return cI(n,e,t,!1)}function cI(n,e,t,s){let a=typeof e=="string"?Oo(e):e,l=di(a.pathname||"/",t);if(l==null)return null;let h=x0(n);hI(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let g=bI(l);d=EI(h[p],g,s)}return d}function x0(n,e=[],t=[],s=""){let a=(l,h,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(ut(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=ci([s,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(ut(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),x0(l.children,e,_,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:_I(g,l.index),routesMeta:_})};return n.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,h);else for(let p of O0(l.path))a(l,h,p)}),e}function O0(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let h=O0(s.join("/")),d=[];return d.push(...h.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...h),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function hI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:vI(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var fI=/^:[\w-]+$/,dI=3,mI=2,pI=1,gI=10,yI=-2,NE=n=>n==="*";function _I(n,e){let t=n.split("/"),s=t.length;return t.some(NE)&&(s+=yI),e&&(s+=mI),t.filter(a=>!NE(a)).reduce((a,l)=>a+(fI.test(l)?dI:l===""?pI:gI),s)}function vI(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function EI(n,e,t=!1){let{routesMeta:s}=n,a={},l="/",h=[];for(let d=0;d<s.length;++d){let p=s[d],g=d===s.length-1,_=l==="/"?e:e.slice(l.length)||"/",b=kh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),w=p.route;if(!b&&g&&t&&!s[s.length-1].route.index&&(b=kh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!b)return null;Object.assign(a,b.params),h.push({params:a,pathname:ci([l,b.pathname]),pathnameBase:RI(ci([l,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(l=ci([l,b.pathnameBase]))}return h}function kh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=TI(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((g,{paramName:_,isOptional:b},w)=>{if(_==="*"){let R=d[w]||"";h=l.slice(0,l.length-R.length).replace(/(.)\/+$/,"$1")}const C=d[w];return b&&!C?g[_]=void 0:g[_]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:h,pattern:n}}function TI(n,e=!1,t=!0){xr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(s.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function bI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function di(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function wI(n,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?Oo(n):n;return{pathname:t?t.startsWith("/")?t:AI(t,e):e,search:II(s),hash:CI(a)}}function AI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Qm(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function P0(n){let e=SI(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function k0(n,e,t,s=!1){let a;typeof n=="string"?a=Oo(n):(a={...n},ut(!a.pathname||!a.pathname.includes("?"),Qm("?","pathname","search",a)),ut(!a.pathname||!a.pathname.includes("#"),Qm("#","pathname","hash",a)),ut(!a.search||!a.search.includes("#"),Qm("#","search","hash",a)));let l=n===""||a.pathname==="",h=l?"/":a.pathname,d;if(h==null)d=t;else{let b=e.length-1;if(!s&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),b-=1;a.pathname=w.join("/")}d=b>=0?e[b]:"/"}let p=wI(a,d),g=h&&h!=="/"&&h.endsWith("/"),_=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var ci=n=>n.join("/").replace(/\/\/+/g,"/"),RI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),II=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,CI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function NI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var M0=["POST","PUT","PATCH","DELETE"];new Set(M0);var DI=["GET",...M0];new Set(DI);var Po=k.createContext(null);Po.displayName="DataRouter";var sf=k.createContext(null);sf.displayName="DataRouterState";var V0=k.createContext({isTransitioning:!1});V0.displayName="ViewTransition";var xI=k.createContext(new Map);xI.displayName="Fetchers";var OI=k.createContext(null);OI.displayName="Await";var Pr=k.createContext(null);Pr.displayName="Navigation";var Iu=k.createContext(null);Iu.displayName="Location";var or=k.createContext({outlet:null,matches:[],isDataRoute:!1});or.displayName="Route";var Hp=k.createContext(null);Hp.displayName="RouteError";function PI(n,{relative:e}={}){ut(Cu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=k.useContext(Pr),{hash:a,pathname:l,search:h}=Nu(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:ci([t,l])),s.createHref({pathname:d,search:h,hash:a})}function Cu(){return k.useContext(Iu)!=null}function ga(){return ut(Cu(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Iu).location}var U0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function L0(n){k.useContext(Pr).static||k.useLayoutEffect(n)}function fs(){let{isDataRoute:n}=k.useContext(or);return n?YI():kI()}function kI(){ut(Cu(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(Po),{basename:e,navigator:t}=k.useContext(Pr),{matches:s}=k.useContext(or),{pathname:a}=ga(),l=JSON.stringify(P0(s)),h=k.useRef(!1);return L0(()=>{h.current=!0}),k.useCallback((p,g={})=>{if(xr(h.current,U0),!h.current)return;if(typeof p=="number"){t.go(p);return}let _=k0(p,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ci([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,n])}var MI=k.createContext(null);function VI(n){let e=k.useContext(or).outlet;return e&&k.createElement(MI.Provider,{value:n},e)}function UI(){let{matches:n}=k.useContext(or),e=n[n.length-1];return e?e.params:{}}function Nu(n,{relative:e}={}){let{matches:t}=k.useContext(or),{pathname:s}=ga(),a=JSON.stringify(P0(t));return k.useMemo(()=>k0(n,JSON.parse(a),s,e==="path"),[n,a,s,e])}function LI(n,e){return j0(n,e)}function j0(n,e,t,s){var U;ut(Cu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=k.useContext(Pr),{matches:h}=k.useContext(or),d=h[h.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",b=d&&d.route;{let q=b&&b.path||"";z0(g,!b||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let w=ga(),C;if(e){let q=typeof e=="string"?Oo(e):e;ut(_==="/"||((U=q.pathname)==null?void 0:U.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${q.pathname}" was given in the \`location\` prop.`),C=q}else C=w;let R=C.pathname||"/",L=R;if(_!=="/"){let q=_.replace(/^\//,"").split("/");L="/"+R.replace(/^\//,"").split("/").slice(q.length).join("/")}let V=!l&&t&&t.matches&&t.matches.length>0?t.matches:D0(n,{pathname:L});xr(b||V!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),xr(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=FI(V&&V.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:ci([_,a.encodeLocation?a.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?_:ci([_,a.encodeLocation?a.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),h,t,s);return e&&z?k.createElement(Iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},z):z}function jI(){let n=QI(),e=NI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:l},"ErrorBoundary")," or"," ",k.createElement("code",{style:l},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:a},t):null,h)}var zI=k.createElement(jI,null),BI=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?k.createElement(or.Provider,{value:this.props.routeContext},k.createElement(Hp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qI({routeContext:n,match:e,children:t}){let s=k.useContext(Po);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(or.Provider,{value:n},t)}function FI(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let p=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);ut(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:_,errors:b}=t,w=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||w){h=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,g,_)=>{let b,w=!1,C=null,R=null;t&&(b=l&&g.route.id?l[g.route.id]:void 0,C=g.route.errorElement||zI,h&&(d<0&&_===0?(z0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,R=null):d===_&&(w=!0,R=g.route.hydrateFallbackElement||null)));let L=e.concat(a.slice(0,_+1)),V=()=>{let z;return b?z=C:w?z=R:g.route.Component?z=k.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=p,k.createElement(qI,{match:g,routeContext:{outlet:p,matches:L,isDataRoute:t!=null},children:z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?k.createElement(BI,{location:t.location,revalidation:t.revalidation,component:C,error:b,children:V(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):V()},null)}function Gp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HI(n){let e=k.useContext(Po);return ut(e,Gp(n)),e}function GI(n){let e=k.useContext(sf);return ut(e,Gp(n)),e}function KI(n){let e=k.useContext(or);return ut(e,Gp(n)),e}function Kp(n){let e=KI(n),t=e.matches[e.matches.length-1];return ut(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $I(){return Kp("useRouteId")}function QI(){var s;let n=k.useContext(Hp),e=GI("useRouteError"),t=Kp("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function YI(){let{router:n}=HI("useNavigate"),e=Kp("useNavigate"),t=k.useRef(!1);return L0(()=>{t.current=!0}),k.useCallback(async(a,l={})=>{xr(t.current,U0),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var DE={};function z0(n,e,t){!e&&!DE[n]&&(DE[n]=!0,xr(!1,t))}k.memo(XI);function XI({routes:n,future:e,state:t}){return j0(n,void 0,t,e)}function WI(n){return VI(n.context)}function Hn(n){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZI({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1}){ut(!Cu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:h,navigator:a,static:l,future:{}}),[h,a,l]);typeof t=="string"&&(t=Oo(t));let{pathname:p="/",search:g="",hash:_="",state:b=null,key:w="default"}=t,C=k.useMemo(()=>{let R=di(p,h);return R==null?null:{location:{pathname:R,search:g,hash:_,state:b,key:w},navigationType:s}},[h,p,g,_,b,w,s]);return xr(C!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:k.createElement(Pr.Provider,{value:d},k.createElement(Iu.Provider,{children:e,value:C}))}function JI({children:n,location:e}){return LI(dp(n),e)}function dp(n,e=[]){let t=[];return k.Children.forEach(n,(s,a)=>{if(!k.isValidElement(s))return;let l=[...e,a];if(s.type===k.Fragment){t.push.apply(t,dp(s.props.children,l));return}ut(s.type===Hn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=dp(s.props.children,l)),t.push(h)}),t}var bh="get",wh="application/x-www-form-urlencoded";function af(n){return n!=null&&typeof n.tagName=="string"}function eC(n){return af(n)&&n.tagName.toLowerCase()==="button"}function tC(n){return af(n)&&n.tagName.toLowerCase()==="form"}function nC(n){return af(n)&&n.tagName.toLowerCase()==="input"}function rC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iC(n,e){return n.button===0&&(!e||e==="_self")&&!rC(n)}var fh=null;function sC(){if(fh===null)try{new FormData(document.createElement("form"),0),fh=!1}catch{fh=!0}return fh}var aC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ym(n){return n!=null&&!aC.has(n)?(xr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wh}"`),null):n}function oC(n,e){let t,s,a,l,h;if(tC(n)){let d=n.getAttribute("action");s=d?di(d,e):null,t=n.getAttribute("method")||bh,a=Ym(n.getAttribute("enctype"))||wh,l=new FormData(n)}else if(eC(n)||nC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(s=p?di(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||bh,a=Ym(n.getAttribute("formenctype"))||Ym(d.getAttribute("enctype"))||wh,l=new FormData(d,n),!sC()){let{name:g,type:_,value:b}=n;if(_==="image"){let w=g?`${g}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else g&&l.append(g,b)}}else{if(af(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bh,s=null,a=wh,h=n}return l&&a==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:h}}function $p(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function lC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function cC(n,e,t){let s=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let h=await lC(l,t);return h.links?h.links():[]}return[]}));return mC(s.flat(1).filter(uC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function xE(n,e,t,s,a,l){let h=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var _;return t[g].pathname!==p.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>h(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var b;let _=s.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(h(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function hC(n,e,{includeHydrateFallback:t}={}){return fC(n.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function fC(n){return[...new Set(n)]}function dC(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function mC(n,e){let t=new Set;return new Set(e),n.reduce((s,a)=>{let l=JSON.stringify(dC(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}var pC=new Set([100,101,204,205]);function gC(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&di(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function B0(){let n=k.useContext(Po);return $p(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yC(){let n=k.useContext(sf);return $p(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Qp=k.createContext(void 0);Qp.displayName="FrameworkContext";function q0(){let n=k.useContext(Qp);return $p(n,"You must render this element inside a <HydratedRouter> element"),n}function _C(n,e){let t=k.useContext(Qp),[s,a]=k.useState(!1),[l,h]=k.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:b}=e,w=k.useRef(null);k.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let L=z=>{z.forEach(U=>{h(U.isIntersecting)})},V=new IntersectionObserver(L,{threshold:.5});return w.current&&V.observe(w.current),()=>{V.disconnect()}}},[n]),k.useEffect(()=>{if(s){let L=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(L)}}},[s]);let C=()=>{a(!0)},R=()=>{a(!1),h(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:Zl(d,C),onBlur:Zl(p,R),onMouseEnter:Zl(g,C),onMouseLeave:Zl(_,R),onTouchStart:Zl(b,C)}]:[!1,w,{}]}function Zl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vC({page:n,...e}){let{router:t}=B0(),s=k.useMemo(()=>D0(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?k.createElement(TC,{page:n,matches:s,...e}):null}function EC(n){let{manifest:e,routeModules:t}=q0(),[s,a]=k.useState([]);return k.useEffect(()=>{let l=!1;return cC(n,e,t).then(h=>{l||a(h)}),()=>{l=!0}},[n,e,t]),s}function TC({page:n,matches:e,...t}){let s=ga(),{manifest:a,routeModules:l}=q0(),{basename:h}=B0(),{loaderData:d,matches:p}=yC(),g=k.useMemo(()=>xE(n,e,p,a,s,"data"),[n,e,p,a,s]),_=k.useMemo(()=>xE(n,e,p,a,s,"assets"),[n,e,p,a,s]),b=k.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let R=new Set,L=!1;if(e.forEach(z=>{var q;let U=a.routes[z.route.id];!U||!U.hasLoader||(!g.some(se=>se.route.id===z.route.id)&&z.route.id in d&&((q=l[z.route.id])!=null&&q.shouldRevalidate)||U.hasClientLoader?L=!0:R.add(z.route.id))}),R.size===0)return[];let V=gC(n,h);return L&&R.size>0&&V.searchParams.set("_routes",e.filter(z=>R.has(z.route.id)).map(z=>z.route.id).join(",")),[V.pathname+V.search]},[h,d,s,a,g,e,n,l]),w=k.useMemo(()=>hC(_,a),[_,a]),C=EC(_);return k.createElement(k.Fragment,null,b.map(R=>k.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),w.map(R=>k.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),C.map(({key:R,link:L})=>k.createElement("link",{key:R,...L})))}function bC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var F0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{F0&&(window.__reactRouterVersion="7.5.1")}catch{}function wC({basename:n,children:e,window:t}){let s=k.useRef();s.current==null&&(s.current=oI({window:t,v5Compat:!0}));let a=s.current,[l,h]=k.useState({action:a.action,location:a.location}),d=k.useCallback(p=>{k.startTransition(()=>h(p))},[h]);return k.useLayoutEffect(()=>a.listen(d),[a,d]),k.createElement(ZI,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var H0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vo=k.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:h,state:d,target:p,to:g,preventScrollReset:_,viewTransition:b,...w},C){let{basename:R}=k.useContext(Pr),L=typeof g=="string"&&H0.test(g),V,z=!1;if(typeof g=="string"&&L&&(V=g,F0))try{let D=new URL(window.location.href),P=g.startsWith("//")?new URL(D.protocol+g):new URL(g),B=di(P.pathname,R);P.origin===D.origin&&B!=null?g=B+P.search+P.hash:z=!0}catch{xr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=PI(g,{relative:a}),[q,se,ae]=_C(s,w),ie=IC(g,{replace:h,state:d,target:p,preventScrollReset:_,relative:a,viewTransition:b});function O(D){e&&e(D),D.defaultPrevented||ie(D)}let I=k.createElement("a",{...w,...ae,href:V||U,onClick:z||l?e:O,ref:bC(C,se),target:p,"data-discover":!L&&t==="render"?"true":void 0});return q&&!L?k.createElement(k.Fragment,null,I,k.createElement(vC,{page:U})):I});vo.displayName="Link";var AC=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:h,viewTransition:d,children:p,...g},_){let b=Nu(h,{relative:g.relative}),w=ga(),C=k.useContext(sf),{navigator:R,basename:L}=k.useContext(Pr),V=C!=null&&OC(b)&&d===!0,z=R.encodeLocation?R.encodeLocation(b).pathname:b.pathname,U=w.pathname,q=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(U=U.toLowerCase(),q=q?q.toLowerCase():null,z=z.toLowerCase()),q&&L&&(q=di(q,L)||q);const se=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ae=U===z||!a&&U.startsWith(z)&&U.charAt(se)==="/",ie=q!=null&&(q===z||!a&&q.startsWith(z)&&q.charAt(z.length)==="/"),O={isActive:ae,isPending:ie,isTransitioning:V},I=ae?e:void 0,D;typeof s=="function"?D=s(O):D=[s,ae?"active":null,ie?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(O):l;return k.createElement(vo,{...g,"aria-current":I,className:D,ref:_,style:P,to:h,viewTransition:d},typeof p=="function"?p(O):p)});AC.displayName="NavLink";var SC=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:h=bh,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:b,...w},C)=>{let R=DC(),L=xC(d,{relative:g}),V=h.toLowerCase()==="get"?"get":"post",z=typeof d=="string"&&H0.test(d),U=q=>{if(p&&p(q),q.defaultPrevented)return;q.preventDefault();let se=q.nativeEvent.submitter,ae=(se==null?void 0:se.getAttribute("formmethod"))||h;R(se||q.currentTarget,{fetcherKey:e,method:ae,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:b})};return k.createElement("form",{ref:C,method:V,action:L,onSubmit:s?p:U,...w,"data-discover":!z&&n==="render"?"true":void 0})});SC.displayName="Form";function RC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G0(n){let e=k.useContext(Po);return ut(e,RC(n)),e}function IC(n,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:h}={}){let d=fs(),p=ga(),g=Nu(n,{relative:l});return k.useCallback(_=>{if(iC(_,e)){_.preventDefault();let b=t!==void 0?t:mu(p)===mu(g);d(n,{replace:b,state:s,preventScrollReset:a,relative:l,viewTransition:h})}},[p,d,g,t,s,e,n,a,l,h])}var CC=0,NC=()=>`__${String(++CC)}__`;function DC(){let{router:n}=G0("useSubmit"),{basename:e}=k.useContext(Pr),t=$I();return k.useCallback(async(s,a={})=>{let{action:l,method:h,encType:d,formData:p,body:g}=oC(s,e);if(a.navigate===!1){let _=a.fetcherKey||NC();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||h,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||h,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function xC(n,{relative:e}={}){let{basename:t}=k.useContext(Pr),s=k.useContext(or);ut(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Nu(n||".",{relative:e})},h=ga();if(n==null){l.search=h.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(b=>b).forEach(b=>d.append("index",b));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ci([t,l.pathname])),mu(l)}function OC(n,e={}){let t=k.useContext(V0);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=G0("useViewTransitionState"),a=Nu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=di(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=di(t.nextLocation.pathname,s)||t.nextLocation.pathname;return kh(a.pathname,h)!=null||kh(a.pathname,l)!=null}new TextEncoder;[...pC];const PC=()=>{};var OE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kC=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],h=n[t++],d=n[t++],p=((a&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],h=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|h&63)}}return e.join("")},$0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],h=a+1<n.length,d=h?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,_=l>>2,b=(l&3)<<4|d>>4;let w=(d&15)<<2|g>>6,C=g&63;p||(C=64,h||(w=64)),s.push(t[_],t[b],t[w],t[C])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(K0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||b==null)throw new MC;const w=l<<2|d>>4;if(s.push(w),g!==64){const C=d<<4&240|g>>2;if(s.push(C),b!==64){const R=g<<6&192|b;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VC=function(n){const e=K0(n);return $0.encodeByteArray(e,!0)},Mh=function(n){return VC(n).replace(/\./g,"")},Q0=function(n){try{return $0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=()=>UC().__FIREBASE_DEFAULTS__,jC=()=>{if(typeof process>"u"||typeof OE>"u")return;const n=OE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Q0(n[1]);return e&&JSON.parse(e)},of=()=>{try{return PC()||LC()||jC()||zC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Y0=n=>{var e,t;return(t=(e=of())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},X0=n=>{const e=Y0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},W0=()=>{var n;return(n=of())===null||n===void 0?void 0:n.config},Z0=n=>{var e;return(e=of())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Mh(JSON.stringify(t)),Mh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function FC(){var n;const e=(n=of())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KC(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $C(){return!FC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tb(){try{return typeof indexedDB=="object"}catch{return!1}}function nb(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function QC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="FirebaseError";class Xn extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=YC,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ya.prototype.create)}}class ya{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],h=l?XC(l,s):"Error",d=`${this.serviceName}: ${h} (${a}).`;return new Xn(a,d,s)}}function XC(n,e){return n.replace(WC,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const WC=/\{\$([^}]+)}/g;function ZC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ss(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],h=e[a];if(PE(l)&&PE(h)){if(!ss(l,h))return!1}else if(l!==h)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function PE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function eu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function tu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function JC(n,e){const t=new e1(n,e);return t.subscribe.bind(t)}class e1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");t1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Xm),a.error===void 0&&(a.error=Xm),a.complete===void 0&&(a.complete=Xm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=1e3,r1=2,i1=4*60*60*1e3,s1=.5;function kE(n,e=n1,t=r1){const s=e*Math.pow(t,n),a=Math.round(s1*s*(Math.random()-.5)*2);return Math.min(i1,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(n){return n&&n._delegate?n._delegate:n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(n){return n.endsWith(".cloudworkstations.dev")}async function Yp(n){return(await fetch(n,{credentials:"include"})).ok}class Qn{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new BC;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l1(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&h.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(a,l);const h=this.instances.get(a);return h&&e(h,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:o1(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o1(n){return n===ra?void 0:n}function l1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const c1={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},h1=Ve.INFO,f1={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},d1=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=f1[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lf{constructor(e){this.name=e,this._logLevel=h1,this._logHandler=d1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const m1=(n,e)=>e.some(t=>n instanceof t);let ME,VE;function p1(){return ME||(ME=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g1(){return VE||(VE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rb=new WeakMap,mp=new WeakMap,ib=new WeakMap,Wm=new WeakMap,Xp=new WeakMap;function y1(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(es(n.result)),a()},h=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&rb.set(t,n)}).catch(()=>{}),Xp.set(e,n),e}function _1(n){if(mp.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),a()},h=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});mp.set(n,e)}let pp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return mp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ib.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return es(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function v1(n){pp=n(pp)}function E1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Zm(this),e,...t);return ib.set(s,e.sort?e.sort():[e]),es(s)}:g1().includes(n)?function(...e){return n.apply(Zm(this),e),es(rb.get(this))}:function(...e){return es(n.apply(Zm(this),e))}}function T1(n){return typeof n=="function"?E1(n):(n instanceof IDBTransaction&&_1(n),m1(n,p1())?new Proxy(n,pp):n)}function es(n){if(n instanceof IDBRequest)return y1(n);if(Wm.has(n))return Wm.get(n);const e=T1(n);return e!==n&&(Wm.set(n,e),Xp.set(e,n)),e}const Zm=n=>Xp.get(n);function sb(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const h=indexedDB.open(n,e),d=es(h);return s&&h.addEventListener("upgradeneeded",p=>{s(es(h.result),p.oldVersion,p.newVersion,es(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const b1=["get","getKey","getAll","getAllKeys","count"],w1=["put","add","delete","clear"],Jm=new Map;function UE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jm.get(e))return Jm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=w1.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||b1.includes(t)))return;const l=async function(h,...d){const p=this.transaction(h,a?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Jm.set(e,l),l}v1(n=>({...n,get:(e,t,s)=>UE(e,t)||n.get(e,t,s),has:(e,t)=>!!UE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(S1(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function S1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gp="@firebase/app",LE="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new lf("@firebase/app"),R1="@firebase/app-compat",I1="@firebase/analytics-compat",C1="@firebase/analytics",N1="@firebase/app-check-compat",D1="@firebase/app-check",x1="@firebase/auth",O1="@firebase/auth-compat",P1="@firebase/database",k1="@firebase/data-connect",M1="@firebase/database-compat",V1="@firebase/functions",U1="@firebase/functions-compat",L1="@firebase/installations",j1="@firebase/installations-compat",z1="@firebase/messaging",B1="@firebase/messaging-compat",q1="@firebase/performance",F1="@firebase/performance-compat",H1="@firebase/remote-config",G1="@firebase/remote-config-compat",K1="@firebase/storage",$1="@firebase/storage-compat",Q1="@firebase/firestore",Y1="@firebase/vertexai",X1="@firebase/firestore-compat",W1="firebase",Z1="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",J1={[gp]:"fire-core",[R1]:"fire-core-compat",[C1]:"fire-analytics",[I1]:"fire-analytics-compat",[D1]:"fire-app-check",[N1]:"fire-app-check-compat",[x1]:"fire-auth",[O1]:"fire-auth-compat",[P1]:"fire-rtdb",[k1]:"fire-data-connect",[M1]:"fire-rtdb-compat",[V1]:"fire-fn",[U1]:"fire-fn-compat",[L1]:"fire-iid",[j1]:"fire-iid-compat",[z1]:"fire-fcm",[B1]:"fire-fcm-compat",[q1]:"fire-perf",[F1]:"fire-perf-compat",[H1]:"fire-rc",[G1]:"fire-rc-compat",[K1]:"fire-gcs",[$1]:"fire-gcs-compat",[Q1]:"fire-fst",[X1]:"fire-fst-compat",[Y1]:"fire-vertex","fire-js":"fire-js",[W1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Map,eN=new Map,_p=new Map;function jE(n,e){try{n.container.addComponent(e)}catch(t){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sr(n){const e=n.name;if(_p.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;_p.set(e,n);for(const t of Vh.values())jE(t,n);for(const t of eN.values())jE(t,n);return!0}function ds(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ts=new ya("app","Firebase",tN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=Z1;function ab(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:yp,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw ts.create("bad-app-name",{appName:String(a)});if(t||(t=W0()),!t)throw ts.create("no-options");const l=Vh.get(a);if(l){if(ss(t,l.options)&&ss(s,l.config))return l;throw ts.create("duplicate-app",{appName:a})}const h=new u1(a);for(const p of _p.values())h.addComponent(p);const d=new nN(t,s,h);return Vh.set(a,d),d}function uf(n=yp){const e=Vh.get(n);if(!e&&n===yp&&W0())return ab();if(!e)throw ts.create("no-app",{appName:n});return e}function gn(n,e,t){var s;let a=(s=J1[n])!==null&&s!==void 0?s:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(d.join(" "));return}sr(new Qn(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firebase-heartbeat-database",iN=1,pu="firebase-heartbeat-store";let ep=null;function ob(){return ep||(ep=sb(rN,iN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ts.create("idb-open",{originalErrorMessage:n.message})})),ep}async function sN(n){try{const t=(await ob()).transaction(pu),s=await t.objectStore(pu).get(lb(n));return await t.done,s}catch(e){if(e instanceof Xn)mi.warn(e.message);else{const t=ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mi.warn(t.message)}}}async function zE(n,e){try{const s=(await ob()).transaction(pu,"readwrite");await s.objectStore(pu).put(e,lb(n)),await s.done}catch(t){if(t instanceof Xn)mi.warn(t.message);else{const s=ts.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});mi.warn(s.message)}}}function lb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=1024,oN=30;class lN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cN(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=BE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>oN){const h=hN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){mi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=BE(),{heartbeatsToSend:s,unsentEntries:a}=uN(this._heartbeatsCache.heartbeats),l=Mh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return mi.warn(t),""}}}function BE(){return new Date().toISOString().substring(0,10)}function uN(n,e=aN){const t=[];let s=n.slice();for(const a of n){const l=t.find(h=>h.agent===a.agent);if(l){if(l.dates.push(a.date),qE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),qE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class cN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tb()?nb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return zE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return zE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function qE(n){return Mh(JSON.stringify({version:2,heartbeats:n})).length}function hN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n){sr(new Qn("platform-logger",e=>new A1(e),"PRIVATE")),sr(new Qn("heartbeat",e=>new lN(e),"PRIVATE")),gn(gp,LE,n),gn(gp,LE,"esm2017"),gn("fire-js","")}fN("");function Wp(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dN=ub,cb=new ya("auth","Firebase",ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new lf("@firebase/auth");function mN(n,...e){Uh.logLevel<=Ve.WARN&&Uh.warn(`Auth (${_a}): ${n}`,...e)}function Ah(n,...e){Uh.logLevel<=Ve.ERROR&&Uh.error(`Auth (${_a}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(n,...e){throw Jp(n,...e)}function ir(n,...e){return Jp(n,...e)}function Zp(n,e,t){const s=Object.assign(Object.assign({},dN()),{[e]:t});return new ya("auth","Firebase",s).create(e,{appName:n.name})}function hi(n){return Zp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pN(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Yn(n,"argument-error"),Zp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return cb.create(n,...e)}function Ee(n,e,...t){if(!n)throw Jp(e,...t)}function oi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ah(e),new Error(e)}function pi(n,e){n||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function gN(){return FE()==="http:"||FE()==="https:"}function FE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gN()||eb()||"connection"in navigator)?navigator.onLine:!0}function _N(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=qC()||GC()}get(){return yN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(n,e){pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TN=new xu(3e4,6e4);function ms(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ps(n,e,t,s,a={}){return fb(n,a,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const d=Du(Object.assign({key:n.config.apiKey},h)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},l);return HC()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&ko(n.emulatorConfig.host)&&(g.credentials="include"),hb.fetch()(await db(n,n.config.apiHost,t,d),g)})}async function fb(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},vN),e);try{const a=new wN(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw dh(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const d=l.ok?h.errorMessage:h.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(n,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw dh(n,"email-already-in-use",h);if(p==="USER_DISABLED")throw dh(n,"user-disabled",h);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Zp(n,_,g);Yn(n,_)}}catch(a){if(a instanceof Xn)throw a;Yn(n,"network-request-failed",{message:String(a)})}}async function Ou(n,e,t,s,a={}){const l=await ps(n,e,t,s,a);return"mfaPendingCredential"in l&&Yn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function db(n,e,t,s){const a=`${e}${t}?${s}`,l=n,h=l.config.emulator?eg(n.config,a):`${n.config.apiScheme}://${a}`;return EN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function bN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ir(this.auth,"network-request-failed")),TN.get())})}}function dh(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=ir(n,e,s);return a.customData._tokenResponse=t,a}function HE(n){return n!==void 0&&n.enterprise!==void 0}class AN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SN(n,e){return ps(n,"GET","/v2/recaptchaConfig",ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(n,e){return ps(n,"POST","/v1/accounts:delete",e)}async function Lh(n,e){return ps(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IN(n,e=!1){const t=it(n),s=await t.getIdToken(e),a=tg(s);Ee(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:au(tp(a.auth_time)),issuedAtTime:au(tp(a.iat)),expirationTime:au(tp(a.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function tp(n){return Number(n)*1e3}function tg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const a=Q0(t);return a?JSON.parse(a):(Ah("Failed to decode base64 JWT payload"),null)}catch(a){return Ah("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function GE(n){const e=tg(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Xn&&CN(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function CN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(n){var e;const t=n.auth,s=await n.getIdToken(),a=await gu(n,Lh(t,{idToken:s}));Ee(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?mb(l.providerUserInfo):[],d=xN(n.providerData,h),p=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),_=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ep(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,b)}async function DN(n){const e=it(n);await jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xN(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function mb(n){return n.map(e=>{var{providerId:t}=e,s=Wp(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(n,e){const t=await fb(n,{},async()=>{const s=Du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,h=await db(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",hb.fetch()(h,{method:"POST",headers:d,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function PN(n,e){return ps(n,"POST","/v2/accounts:revokeToken",ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=GE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await ON(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,h=new Eo;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),a&&(Ee(typeof a=="string","internal-error",{appName:e}),h.accessToken=a),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rr{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,l=Wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ep(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await gu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return IN(this,e)}reload(){return DN(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await jh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await gu(this,RN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,l,h,d,p,g,_;const b=(s=t.displayName)!==null&&s!==void 0?s:void 0,w=(a=t.email)!==null&&a!==void 0?a:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,R=(h=t.photoURL)!==null&&h!==void 0?h:void 0,L=(d=t.tenantId)!==null&&d!==void 0?d:void 0,V=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,z=(g=t.createdAt)!==null&&g!==void 0?g:void 0,U=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:q,emailVerified:se,isAnonymous:ae,providerData:ie,stsTokenManager:O}=t;Ee(q&&O,e,"internal-error");const I=Eo.fromJSON(this.name,O);Ee(typeof q=="string",e,"internal-error"),Qi(b,e.name),Qi(w,e.name),Ee(typeof se=="boolean",e,"internal-error"),Ee(typeof ae=="boolean",e,"internal-error"),Qi(C,e.name),Qi(R,e.name),Qi(L,e.name),Qi(V,e.name),Qi(z,e.name),Qi(U,e.name);const D=new rr({uid:q,auth:e,email:w,emailVerified:se,displayName:b,isAnonymous:ae,photoURL:R,phoneNumber:C,tenantId:L,stsTokenManager:I,createdAt:z,lastLoginAt:U});return ie&&Array.isArray(ie)&&(D.providerData=ie.map(P=>Object.assign({},P))),V&&(D._redirectEventId=V),D}static async _fromIdTokenResponse(e,t,s=!1){const a=new Eo;a.updateFromServerResponse(t);const l=new rr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await jh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Ee(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?mb(a.providerUserInfo):[],h=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Eo;d.updateFromIdToken(s);const p=new rr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:h}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ep(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=new Map;function li(n){pi(n instanceof Function,"Expected a class definition");let e=KE.get(n);return e?(pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,KE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pb.type="NONE";const $E=pb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(n,e,t){return`firebase:${n}:${e}:${t}`}class To{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Sh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Sh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lh(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new To(li($E),e,s);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||li($E);const h=Sh(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(h);if(_){let b;if(typeof _=="string"){const w=await Lh(e,{idToken:_}).catch(()=>{});if(!w)break;b=await rr._fromGetAccountInfoResponse(e,w,_)}else b=rr._fromJSON(e,_);g!==l&&(d=b),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new To(l,e,s):(l=p[0],d&&await l._set(h,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(h)}catch{}})),new To(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tb(e))return"Blackberry";if(bb(e))return"Webos";if(yb(e))return"Safari";if((e.includes("chrome/")||_b(e))&&!e.includes("edge/"))return"Chrome";if(Eb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function gb(n=rn()){return/firefox\//i.test(n)}function yb(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _b(n=rn()){return/crios\//i.test(n)}function vb(n=rn()){return/iemobile/i.test(n)}function Eb(n=rn()){return/android/i.test(n)}function Tb(n=rn()){return/blackberry/i.test(n)}function bb(n=rn()){return/webos/i.test(n)}function ng(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kN(n=rn()){var e;return ng(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MN(){return KC()&&document.documentMode===10}function wb(n=rn()){return ng(n)||Eb(n)||bb(n)||Tb(n)||/windows phone/i.test(n)||vb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n,e=[]){let t;switch(n){case"Browser":t=QE(rn());break;case"Worker":t=`${QE(rn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_a}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,d)=>{try{const p=e(l);h(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(n,e={}){return ps(n,"GET","/v2/passwordPolicy",ms(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=6;class jN{constructor(e){var t,s,a,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:LN,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,l,h,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YE(this),this.idTokenSubscription=new YE(this),this.beforeStateQueue=new VN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lh(this,{idToken:e}),s=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===d)&&(p!=null&&p.user)&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(h){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_N()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(hi(this));const t=e?it(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UN(this),t=new jN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ya("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await PN(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ab(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&mN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function gs(n){return it(n)}class YE{constructor(e){this.auth=e,this.observer=null,this.addObserver=JC(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BN(n){cf=n}function Sb(n){return cf.loadJS(n)}function qN(){return cf.recaptchaEnterpriseScript}function FN(){return cf.gapiScript}function HN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class GN{constructor(){this.enterprise=new KN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $N="recaptcha-enterprise",Rb="NO_RECAPTCHA";class QN{constructor(e){this.type=$N,this.auth=gs(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,d)=>{SN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new AN(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,h(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,h,d){const p=window.grecaptcha;HE(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{h(g)}).catch(()=>{h(Rb)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GN().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(d=>{if(!t&&HE(window.grecaptcha))a(d,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=qN();p.length!==0&&(p+=d),Sb(p).then(()=>{a(d,l,h)}).catch(g=>{h(g)})}}).catch(d=>{h(d)})})}}async function XE(n,e,t,s=!1,a=!1){const l=new QN(n);let h;if(a)h=Rb;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:h}):Object.assign(d,{captchaResponse:h}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Tp(n,e,t,s,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await XE(n,e,t,t==="getOobCode");return s(n,h)}else return s(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await XE(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(n,e){const t=ds(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ss(l,e??{}))return a;Yn(a,"already-initialized")}return t.initialize({options:e})}function XN(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(li);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function WN(n,e,t){const s=gs(n);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=Ib(e),{host:h,port:d}=ZN(e),p=d===null?"":`:${d}`,g={url:`${l}//${h}${p}/`},_=Object.freeze({host:h,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(ss(g,s.config.emulator)&&ss(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,JN(),ko(h)&&Yp(`${l}//${h}${p}`)}function Ib(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ZN(n){const e=Ib(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:WE(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:WE(h)}}}function WE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function JN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,t){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}async function eD(n,e){return ps(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(n,e){return Ou(n,"POST","/v1/accounts:signInWithPassword",ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(n,e){return Ou(n,"POST","/v1/accounts:signInWithEmailLink",ms(n,e))}async function rD(n,e){return Ou(n,"POST","/v1/accounts:signInWithEmailLink",ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends rg{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new yu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new yu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,t,"signInWithPassword",tD);case"emailLink":return nD(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,s,"signUpPassword",eD);case"emailLink":return rD(e,{idToken:t,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(n,e){return Ou(n,"POST","/v1/accounts:signInWithIdp",ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="http://localhost";class ua extends rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,l=Wp(t,["providerId","signInMethod"]);if(!s||!a)return null;const h=new ua(s,a);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return bo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,bo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}buildRequest(){const e={requestUri:iD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Du(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aD(n){const e=eu(tu(n)).link,t=e?eu(tu(e)).deep_link_id:null,s=eu(tu(n)).deep_link_id;return(s?eu(tu(s)).link:null)||s||t||e||n}class ig{constructor(e){var t,s,a,l,h,d;const p=eu(tu(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(s=p.oobCode)!==null&&s!==void 0?s:null,b=sD((a=p.mode)!==null&&a!==void 0?a:null);Ee(g&&_&&b,"argument-error"),this.apiKey=g,this.operation=b,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.lang)!==null&&h!==void 0?h:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=aD(e);try{return new ig(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.providerId=Mo.PROVIDER_ID}static credential(e,t){return yu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=ig.parseLink(t);return Ee(s,"argument-error"),yu._fromEmailAndCode(e,s.code,s.tenantId)}}Mo.PROVIDER_ID="password";Mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends sg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Pu{constructor(){super("facebook.com")}static credential(e){return ua._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ua._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ai.credential(t,s)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Pu{constructor(){super("github.com")}static credential(e){return ua._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.GITHUB_SIGN_IN_METHOD="github.com";Xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Pu{constructor(){super("twitter.com")}static credential(e,t){return ua._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Wi.credential(t,s)}catch{return null}}}Wi.TWITTER_SIGN_IN_METHOD="twitter.com";Wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(n,e){return Ou(n,"POST","/v1/accounts:signUp",ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await rr._fromIdTokenResponse(e,s,a),h=ZE(s);return new ca({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=ZE(s);return new ca({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function ZE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends Xn{constructor(e,t,s,a){var l;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,zh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new zh(e,t,s,a)}}function Cb(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?zh._fromErrorAndOperation(n,l,e,s):l})}async function lD(n,e,t=!1){const s=await gu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ca._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(n,e,t=!1){const{auth:s}=n;if(mn(s.app))return Promise.reject(hi(s));const a="reauthenticate";try{const l=await gu(n,Cb(s,a,e,n),t);Ee(l.idToken,s,"internal-error");const h=tg(l.idToken);Ee(h,s,"internal-error");const{sub:d}=h;return Ee(n.uid===d,s,"user-mismatch"),ca._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Yn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(n,e,t=!1){if(mn(n.app))return Promise.reject(hi(n));const s="signIn",a=await Cb(n,s,e),l=await ca._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function cD(n,e){return Nb(gs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(n){const e=gs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hD(n,e,t){if(mn(n.app))return Promise.reject(hi(n));const s=gs(n),h=await Tp(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Db(n),p}),d=await ca._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(d.user),d}function fD(n,e,t){return mn(n.app)?Promise.reject(hi(n)):cD(it(n),Mo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Db(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(n,e){return it(n).setPersistence(e)}function mD(n,e,t,s){return it(n).onIdTokenChanged(e,t,s)}function pD(n,e,t){return it(n).beforeAuthStateChanged(e,t)}function hf(n,e,t,s){return it(n).onAuthStateChanged(e,t,s)}function gD(n){return it(n).signOut()}const Bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1e3,_D=10;class Ob extends xb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);MN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,_D):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ob.type="LOCAL";const Pb=Ob;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb extends xb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kb.type="SESSION";const Mb=kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new ff(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,h=this.handlersMap[a];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const d=Array.from(h).map(async g=>g(t.origin,l)),p=await vD(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,h;return new Promise((d,p)=>{const g=ag("",20);a.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:a,onMessage(b){const w=b;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(w.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),a.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return window}function TD(n){Cr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function bD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function AD(){return Vb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firebaseLocalStorageDb",SD=1,qh="firebaseLocalStorage",Lb="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function df(n,e){return n.transaction([qh],e?"readwrite":"readonly").objectStore(qh)}function RD(){const n=indexedDB.deleteDatabase(Ub);return new ku(n).toPromise()}function bp(){const n=indexedDB.open(Ub,SD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(qh,{keyPath:Lb})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(qh)?e(s):(s.close(),await RD(),e(await bp()))})})}async function JE(n,e,t){const s=df(n,!0).put({[Lb]:e,value:t});return new ku(s).toPromise()}async function ID(n,e){const t=df(n,!1).get(e),s=await new ku(t).toPromise();return s===void 0?null:s.value}function eT(n,e){const t=df(n,!0).delete(e);return new ku(t).toPromise()}const CD=800,ND=3;class jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>ND)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ff._getInstance(AD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await bD(),!this.activeServiceWorker)return;this.sender=new ED(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await JE(e,Bh,"1"),await eT(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>JE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>ID(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=df(a,!1).getAll();return new ku(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jb.type="LOCAL";const DD=jb;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n,e){return e?li(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xD(n){return Nb(n.auth,new og(n),n.bypassAuthState)}function OD(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),uD(t,new og(n),n.bypassAuthState)}async function PD(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),lD(t,new og(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xD;case"linkViaPopup":case"linkViaRedirect":return PD;case"reauthViaPopup":case"reauthViaRedirect":return OD;default:Yn(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new xu(2e3,1e4);async function MD(n,e,t){if(mn(n.app))return Promise.reject(ir(n,"operation-not-supported-in-this-environment"));const s=gs(n);pN(n,e,sg);const a=zb(s,t);return new ia(s,"signInViaPopup",e,a).executeNotNull()}class ia extends Bb{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,ia.currentPopupAction&&ia.currentPopupAction.cancel(),ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kD.get())};e()}}ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="pendingRedirect",Rh=new Map;class UD extends Bb{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const s=await LD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LD(n,e){const t=BD(e),s=zD(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function jD(n,e){Rh.set(n._key(),e)}function zD(n){return li(n._redirectPersistence)}function BD(n){return Sh(VD,n.config.apiKey,n.name)}async function qD(n,e,t=!1){if(mn(n.app))return Promise.reject(hi(n));const s=gs(n),a=zb(s,e),h=await new UD(s,a,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=10*60*1e3;class HD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!qb(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(ir(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FD&&this.cachedEventUids.clear(),this.cachedEventUids.has(tT(e))}saveEventToCache(e){this.cachedEventUids.add(tT(e)),this.lastProcessedEventTime=Date.now()}}function tT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qb({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(n,e={}){return ps(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QD=/^https?/;async function YD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await KD(n);for(const t of e)try{if(XD(t))return}catch{}Yn(n,"unauthorized-domain")}function XD(n){const e=vp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!QD.test(t))return!1;if($D.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new xu(3e4,6e4);function nT(){const n=Cr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ZD(n){return new Promise((e,t)=>{var s,a,l;function h(){nT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nT(),t(ir(n,"network-request-failed"))},timeout:WD.get()})}if(!((a=(s=Cr().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Cr().gapi)===null||l===void 0)&&l.load)h();else{const d=HN("iframefcb");return Cr()[d]=()=>{gapi.load?h():t(ir(n,"network-request-failed"))},Sb(`${FN()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Ih=null,e})}let Ih=null;function JD(n){return Ih=Ih||ZD(n),Ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new xu(5e3,15e3),tx="__/auth/iframe",nx="emulator/auth/iframe",rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ix=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sx(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?eg(e,nx):`https://${n.config.authDomain}/${tx}`,s={apiKey:e.apiKey,appName:n.name,v:_a},a=ix.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Du(s).slice(1)}`}async function ax(n){const e=await JD(n),t=Cr().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:sx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rx,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const h=ir(n,"network-request-failed"),d=Cr().setTimeout(()=>{l(h)},ex.get());function p(){Cr().clearTimeout(d),a(s)}s.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lx=500,ux=600,cx="_blank",hx="http://localhost";class rT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fx(n,e,t,s=lx,a=ux){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p=Object.assign(Object.assign({},ox),{width:s.toString(),height:a.toString(),top:l,left:h}),g=rn().toLowerCase();t&&(d=_b(g)?cx:t),gb(g)&&(e=e||hx,p.scrollbars="yes");const _=Object.entries(p).reduce((w,[C,R])=>`${w}${C}=${R},`,"");if(kN(g)&&d!=="_self")return dx(e||"",d),new rT(null);const b=window.open(e||"",d,_);Ee(b,n,"popup-blocked");try{b.focus()}catch{}return new rT(b)}function dx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="__/auth/handler",px="emulator/auth/handler",gx=encodeURIComponent("fac");async function iT(n,e,t,s,a,l){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:_a,eventId:a};if(e instanceof sg){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",ZC(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))h[_]=b}if(e instanceof Pu){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(h.scopes=_.join(","))}n.tenantId&&(h.tid=n.tenantId);const d=h;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),g=p?`#${gx}=${encodeURIComponent(p)}`:"";return`${yx(n)}?${Du(d).slice(1)}${g}`}function yx({config:n}){return n.emulator?eg(n,px):`https://${n.authDomain}/${mx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="webStorageSupport";class _x{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mb,this._completeRedirectFn=qD,this._overrideRedirectResult=jD}async _openPopup(e,t,s,a){var l;pi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await iT(e,t,s,vp(),a);return fx(e,h,ag())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await iT(e,t,s,vp(),a);return TD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(pi(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await ax(e),s=new HD(e);return t.register("authEvent",a=>(Ee(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(np,{type:np},a=>{var l;const h=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[np];h!==void 0&&t(!!h),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wb()||yb()||ng()}}const vx=_x;var sT="@firebase/auth",aT="1.10.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bx(n){sr(new Qn("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=s.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ab(n)},g=new zN(s,a,l,p);return XN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),sr(new Qn("auth-internal",e=>{const t=gs(e.getProvider("auth").getImmediate());return(s=>new Ex(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gn(sT,aT,Tx(n)),gn(sT,aT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=5*60,Ax=Z0("authIdTokenMaxAge")||wx;let oT=null;const Sx=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Ax)return;const a=t==null?void 0:t.token;oT!==a&&(oT=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function mf(n=uf()){const e=ds(n,"auth");if(e.isInitialized())return e.getImmediate();const t=YN(n,{popupRedirectResolver:vx,persistence:[DD,Pb,Mb]}),s=Z0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=Sx(l.toString());pD(t,h,()=>h(t.currentUser)),mD(t,d=>h(d))}}const a=Y0("auth");return a&&WN(t,`http://${a}`),t}function Rx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}BN({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=ir("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",Rx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bx("Browser");var lT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,Fb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function D(){}D.prototype=I.prototype,O.D=I.prototype,O.prototype=new D,O.prototype.constructor=O,O.C=function(P,B,H){for(var N=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)N[Ie-2]=arguments[Ie];return I.prototype[B].apply(P,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,I,D){D||(D=0);var P=Array(16);if(typeof I=="string")for(var B=0;16>B;++B)P[B]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(B=0;16>B;++B)P[B]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=O.g[0],D=O.g[1],B=O.g[2];var H=O.g[3],N=I+(H^D&(B^H))+P[0]+3614090360&4294967295;I=D+(N<<7&4294967295|N>>>25),N=H+(B^I&(D^B))+P[1]+3905402710&4294967295,H=I+(N<<12&4294967295|N>>>20),N=B+(D^H&(I^D))+P[2]+606105819&4294967295,B=H+(N<<17&4294967295|N>>>15),N=D+(I^B&(H^I))+P[3]+3250441966&4294967295,D=B+(N<<22&4294967295|N>>>10),N=I+(H^D&(B^H))+P[4]+4118548399&4294967295,I=D+(N<<7&4294967295|N>>>25),N=H+(B^I&(D^B))+P[5]+1200080426&4294967295,H=I+(N<<12&4294967295|N>>>20),N=B+(D^H&(I^D))+P[6]+2821735955&4294967295,B=H+(N<<17&4294967295|N>>>15),N=D+(I^B&(H^I))+P[7]+4249261313&4294967295,D=B+(N<<22&4294967295|N>>>10),N=I+(H^D&(B^H))+P[8]+1770035416&4294967295,I=D+(N<<7&4294967295|N>>>25),N=H+(B^I&(D^B))+P[9]+2336552879&4294967295,H=I+(N<<12&4294967295|N>>>20),N=B+(D^H&(I^D))+P[10]+4294925233&4294967295,B=H+(N<<17&4294967295|N>>>15),N=D+(I^B&(H^I))+P[11]+2304563134&4294967295,D=B+(N<<22&4294967295|N>>>10),N=I+(H^D&(B^H))+P[12]+1804603682&4294967295,I=D+(N<<7&4294967295|N>>>25),N=H+(B^I&(D^B))+P[13]+4254626195&4294967295,H=I+(N<<12&4294967295|N>>>20),N=B+(D^H&(I^D))+P[14]+2792965006&4294967295,B=H+(N<<17&4294967295|N>>>15),N=D+(I^B&(H^I))+P[15]+1236535329&4294967295,D=B+(N<<22&4294967295|N>>>10),N=I+(B^H&(D^B))+P[1]+4129170786&4294967295,I=D+(N<<5&4294967295|N>>>27),N=H+(D^B&(I^D))+P[6]+3225465664&4294967295,H=I+(N<<9&4294967295|N>>>23),N=B+(I^D&(H^I))+P[11]+643717713&4294967295,B=H+(N<<14&4294967295|N>>>18),N=D+(H^I&(B^H))+P[0]+3921069994&4294967295,D=B+(N<<20&4294967295|N>>>12),N=I+(B^H&(D^B))+P[5]+3593408605&4294967295,I=D+(N<<5&4294967295|N>>>27),N=H+(D^B&(I^D))+P[10]+38016083&4294967295,H=I+(N<<9&4294967295|N>>>23),N=B+(I^D&(H^I))+P[15]+3634488961&4294967295,B=H+(N<<14&4294967295|N>>>18),N=D+(H^I&(B^H))+P[4]+3889429448&4294967295,D=B+(N<<20&4294967295|N>>>12),N=I+(B^H&(D^B))+P[9]+568446438&4294967295,I=D+(N<<5&4294967295|N>>>27),N=H+(D^B&(I^D))+P[14]+3275163606&4294967295,H=I+(N<<9&4294967295|N>>>23),N=B+(I^D&(H^I))+P[3]+4107603335&4294967295,B=H+(N<<14&4294967295|N>>>18),N=D+(H^I&(B^H))+P[8]+1163531501&4294967295,D=B+(N<<20&4294967295|N>>>12),N=I+(B^H&(D^B))+P[13]+2850285829&4294967295,I=D+(N<<5&4294967295|N>>>27),N=H+(D^B&(I^D))+P[2]+4243563512&4294967295,H=I+(N<<9&4294967295|N>>>23),N=B+(I^D&(H^I))+P[7]+1735328473&4294967295,B=H+(N<<14&4294967295|N>>>18),N=D+(H^I&(B^H))+P[12]+2368359562&4294967295,D=B+(N<<20&4294967295|N>>>12),N=I+(D^B^H)+P[5]+4294588738&4294967295,I=D+(N<<4&4294967295|N>>>28),N=H+(I^D^B)+P[8]+2272392833&4294967295,H=I+(N<<11&4294967295|N>>>21),N=B+(H^I^D)+P[11]+1839030562&4294967295,B=H+(N<<16&4294967295|N>>>16),N=D+(B^H^I)+P[14]+4259657740&4294967295,D=B+(N<<23&4294967295|N>>>9),N=I+(D^B^H)+P[1]+2763975236&4294967295,I=D+(N<<4&4294967295|N>>>28),N=H+(I^D^B)+P[4]+1272893353&4294967295,H=I+(N<<11&4294967295|N>>>21),N=B+(H^I^D)+P[7]+4139469664&4294967295,B=H+(N<<16&4294967295|N>>>16),N=D+(B^H^I)+P[10]+3200236656&4294967295,D=B+(N<<23&4294967295|N>>>9),N=I+(D^B^H)+P[13]+681279174&4294967295,I=D+(N<<4&4294967295|N>>>28),N=H+(I^D^B)+P[0]+3936430074&4294967295,H=I+(N<<11&4294967295|N>>>21),N=B+(H^I^D)+P[3]+3572445317&4294967295,B=H+(N<<16&4294967295|N>>>16),N=D+(B^H^I)+P[6]+76029189&4294967295,D=B+(N<<23&4294967295|N>>>9),N=I+(D^B^H)+P[9]+3654602809&4294967295,I=D+(N<<4&4294967295|N>>>28),N=H+(I^D^B)+P[12]+3873151461&4294967295,H=I+(N<<11&4294967295|N>>>21),N=B+(H^I^D)+P[15]+530742520&4294967295,B=H+(N<<16&4294967295|N>>>16),N=D+(B^H^I)+P[2]+3299628645&4294967295,D=B+(N<<23&4294967295|N>>>9),N=I+(B^(D|~H))+P[0]+4096336452&4294967295,I=D+(N<<6&4294967295|N>>>26),N=H+(D^(I|~B))+P[7]+1126891415&4294967295,H=I+(N<<10&4294967295|N>>>22),N=B+(I^(H|~D))+P[14]+2878612391&4294967295,B=H+(N<<15&4294967295|N>>>17),N=D+(H^(B|~I))+P[5]+4237533241&4294967295,D=B+(N<<21&4294967295|N>>>11),N=I+(B^(D|~H))+P[12]+1700485571&4294967295,I=D+(N<<6&4294967295|N>>>26),N=H+(D^(I|~B))+P[3]+2399980690&4294967295,H=I+(N<<10&4294967295|N>>>22),N=B+(I^(H|~D))+P[10]+4293915773&4294967295,B=H+(N<<15&4294967295|N>>>17),N=D+(H^(B|~I))+P[1]+2240044497&4294967295,D=B+(N<<21&4294967295|N>>>11),N=I+(B^(D|~H))+P[8]+1873313359&4294967295,I=D+(N<<6&4294967295|N>>>26),N=H+(D^(I|~B))+P[15]+4264355552&4294967295,H=I+(N<<10&4294967295|N>>>22),N=B+(I^(H|~D))+P[6]+2734768916&4294967295,B=H+(N<<15&4294967295|N>>>17),N=D+(H^(B|~I))+P[13]+1309151649&4294967295,D=B+(N<<21&4294967295|N>>>11),N=I+(B^(D|~H))+P[4]+4149444226&4294967295,I=D+(N<<6&4294967295|N>>>26),N=H+(D^(I|~B))+P[11]+3174756917&4294967295,H=I+(N<<10&4294967295|N>>>22),N=B+(I^(H|~D))+P[2]+718787259&4294967295,B=H+(N<<15&4294967295|N>>>17),N=D+(H^(B|~I))+P[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(B+(N<<21&4294967295|N>>>11))&4294967295,O.g[2]=O.g[2]+B&4294967295,O.g[3]=O.g[3]+H&4294967295}s.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var D=I-this.blockSize,P=this.B,B=this.h,H=0;H<I;){if(B==0)for(;H<=D;)a(this,O,H),H+=this.blockSize;if(typeof O=="string"){for(;H<I;)if(P[B++]=O.charCodeAt(H++),B==this.blockSize){a(this,P),B=0;break}}else for(;H<I;)if(P[B++]=O[H++],B==this.blockSize){a(this,P),B=0;break}}this.h=B,this.o+=I},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var D=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=D&255,D/=256;for(this.u(O),O=Array(16),I=D=0;4>I;++I)for(var P=0;32>P;P+=8)O[D++]=this.g[I]>>>P&255;return O};function l(O,I){var D=d;return Object.prototype.hasOwnProperty.call(D,O)?D[O]:D[O]=I(O)}function h(O,I){this.h=I;for(var D=[],P=!0,B=O.length-1;0<=B;B--){var H=O[B]|0;P&&H==I||(D[B]=H,P=!1)}this.g=D}var d={};function p(O){return-128<=O&&128>O?l(O,function(I){return new h([I|0],0>I?-1:0)}):new h([O|0],0>O?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return b;if(0>O)return V(g(-O));for(var I=[],D=1,P=0;O>=D;P++)I[P]=O/D|0,D*=4294967296;return new h(I,0)}function _(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return V(_(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=g(Math.pow(I,8)),P=b,B=0;B<O.length;B+=8){var H=Math.min(8,O.length-B),N=parseInt(O.substring(B,B+H),I);8>H?(H=g(Math.pow(I,H)),P=P.j(H).add(g(N))):(P=P.j(D),P=P.add(g(N)))}return P}var b=p(0),w=p(1),C=p(16777216);n=h.prototype,n.m=function(){if(L(this))return-V(this).m();for(var O=0,I=1,D=0;D<this.g.length;D++){var P=this.i(D);O+=(0<=P?P:4294967296+P)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(R(this))return"0";if(L(this))return"-"+V(this).toString(O);for(var I=g(Math.pow(O,6)),D=this,P="";;){var B=se(D,I).g;D=z(D,B.j(I));var H=((0<D.g.length?D.g[0]:D.h)>>>0).toString(O);if(D=B,R(D))return H+P;for(;6>H.length;)H="0"+H;P=H+P}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function R(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function L(O){return O.h==-1}n.l=function(O){return O=z(this,O),L(O)?-1:R(O)?0:1};function V(O){for(var I=O.g.length,D=[],P=0;P<I;P++)D[P]=~O.g[P];return new h(D,~O.h).add(w)}n.abs=function(){return L(this)?V(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),D=[],P=0,B=0;B<=I;B++){var H=P+(this.i(B)&65535)+(O.i(B)&65535),N=(H>>>16)+(this.i(B)>>>16)+(O.i(B)>>>16);P=N>>>16,H&=65535,N&=65535,D[B]=N<<16|H}return new h(D,D[D.length-1]&-2147483648?-1:0)};function z(O,I){return O.add(V(I))}n.j=function(O){if(R(this)||R(O))return b;if(L(this))return L(O)?V(this).j(V(O)):V(V(this).j(O));if(L(O))return V(this.j(V(O)));if(0>this.l(C)&&0>O.l(C))return g(this.m()*O.m());for(var I=this.g.length+O.g.length,D=[],P=0;P<2*I;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(var B=0;B<O.g.length;B++){var H=this.i(P)>>>16,N=this.i(P)&65535,Ie=O.i(B)>>>16,Me=O.i(B)&65535;D[2*P+2*B]+=N*Me,U(D,2*P+2*B),D[2*P+2*B+1]+=H*Me,U(D,2*P+2*B+1),D[2*P+2*B+1]+=N*Ie,U(D,2*P+2*B+1),D[2*P+2*B+2]+=H*Ie,U(D,2*P+2*B+2)}for(P=0;P<I;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=I;P<2*I;P++)D[P]=0;return new h(D,0)};function U(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function q(O,I){this.g=O,this.h=I}function se(O,I){if(R(I))throw Error("division by zero");if(R(O))return new q(b,b);if(L(O))return I=se(V(O),I),new q(V(I.g),V(I.h));if(L(I))return I=se(O,V(I)),new q(V(I.g),I.h);if(30<O.g.length){if(L(O)||L(I))throw Error("slowDivide_ only works with positive integers.");for(var D=w,P=I;0>=P.l(O);)D=ae(D),P=ae(P);var B=ie(D,1),H=ie(P,1);for(P=ie(P,2),D=ie(D,2);!R(P);){var N=H.add(P);0>=N.l(O)&&(B=B.add(D),H=N),P=ie(P,1),D=ie(D,1)}return I=z(O,B.j(I)),new q(B,I)}for(B=b;0<=O.l(I);){for(D=Math.max(1,Math.floor(O.m()/I.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),H=g(D),N=H.j(I);L(N)||0<N.l(O);)D-=P,H=g(D),N=H.j(I);R(H)&&(H=w),B=B.add(H),O=z(O,N)}return new q(B,O)}n.A=function(O){return se(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),D=[],P=0;P<I;P++)D[P]=this.i(P)&O.i(P);return new h(D,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),D=[],P=0;P<I;P++)D[P]=this.i(P)|O.i(P);return new h(D,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),D=[],P=0;P<I;P++)D[P]=this.i(P)^O.i(P);return new h(D,this.h^O.h)};function ae(O){for(var I=O.g.length+1,D=[],P=0;P<I;P++)D[P]=O.i(P)<<1|O.i(P-1)>>>31;return new h(D,O.h)}function ie(O,I){var D=I>>5;I%=32;for(var P=O.g.length-D,B=[],H=0;H<P;H++)B[H]=0<I?O.i(H+D)>>>I|O.i(H+D+1)<<32-I:O.i(H+D);return new h(B,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Fb=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=_,ns=h}).apply(typeof lT<"u"?lT:typeof self<"u"?self:typeof window<"u"?window:{});var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hb,nu,Gb,Ch,wp,Kb,$b,Qb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof mh=="object"&&mh];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function a(c,y){if(y)e:{var v=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var G=c[S];if(!(G in v))break e;v=v[G]}c=c[c.length-1],S=v[c],y=y(S),y!=S&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function l(c,y){c instanceof String&&(c+="");var v=0,S=!1,G={next:function(){if(!S&&v<c.length){var X=v++;return{value:y(X,c[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}a("Array.prototype.values",function(c){return c||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function _(c,y,v){return c.call.apply(c.bind,arguments)}function b(c,y,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,S),c.apply(y,G)}}return function(){return c.apply(y,arguments)}}function w(c,y,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,w.apply(null,arguments)}function C(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function R(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,G,X){for(var ue=Array(arguments.length-2),je=2;je<arguments.length;je++)ue[je-2]=arguments[je];return y.prototype[G].apply(S,ue)}}function L(c){const y=c.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=c[S];return v}return[]}function V(c,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(p(S)){const G=c.length||0,X=S.length||0;c.length=G+X;for(let ue=0;ue<X;ue++)c[G+ue]=S[ue]}else c.push(S)}}class z{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(c){return/^[\s\xa0]*$/.test(c)}function q(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function se(c){return se[" "](c),c}se[" "]=function(){};var ae=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function ie(c,y,v){for(const S in c)y.call(v,c[S],S,c)}function O(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function I(c){const y={};for(const v in c)y[v]=c[v];return y}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,y){let v,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(v in S)c[v]=S[v];for(let X=0;X<D.length;X++)v=D[X],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function B(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function H(c){d.setTimeout(()=>{throw c},0)}function N(){var c=Oe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,v){const S=Me.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Me=new z(()=>new W,c=>c.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,me=!1,Oe=new Ie,M=()=>{const c=d.Promise.resolve(void 0);oe=()=>{c.then(re)}};var re=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(v){H(v)}var y=Me;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}me=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return c}();function De(c,y){if(le.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ae){e:{try{se(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&De.aa.h.call(this)}}R(De,le);var we={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),nt=0;function lr(c,y,v,S,G){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=G,this.key=++nt,this.da=this.fa=!1}function vi(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function kr(c){this.src=c,this.g={},this.h=0}kr.prototype.add=function(c,y,v,S,G){var X=c.toString();c=this.g[X],c||(c=this.g[X]=[],this.h++);var ue=Ts(c,y,S,G);return-1<ue?(y=c[ue],v||(y.fa=!1)):(y=new lr(y,this.src,X,!!S,G),y.fa=v,c.push(y)),y};function Es(c,y){var v=y.type;if(v in c.g){var S=c.g[v],G=Array.prototype.indexOf.call(S,y,void 0),X;(X=0<=G)&&Array.prototype.splice.call(S,G,1),X&&(vi(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ts(c,y,v,S){for(var G=0;G<c.length;++G){var X=c[G];if(!X.da&&X.listener==y&&X.capture==!!v&&X.ha==S)return G}return-1}var bs="closure_lm_"+(1e6*Math.random()|0),Bo={};function qu(c,y,v,S,G){if(Array.isArray(y)){for(var X=0;X<y.length;X++)qu(c,y[X],v,S,G);return null}return v=Fu(v),c&&c[kt]?c.K(y,v,g(S)?!!S.capture:!1,G):xn(c,y,v,!1,S,G)}function xn(c,y,v,S,G,X){if(!y)throw Error("Invalid event type");var ue=g(G)?!!G.capture:!!G,je=ba(c);if(je||(c[bs]=je=new kr(c)),v=je.add(y,v,S,ue,X),v.proxy)return v;if(S=qf(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)ye||(G=ue),G===void 0&&(G=!1),c.addEventListener(y.toString(),S,G);else if(c.attachEvent)c.attachEvent(ws(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function qf(){function c(v){return y.call(c.src,c.listener,v)}const y=Ff;return c}function qo(c,y,v,S,G){if(Array.isArray(y))for(var X=0;X<y.length;X++)qo(c,y[X],v,S,G);else S=g(S)?!!S.capture:!!S,v=Fu(v),c&&c[kt]?(c=c.i,y=String(y).toString(),y in c.g&&(X=c.g[y],v=Ts(X,v,S,G),-1<v&&(vi(X[v]),Array.prototype.splice.call(X,v,1),X.length==0&&(delete c.g[y],c.h--)))):c&&(c=ba(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Ts(y,v,S,G)),(v=-1<c?y[c]:null)&&Ta(v))}function Ta(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[kt])Es(y.i,c);else{var v=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(v,S,c.capture):y.detachEvent?y.detachEvent(ws(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=ba(y))?(Es(v,c),v.h==0&&(v.src=null,y[bs]=null)):vi(c)}}}function ws(c){return c in Bo?Bo[c]:Bo[c]="on"+c}function Ff(c,y){if(c.da)c=!0;else{y=new De(y,this);var v=c.listener,S=c.ha||c.src;c.fa&&Ta(c),c=v.call(S,y)}return c}function ba(c){return c=c[bs],c instanceof kr?c:null}var Fo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fu(c){return typeof c=="function"?c:(c[Fo]||(c[Fo]=function(y){return c.handleEvent(y)}),c[Fo])}function ht(){ce.call(this),this.i=new kr(this),this.M=this,this.F=null}R(ht,ce),ht.prototype[kt]=!0,ht.prototype.removeEventListener=function(c,y,v,S){qo(this,c,y,v,S)};function $e(c,y){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new le(y,c);else if(y instanceof le)y.target=y.target||c;else{var G=y;y=new le(S,c),P(y,G)}if(G=!0,v)for(var X=v.length-1;0<=X;X--){var ue=y.g=v[X];G=vn(ue,S,!0,y)&&G}if(ue=y.g=c,G=vn(ue,S,!0,y)&&G,G=vn(ue,S,!1,y)&&G,v)for(X=0;X<v.length;X++)ue=y.g=v[X],G=vn(ue,S,!1,y)&&G}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],S=0;S<v.length;S++)vi(v[S]);delete c.g[y],c.h--}}this.F=null},ht.prototype.K=function(c,y,v,S){return this.i.add(String(c),y,!1,v,S)},ht.prototype.L=function(c,y,v,S){return this.i.add(String(c),y,!0,v,S)};function vn(c,y,v,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,X=0;X<y.length;++X){var ue=y[X];if(ue&&!ue.da&&ue.capture==v){var je=ue.listener,Ct=ue.ha||ue.src;ue.fa&&Es(c.i,ue),G=je.call(Ct,S)!==!1&&G}}return G&&!S.defaultPrevented}function Yt(c,y,v){if(typeof c=="function")v&&(c=w(c,v));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(c,y||0)}function Hu(c){c.g=Yt(()=>{c.g=null,c.i&&(c.i=!1,Hu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Hf extends ce{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Hu(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(c){ce.call(this),this.h=c,this.g={}}R(As,ce);var Ss=[];function Rs(c){ie(c.g,function(y,v){this.g.hasOwnProperty(v)&&Ta(y)},c),c.g={}}As.prototype.N=function(){As.aa.N.call(this),Rs(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=d.JSON.stringify,wa=d.JSON.parse,Is=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Ho(){}Ho.prototype.h=null;function Go(c){return c.h||(c.h=c.i())}function Ko(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vr(){le.call(this,"d")}R(Vr,le);function $o(){le.call(this,"c")}R($o,le);var ur={},Qo=null;function Ei(){return Qo=Qo||new ht}ur.La="serverreachability";function Aa(c){le.call(this,ur.La,c)}R(Aa,le);function Ti(c){const y=Ei();$e(y,new Aa(y))}ur.STAT_EVENT="statevent";function Gu(c,y){le.call(this,ur.STAT_EVENT,c),this.stat=y}R(Gu,le);function at(c){const y=Ei();$e(y,new Gu(y,c))}ur.Ma="timingevent";function It(c,y){le.call(this,ur.Ma,c),this.size=y}R(It,le);function Et(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},y)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function Yo(c,y,v,S,G,X){c.info(function(){if(c.g)if(X)for(var ue="",je=X.split("&"),Ct=0;Ct<je.length;Ct++){var ze=je[Ct].split("=");if(1<ze.length){var Vt=ze[0];ze=ze[1];var Nt=Vt.split("_");ue=2<=Nt.length&&Nt[1]=="type"?ue+(Vt+"="+ze+"&"):ue+(Vt+"=redacted&")}}else ue=null;else ue=X;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+y+`
`+v+`
`+ue})}function Gf(c,y,v,S,G,X,ue){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+y+`
`+v+`
`+X+" "+ue})}function bi(c,y,v,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Cs(c,v)+(S?" "+S:"")})}function Ku(c,y){c.info(function(){return"TIMEOUT: "+y})}On.prototype.info=function(){};function Cs(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var G=S[1];if(Array.isArray(G)&&!(1>G.length)){var X=G[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ue=1;ue<G.length;ue++)G[ue]=""}}}}return Wn(v)}catch{return y}}var wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ur={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cr;function hr(){}R(hr,Ho),hr.prototype.g=function(){return new XMLHttpRequest},hr.prototype.i=function(){return{}},cr=new hr;function sn(c,y,v,S){this.j=c,this.i=y,this.l=v,this.R=S||1,this.U=new As(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}var Xo={},Sa={};function Zn(c,y,v){c.L=1,c.v=Ps(En(y)),c.m=v,c.P=!0,Lr(c,null)}function Lr(c,y){c.F=Date.now(),Ns(c),c.A=En(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),nl(v.i,"t",S),c.C=0,v=c.j.J,c.h=new gt,c.g=lc(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Hf(w(c.Y,c,c.g),c.O)),y=c.U,v=c.g,S=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(Ss[0]=G.toString()),G=Ss);for(var X=0;X<G.length;X++){var ue=qu(v,G[X],S||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Ti(),Yo(c.i,c.u,c.A,c.l,c.R,c.m)}sn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Vn(c)==3?y.j():this.Y(c)},sn.prototype.Y=function(c){try{if(c==this.g)e:{const Nt=Vn(this.g);var y=this.g.Ba();const Kr=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||ec(this.g)))){this.J||Nt!=4||y==7||(y==8||0>=Kr?Ti(3):Ti(2)),Ai(this);var v=this.g.Z();this.X=v;t:if($u(this)){var S=ec(this.g);c="";var G=S.length,X=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bt(this),fr(this);var ue="";break t}this.h.i=new d.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!(X&&y==G-1)});S.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,Gf(this.i,this.u,this.A,this.l,this.R,Nt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Ct=this.g;if((je=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(je)){var ze=je;break t}}ze=null}if(v=ze)bi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ds(this,v);else{this.o=!1,this.s=3,at(12),Bt(this),fr(this);break e}}if(this.P){v=!0;let qt;for(;!this.J&&this.C<ue.length;)if(qt=Qu(this,ue),qt==Sa){Nt==4&&(this.s=4,at(14),v=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==Xo){this.s=4,at(15),bi(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else bi(this.i,this.l,qt,null),Ds(this,qt);if($u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ue.length!=0||this.h.h||(this.s=1,at(16),v=!1),this.o=this.o&&v,!v)bi(this.i,this.l,ue,"[Invalid Chunked Response]"),Bt(this),fr(this);else if(0<ue.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Bs(Vt),Vt.M=!0,at(11))}}else bi(this.i,this.l,ue,null),Ds(this,ue);Nt==4&&Bt(this),this.o&&!this.J&&(Nt==4?sc(this.j,this):(this.o=!1,Ns(this)))}else Xf(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Bt(this),fr(this)}}}catch{}finally{}};function $u(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Qu(c,y){var v=c.C,S=y.indexOf(`
`,v);return S==-1?Sa:(v=Number(y.substring(v,S)),isNaN(v)?Xo:(S+=1,S+v>y.length?Sa:(y=y.slice(S,S+v),c.C=S+v,y)))}sn.prototype.cancel=function(){this.J=!0,Bt(this)};function Ns(c){c.S=Date.now()+c.I,Yu(c,c.I)}function Yu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Et(w(c.ba,c),y)}function Ai(c){c.B&&(d.clearTimeout(c.B),c.B=null)}sn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ku(this.i,this.A),this.L!=2&&(Ti(),at(17)),Bt(this),this.s=2,fr(this)):Yu(this,this.S-c)};function fr(c){c.j.G==0||c.J||sc(c.j,c)}function Bt(c){Ai(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Rs(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Ds(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Wo(v.h,c))){if(!c.K&&Wo(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ua(v),Ma(v);else break e;ol(v),at(18)}}else v.za=G[1],0<v.za-v.T&&37500>G[2]&&v.F&&v.v==0&&!v.C&&(v.C=Et(w(v.Za,v),6e3));if(1>=Ia(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Gr(v,11)}else if((c.K||v.g==c)&&Ua(v),!U(y))for(G=v.Da.g.parse(y),y=0;y<G.length;y++){let ze=G[y];if(v.T=ze[0],ze=ze[1],v.G==2)if(ze[0]=="c"){v.K=ze[1],v.ia=ze[2];const Vt=ze[3];Vt!=null&&(v.la=Vt,v.j.info("VER="+v.la));const Nt=ze[4];Nt!=null&&(v.Aa=Nt,v.j.info("SVER="+v.Aa));const Kr=ze[5];Kr!=null&&typeof Kr=="number"&&0<Kr&&(S=1.5*Kr,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const qt=c.g;if(qt){const vr=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vr){var X=S.h;X.g||vr.indexOf("spdy")==-1&&vr.indexOf("quic")==-1&&vr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ca(X,X.h),X.h=null))}if(S.D){const ul=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(S.ya=ul,We(S.I,S.D,ul))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ue=c;if(S.qa=oc(S,S.J?S.ia:null,S.W),ue.K){an(S.h,ue);var je=ue,Ct=S.L;Ct&&(je.I=Ct),je.B&&(Ai(je),Ns(je)),S.g=ue}else rc(S);0<v.i.length&&Va(v)}else ze[0]!="stop"&&ze[0]!="close"||Gr(v,7);else v.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Gr(v,7):sl(v):ze[0]!="noop"&&v.l&&v.l.ta(ze),v.v=0)}}Ti(4)}catch{}}var Xu=class{constructor(c,y){this.g=c,this.map=y}};function jr(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ra(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ia(c){return c.h?1:c.g?c.g.size:0}function Wo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ca(c,y){c.g?c.g.add(y):c.h=y}function an(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}jr.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return L(c.i)}function Kf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,S=0;S<v;S++)y.push(c[S]);return y}y=[],v=0;for(S in c)y[v++]=c[S];return y}function Na(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const S in c)y[v++]=S;return y}}}function Jo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Na(c),S=Kf(c),G=S.length,X=0;X<G;X++)y.call(void 0,S[X],v&&v[X],c)}var xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $f(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),G=null;if(0<=S){var X=c[v].substring(0,S);G=c[v].substring(S+1)}else X=c[v];y(X,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Tt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Tt){this.h=c.h,Os(this,c.j),this.o=c.o,this.g=c.g,Si(this,c.s),this.l=c.l;var y=c.i,v=new Br;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),zr(this,v),this.m=c.m}else c&&(y=String(c).match(xs))?(this.h=!1,Os(this,y[1]||"",!0),this.o=Pn(y[2]||""),this.g=Pn(y[3]||"",!0),Si(this,y[4]),this.l=Pn(y[5]||"",!0),zr(this,y[6]||"",!0),this.m=Pn(y[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}Tt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(ks(y,el,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ks(y,el,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ks(v,v.charAt(0)=="/"?Qf:tl,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ks(v,Da)),c.join("")};function En(c){return new Tt(c)}function Os(c,y,v){c.j=v?Pn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Si(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function zr(c,y,v){y instanceof Br?(c.i=y,Zu(c.i,c.h)):(v||(y=ks(y,Yf)),c.i=new Br(y,c.h))}function We(c,y,v){c.i.set(y,v)}function Ps(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Pn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ks(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Wu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Wu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var el=/[#\/\?@]/g,tl=/[#\?:]/g,Qf=/[#\?]/g,Yf=/[#\?@]/g,Da=/#/g;function Br(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function kn(c){c.g||(c.g=new Map,c.h=0,c.i&&$f(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=Br.prototype,n.add=function(c,y){kn(this),this.i=null,c=dr(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function qr(c,y){kn(c),y=dr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Fr(c,y){return kn(c),y=dr(c,y),c.g.has(y)}n.forEach=function(c,y){kn(this),this.g.forEach(function(v,S){v.forEach(function(G){c.call(y,G,S,this)},this)},this)},n.na=function(){kn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const G=c[S];for(let X=0;X<G.length;X++)v.push(y[S])}return v},n.V=function(c){kn(this);let y=[];if(typeof c=="string")Fr(this,c)&&(y=y.concat(this.g.get(dr(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},n.set=function(c,y){return kn(this),this.i=null,c=dr(this,c),Fr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},n.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function nl(c,y,v){qr(c,y),0<v.length&&(c.i=null,c.g.set(dr(c,y),L(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const X=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var G=X;ue[S]!==""&&(G+="="+encodeURIComponent(String(ue[S]))),c.push(G)}}return this.i=c.join("&")};function dr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Zu(c,y){y&&!c.j&&(kn(c),c.i=null,c.g.forEach(function(v,S){var G=S.toLowerCase();S!=G&&(qr(this,S),nl(this,G,v))},c)),c.j=y}function Ms(c,y){const v=new On;if(d.Image){const S=new Image;S.onload=C(Mn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=C(Mn,v,"TestLoadImage: error",!1,y,S),S.onabort=C(Mn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=C(Mn,v,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function Jn(c,y){const v=new On,S=new AbortController,G=setTimeout(()=>{S.abort(),Mn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then(X=>{clearTimeout(G),X.ok?Mn(v,"TestPingServer: ok",!0,y):Mn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),Mn(v,"TestPingServer: error",!1,y)})}function Mn(c,y,v,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(v)}catch{}}function Vs(){this.g=new Is}function mr(c,y,v){const S=v||"";try{Jo(c,function(G,X){let ue=G;g(G)&&(ue=Wn(G)),y.push(S+X+"="+encodeURIComponent(ue))})}catch(G){throw y.push(S+"type="+encodeURIComponent("_badmap")),G}}function Ri(c){this.l=c.Ub||null,this.j=c.eb||!1}R(Ri,Ho),Ri.prototype.g=function(){return new Hr(this.l,this.j)},Ri.prototype.i=function(c){return function(){return c}}({});function Hr(c,y){ht.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Hr,ht),n=Hr.prototype,n.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,gr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?pr(this):gr(this),this.readyState==3&&rl(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,pr(this))},n.Qa=function(c){this.g&&(this.response=c,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,gr(c)}n.setRequestHeader=function(c,y){this.u.append(c,y)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function gr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function il(c){let y="";return ie(c,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Mt(c,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=il(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):We(c,y,v))}function Ge(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ge,ht);var xa=/^https?$/i,Us=["POST","PUT"];n=Ge.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cr.g(),this.v=this.o?Go(this.o):Go(cr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(X){Ju(this,X);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)v.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())v.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),G=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Us,y,void 0))||S||G||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ue]of v)this.g.setRequestHeader(X,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ls(this),this.u=!0,this.g.send(c),this.u=!1}catch(X){Ju(this,X)}};function Ju(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Oa(c),yr(c)}function Oa(c){c.A||(c.A=!0,$e(c,"complete"),$e(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$e(this,"complete"),$e(this,"abort"),yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yr(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Pa(this):this.bb())},n.bb=function(){Pa(this)};function Pa(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)Yt(c.Ea,0,c);else if($e(c,"readystatechange"),Vn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=ue===0){var G=String(c.D).match(xs)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),S=!xa.test(G?G.toLowerCase():"")}v=S}if(v)$e(c,"complete"),$e(c,"success");else{c.m=6;try{var X=2<Vn(c)?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.Z()+"]",Oa(c)}}finally{yr(c)}}}}function yr(c,y){if(c.g){Ls(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||$e(c,"ready");try{v.onreadystatechange=S}catch{}}}function Ls(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),wa(y)}};function ec(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xf(c){const y={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(U(c[S]))continue;var v=B(c[S]);const G=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=y[G]||[];y[G]=X,X.push(v)}O(y,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function ka(c){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=js("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=js("baseRetryDelayMs",5e3,c),this.cb=js("retryDelaySeedMs",1e4,c),this.Wa=js("forwardChannelMaxRetries",2,c),this.wa=js("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new jr(c&&c.concurrentRequestLimit),this.Da=new Vs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ka.prototype,n.la=8,n.G=1,n.connect=function(c,y,v,S){at(0),this.W=c,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=oc(this,null,this.W),Va(this)};function sl(c){if(tc(c),c.G==3){var y=c.U++,v=En(c.I);if(We(v,"SID",c.K),We(v,"RID",y),We(v,"TYPE","terminate"),zs(c,v),y=new sn(c,c.j,y),y.L=2,y.v=Ps(En(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=lc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ns(y)}ac(c)}function Ma(c){c.g&&(Bs(c),c.g.cancel(),c.g=null)}function tc(c){Ma(c),c.u&&(d.clearTimeout(c.u),c.u=null),Ua(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Va(c){if(!Ra(c.h)&&!c.s){c.s=!0;var y=c.Ga;oe||M(),me||(oe(),me=!0),Oe.add(y,c),c.B=0}}function Wf(c,y){return Ia(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Et(w(c.Ga,c,y),ll(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new sn(this,this.j,c);let X=this.o;if(this.S&&(X?(X=I(X),P(X,this.S)):X=this.S),this.m!==null||this.O||(G.H=X,X=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=nc(this,G,y),v=En(this.I),We(v,"RID",c),We(v,"CVER",22),this.D&&We(v,"X-HTTP-Session-Id",this.D),zs(this,v),X&&(this.O?y="headers="+encodeURIComponent(String(il(X)))+"&"+y:this.m&&Mt(v,this.m,X)),Ca(this.h,G),this.Ua&&We(v,"TYPE","init"),this.P?(We(v,"$req",y),We(v,"SID","null"),G.T=!0,Zn(G,v,null)):Zn(G,v,y),this.G=2}}else this.G==3&&(c?al(this,c):this.i.length==0||Ra(this.h)||al(this))};function al(c,y){var v;y?v=y.l:v=c.U++;const S=En(c.I);We(S,"SID",c.K),We(S,"RID",v),We(S,"AID",c.T),zs(c,S),c.m&&c.o&&Mt(S,c.m,c.o),v=new sn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=nc(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ca(c.h,v),Zn(v,S,y)}function zs(c,y){c.H&&ie(c.H,function(v,S){We(y,S,v)}),c.l&&Jo({},function(v,S){We(y,S,v)})}function nc(c,y,v){v=Math.min(c.i.length,v);var S=c.l?w(c.l.Na,c.l,c):null;e:{var G=c.i;let X=-1;for(;;){const ue=["count="+v];X==-1?0<v?(X=G[0].g,ue.push("ofs="+X)):X=0:ue.push("ofs="+X);let je=!0;for(let Ct=0;Ct<v;Ct++){let ze=G[Ct].g;const Vt=G[Ct].map;if(ze-=X,0>ze)X=Math.max(0,G[Ct].g-100),je=!1;else try{mr(Vt,ue,"req"+ze+"_")}catch{S&&S(Vt)}}if(je){S=ue.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,S}function rc(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;oe||M(),me||(oe(),me=!0),Oe.add(y,c),c.v=0}}function ol(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Et(w(c.Fa,c),ll(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,ic(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Et(w(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Ma(this),ic(this))};function Bs(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function ic(c){c.g=new sn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=En(c.qa);We(y,"RID","rpc"),We(y,"SID",c.K),We(y,"AID",c.T),We(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(y,"TO",c.ja),We(y,"TYPE","xmlhttp"),zs(c,y),c.m&&c.o&&Mt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ps(En(y)),v.m=null,v.P=!0,Lr(v,c)}n.Za=function(){this.C!=null&&(this.C=null,Ma(this),ol(this),at(19))};function Ua(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function sc(c,y){var v=null;if(c.g==y){Ua(c),Bs(c),c.g=null;var S=2}else if(Wo(c.h,y))v=y.D,an(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var G=c.B;S=Ei(),$e(S,new It(S,v)),Va(c)}else rc(c);else if(G=y.s,G==3||G==0&&0<y.X||!(S==1&&Wf(c,y)||S==2&&ol(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),G){case 1:Gr(c,5);break;case 4:Gr(c,10);break;case 3:Gr(c,6);break;default:Gr(c,2)}}}function ll(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function Gr(c,y){if(c.j.info("Error code "+y),y==2){var v=w(c.fb,c),S=c.Xa;const G=!S;S=new Tt(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Os(S,"https"),Ps(S),G?Ms(S.toString(),v):Jn(S.toString(),v)}else at(2);c.G=0,c.l&&c.l.sa(y),ac(c),tc(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ac(c){if(c.G=0,c.ka=[],c.l){const y=Zo(c.h);(y.length!=0||c.i.length!=0)&&(V(c.ka,y),V(c.ka,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.ra()}}function oc(c,y,v){var S=v instanceof Tt?En(v):new Tt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Si(S,S.s);else{var G=d.location;S=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var X=new Tt(null);S&&Os(X,S),y&&(X.g=y),G&&Si(X,G),v&&(X.l=v),S=X}return v=c.D,y=c.ya,v&&y&&We(S,v,y),We(S,"VER",c.la),zs(c,S),S}function lc(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Ge(new Ri({eb:v})):new Ge(c.pa),y.Ha(c.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uc(){}n=uc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function La(){}La.prototype.g=function(c,y){return new on(c,y)};function on(c,y){ht.call(this),this.g=new ka(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!U(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!U(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new _r(this)}R(on,ht),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){sl(this.g)},on.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Wn(c),c=v);y.i.push(new Xu(y.Ya++,c)),y.G==3&&Va(y)},on.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,on.aa.N.call(this)};function cc(c){Vr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}R(cc,Vr);function hc(){$o.call(this),this.status=1}R(hc,$o);function _r(c){this.g=c}R(_r,uc),_r.prototype.ua=function(){$e(this.g,"a")},_r.prototype.ta=function(c){$e(this.g,new cc(c))},_r.prototype.sa=function(c){$e(this.g,new hc)},_r.prototype.ra=function(){$e(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,Qb=function(){return new La},$b=function(){return Ei()},Kb=ur,wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,Ch=wi,Ur.COMPLETE="complete",Gb=Ur,Ko.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,nu=Ko,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,Hb=Ge}).apply(typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{});const uT="@firebase/firestore",cT="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new lf("@firebase/firestore");function mo(){return ha.logLevel}function he(n,...e){if(ha.logLevel<=Ve.DEBUG){const t=e.map(lg);ha.debug(`Firestore (${Vo}): ${n}`,...t)}}function gi(n,...e){if(ha.logLevel<=Ve.ERROR){const t=e.map(lg);ha.error(`Firestore (${Vo}): ${n}`,...t)}}function Ao(n,...e){if(ha.logLevel<=Ve.WARN){const t=e.map(lg);ha.warn(`Firestore (${Vo}): ${n}`,...t)}}function lg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Yb(n,s,t)}function Yb(n,e,t){let s=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw gi(s),new Error(s)}function Ke(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||Yb(e,a,s)}function Se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Xn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ix{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}}class Cx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Nx{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new fi,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},d=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new fi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new Xb(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class Dx{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xx{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Dx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ox{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const s=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=Px(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Ne(n,e){return n<e?-1:n>e?1:0}function Ap(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return Ne(s,a);{const l=Wb(),h=kx(l.encode(fT(n,t)),l.encode(fT(e,t)));return h!==0?h:Ne(s,a)}}t+=s>65535?2:1}return Ne(n.length,e.length)}function fT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function kx(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function So(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=-62135596800,mT=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*mT);return new Ot(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dT)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mT}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-dT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Ot(0,0))}static max(){return new Ae(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="__name__";class Sr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Sr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const s=Sr.isNumericId(e),a=Sr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Sr.extractNumericId(e).compare(Sr.extractNumericId(t)):Ap(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}}class st extends Sr{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new st(t)}static emptyPath(){return new st([])}}const Mx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Sr{construct(e,t,s){return new $t(e,t,s)}static isValidIdentifier(e){return Mx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pT}static keyField(){return new $t([pT])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else d==="`"?(h=!h,a++):d!=="."||h?(s+=d,a++):(l(),a++)}if(l(),h)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(st.fromString(e))}static fromName(e){return new ge(st.fromString(e).popFirst(5))}static empty(){return new ge(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new st(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function Vx(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(s===1e9?new Ot(t+1,0):new Ot(t,s));return new as(a,ge.empty(),e)}function Ux(n){return new as(n.readTime,n.key,_u)}class as{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new as(Ae.min(),ge.empty(),_u)}static max(){return new as(Ae.max(),ge.empty(),_u)}}function Lx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==jx)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,s)=>{t(e)})}static reject(e){return new ne((t,s)=>{s(e)})}static waitFor(e){return new ne((t,s)=>{let a=0,l=0,h=!1;e.forEach(d=>{++a,d.next(()=>{++l,h&&l===a&&t()},p=>s(p))}),h=!0,l===a&&t()})}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next(a=>a?ne.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new ne((s,a)=>{const l=e.length,h=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next(_=>{h[g]=_,++d,d===l&&s(h)},_=>a(_))}})}static doWhile(e,t){return new ne((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function Bx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}pf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=-1;function gf(n){return n==null}function Fh(n){return n===0&&1/n==-1/0}function qx(n){return typeof n=="number"&&Number.isInteger(n)&&!Fh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="";function Fx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gT(e)),e=Hx(n.get(t),e);return gT(e)}function Hx(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Jb:t+="";break;default:t+=l}}return t}function gT(n){return n+Jb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ew(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Kt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ph(this.root,e,this.comparator,!0)}}class ph{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Kt.RED,this.left=a??Kt.EMPTY,this.right=l??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Kt(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Kt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _T(this.data.getIterator())}getIteratorFrom(e){return new _T(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class _T{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new Pt($t.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tw("Invalid base64 string: "+l):l}}(e);return new Qt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let h=0;h<a.length;++h)l+=String.fromCharCode(a[h]);return l}(e);return new Qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const Gx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=Gx.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ls(n){return typeof n=="string"?Qt.fromBase64String(n):Qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="server_timestamp",rw="__type__",iw="__previous_value__",sw="__local_write_time__";function cg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rw])===null||t===void 0?void 0:t.stringValue)===nw}function yf(n){const e=n.mapValue.fields[iw];return cg(e)?yf(e):e}function vu(n){const e=os(n.mapValue.fields[sw].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t,s,a,l,h,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Hh="(default)";class Eu{constructor(e,t){this.projectId=e,this.database=t||Hh}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===Hh}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="__type__",$x="__max__",gh={mapValue:{}},ow="__vector__",Gh="value";function us(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cg(n)?4:Yx(n)?9007199254740991:Qx(n)?10:11:Te(28295,{value:n})}function Or(n,e){if(n===e)return!0;const t=us(n);if(t!==us(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vu(n).isEqual(vu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const h=os(a.timestampValue),d=os(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return ls(a.bytesValue).isEqual(ls(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return vt(a.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(a.geoPointValue.longitude)===vt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return vt(a.integerValue)===vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const h=vt(a.doubleValue),d=vt(l.doubleValue);return h===d?Fh(h)===Fh(d):isNaN(h)&&isNaN(d)}return!1}(n,e);case 9:return So(n.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return function(a,l){const h=a.mapValue.fields||{},d=l.mapValue.fields||{};if(yT(h)!==yT(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!Or(h[p],d[p])))return!1;return!0}(n,e);default:return Te(52216,{left:n})}}function Tu(n,e){return(n.values||[]).find(t=>Or(t,e))!==void 0}function Ro(n,e){if(n===e)return 0;const t=us(n),s=us(e);if(t!==s)return Ne(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return function(l,h){const d=vt(l.integerValue||l.doubleValue),p=vt(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return vT(n.timestampValue,e.timestampValue);case 4:return vT(vu(n),vu(e));case 5:return Ap(n.stringValue,e.stringValue);case 6:return function(l,h){const d=ls(l),p=ls(h);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),p=h.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=Ne(d[g],p[g]);if(_!==0)return _}return Ne(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,h){const d=Ne(vt(l.latitude),vt(h.latitude));return d!==0?d:Ne(vt(l.longitude),vt(h.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ET(n.arrayValue,e.arrayValue);case 10:return function(l,h){var d,p,g,_;const b=l.fields||{},w=h.fields||{},C=(d=b[Gh])===null||d===void 0?void 0:d.arrayValue,R=(p=w[Gh])===null||p===void 0?void 0:p.arrayValue,L=Ne(((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0,((_=R==null?void 0:R.values)===null||_===void 0?void 0:_.length)||0);return L!==0?L:ET(C,R)}(n.mapValue,e.mapValue);case 11:return function(l,h){if(l===gh.mapValue&&h===gh.mapValue)return 0;if(l===gh.mapValue)return 1;if(h===gh.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=h.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let b=0;b<p.length&&b<_.length;++b){const w=Ap(p[b],_[b]);if(w!==0)return w;const C=Ro(d[p[b]],g[_[b]]);if(C!==0)return C}return Ne(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Te(23264,{Pe:t})}}function vT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=os(n),s=os(e),a=Ne(t.seconds,s.seconds);return a!==0?a:Ne(t.nanos,s.nanos)}function ET(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Ro(t[a],s[a]);if(l)return l}return Ne(t.length,s.length)}function Io(n){return Sp(n)}function Sp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=os(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ls(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ge.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Sp(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const h of s)l?l=!1:a+=",",a+=`${h}:${Sp(t.fields[h])}`;return a+"}"}(n.mapValue):Te(61005,{value:n})}function Nh(n){switch(us(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yf(n);return e?16+Nh(e):16;case 5:return 2*n.stringValue.length;case 6:return ls(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+Nh(l),0)}(n.arrayValue);case 10:case 11:return function(s){let a=0;return ys(s.fields,(l,h)=>{a+=l.length+Nh(h)}),a}(n.mapValue);default:throw Te(13486,{value:n})}}function TT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rp(n){return!!n&&"integerValue"in n}function hg(n){return!!n&&"arrayValue"in n}function bT(n){return!!n&&"nullValue"in n}function wT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dh(n){return!!n&&"mapValue"in n}function Qx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[aw])===null||t===void 0?void 0:t.stringValue)===ow}function ou(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ys(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ou(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Yx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$x}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=$t.emptyPath(),s={},a=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=d.popLast()}h?s[d.lastSegment()]=ou(h):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Dh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ys(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new pn(ou(this.value))}}function lw(n){const e=[];return ys(n.fields,(t,s)=>{const a=new $t([t]);if(Dh(s)){const l=lw(s.mapValue).fields;if(l.length===0)e.push(a);else for(const h of l)e.push(a.child(h))}else e.push(a)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,s,a,l,h,d){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new tn(e,0,Ae.min(),Ae.min(),Ae.min(),pn.empty(),0)}static newFoundDocument(e,t,s,a){return new tn(e,1,t,Ae.min(),s,a,0)}static newNoDocument(e,t){return new tn(e,2,t,Ae.min(),Ae.min(),pn.empty(),0)}static newUnknownDocument(e,t){return new tn(e,3,t,Ae.min(),Ae.min(),pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.position=e,this.inclusive=t}}function AT(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],h=n.position[a];if(l.field.isKeyField()?s=ge.comparator(ge.fromName(h.referenceValue),t.key):s=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function ST(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Or(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{}class St extends uw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Zx(e,t,s):t==="array-contains"?new tO(e,s):t==="in"?new nO(e,s):t==="not-in"?new rO(e,s):t==="array-contains-any"?new iO(e,s):new St(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Jx(e,s):new eO(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&us(this.value)===us(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends uw{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ar(e,t)}matches(e){return cw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function cw(n){return n.op==="and"}function hw(n){return Wx(n)&&cw(n)}function Wx(n){for(const e of n.filters)if(e instanceof ar)return!1;return!0}function Ip(n){if(n instanceof St)return n.field.canonicalString()+n.op.toString()+Io(n.value);if(hw(n))return n.filters.map(e=>Ip(e)).join(",");{const e=n.filters.map(t=>Ip(t)).join(",");return`${n.op}(${e})`}}function fw(n,e){return n instanceof St?function(s,a){return a instanceof St&&s.op===a.op&&s.field.isEqual(a.field)&&Or(s.value,a.value)}(n,e):n instanceof ar?function(s,a){return a instanceof ar&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,h,d)=>l&&fw(h,a.filters[d]),!0):!1}(n,e):void Te(19439)}function dw(n){return n instanceof St?function(t){return`${t.field.canonicalString()} ${t.op} ${Io(t.value)}`}(n):n instanceof ar?function(t){return t.op.toString()+" {"+t.getFilters().map(dw).join(" ,")+"}"}(n):"Filter"}class Zx extends St{constructor(e,t,s){super(e,t,s),this.key=ge.fromName(s.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class Jx extends St{constructor(e,t){super(e,"in",t),this.keys=mw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eO extends St{constructor(e,t){super(e,"not-in",t),this.keys=mw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ge.fromName(s.referenceValue))}class tO extends St{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hg(t)&&Tu(t.arrayValue,this.value)}}class nO extends St{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tu(this.value.arrayValue,t)}}class rO extends St{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tu(this.value.arrayValue,t)}}class iO extends St{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Tu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,t=null,s=[],a=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=h,this.endAt=d,this.Ie=null}}function RT(n,e=null,t=[],s=[],a=null,l=null,h=null){return new sO(n,e,t,s,a,l,h)}function fg(n){const e=Se(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Ip(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Io(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Io(s)).join(",")),e.Ie=t}return e.Ie}function dg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ST(n.startAt,e.startAt)&&ST(n.endAt,e.endAt)}function Cp(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t=null,s=[],a=[],l=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function aO(n,e,t,s,a,l,h,d){return new jo(n,e,t,s,a,l,h,d)}function _f(n){return new jo(n)}function IT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pw(n){return n.collectionGroup!==null}function lu(n){const e=Se(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new Pt($t.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new bu(l,s))}),t.has($t.keyField().canonicalString())||e.Ee.push(new bu($t.keyField(),s))}return e.Ee}function Nr(n){const e=Se(n);return e.de||(e.de=oO(e,lu(n))),e.de}function oO(n,e){if(n.limitType==="F")return RT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new bu(a.field,l)});const t=n.endAt?new Kh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Kh(n.startAt.position,n.startAt.inclusive):null;return RT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Np(n,e){const t=n.filters.concat([e]);return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Dp(n,e,t){return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vf(n,e){return dg(Nr(n),Nr(e))&&n.limitType===e.limitType}function gw(n){return`${fg(Nr(n))}|lt:${n.limitType}`}function po(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>dw(a)).join(", ")}]`),gf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>Io(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>Io(a)).join(",")),`Target(${s})`}(Nr(n))}; limitType=${n.limitType})`}function Ef(n,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ge.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(n,e)&&function(s,a){for(const l of lu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(s,a){return!(s.startAt&&!function(h,d,p){const g=AT(h,d,p);return h.inclusive?g<=0:g<0}(s.startAt,lu(s),a)||s.endAt&&!function(h,d,p){const g=AT(h,d,p);return h.inclusive?g>=0:g>0}(s.endAt,lu(s),a))}(n,e)}function lO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yw(n){return(e,t)=>{let s=!1;for(const a of lu(n)){const l=uO(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function uO(n,e,t){const s=n.field.isKeyField()?ge.comparator(e.key,t.key):function(l,h,d){const p=h.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ro(p,g):Te(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=new ct(ge.comparator);function yi(){return cO}const _w=new ct(ge.comparator);function ru(...n){let e=_w;for(const t of n)e=e.insert(t.key,t);return e}function vw(n){let e=_w;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function sa(){return uu()}function Ew(){return uu()}function uu(){return new va(n=>n.toString(),(n,e)=>n.isEqual(e))}const hO=new ct(ge.comparator),fO=new Pt(ge.comparator);function Ue(...n){let e=fO;for(const t of n)e=e.add(t);return e}const dO=new Pt(Ne);function mO(){return dO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function Tw(n){return{integerValue:""+n}}function pO(n,e){return qx(e)?Tw(e):mg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function gO(n,e,t){return n instanceof wu?function(a,l){const h={fields:{[rw]:{stringValue:nw},[sw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&cg(l)&&(l=yf(l)),l&&(h.fields[iw]=l),{mapValue:h}}(t,e):n instanceof Au?ww(n,e):n instanceof Su?Aw(n,e):function(a,l){const h=bw(a,l),d=CT(h)+CT(a.Re);return Rp(h)&&Rp(a.Re)?Tw(d):mg(a.serializer,d)}(n,e)}function yO(n,e,t){return n instanceof Au?ww(n,e):n instanceof Su?Aw(n,e):t}function bw(n,e){return n instanceof $h?function(s){return Rp(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class wu extends Tf{}class Au extends Tf{constructor(e){super(),this.elements=e}}function ww(n,e){const t=Sw(e);for(const s of n.elements)t.some(a=>Or(a,s))||t.push(s);return{arrayValue:{values:t}}}class Su extends Tf{constructor(e){super(),this.elements=e}}function Aw(n,e){let t=Sw(e);for(const s of n.elements)t=t.filter(a=>!Or(a,s));return{arrayValue:{values:t}}}class $h extends Tf{constructor(e,t){super(),this.serializer=e,this.Re=t}}function CT(n){return vt(n.integerValue||n.doubleValue)}function Sw(n){return hg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t){this.field=e,this.transform=t}}function vO(n,e){return n.field.isEqual(e.field)&&function(s,a){return s instanceof Au&&a instanceof Au||s instanceof Su&&a instanceof Su?So(s.elements,a.elements,Or):s instanceof $h&&a instanceof $h?Or(s.Re,a.Re):s instanceof wu&&a instanceof wu}(n.transform,e.transform)}class EO{constructor(e,t){this.version=e,this.transformResults=t}}class Gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bf{}function Rw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pg(n.key,Gn.none()):new Mu(n.key,n.data,Gn.none());{const t=n.data,s=pn.empty();let a=new Pt($t.comparator);for(let l of e.fields)if(!a.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),a=a.add(l)}return new _s(n.key,s,new Cn(a.toArray()),Gn.none())}}function TO(n,e,t){n instanceof Mu?function(a,l,h){const d=a.value.clone(),p=DT(a.fieldTransforms,l,h.transformResults);d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(n,e,t):n instanceof _s?function(a,l,h){if(!xh(a.precondition,l))return void l.convertToUnknownDocument(h.version);const d=DT(a.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(Iw(a)),p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(n,e,t):function(a,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function cu(n,e,t,s){return n instanceof Mu?function(l,h,d,p){if(!xh(l.precondition,h))return d;const g=l.value.clone(),_=xT(l.fieldTransforms,p,h);return g.setAll(_),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(n,e,t,s):n instanceof _s?function(l,h,d,p){if(!xh(l.precondition,h))return d;const g=xT(l.fieldTransforms,p,h),_=h.data;return _.setAll(Iw(l)),_.setAll(g),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(b=>b.field))}(n,e,t,s):function(l,h,d){return xh(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(n,e,t)}function bO(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=bw(s.transform,a||null);l!=null&&(t===null&&(t=pn.empty()),t.set(s.field,l))}return t||null}function NT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&So(s,a,(l,h)=>vO(l,h))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mu extends bf{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _s extends bf{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Iw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function DT(n,e,t){const s=new Map;Ke(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let a=0;a<t.length;a++){const l=n[a],h=l.transform,d=e.data.field(l.field);s.set(l.field,yO(h,d,t[a]))}return s}function xT(n,e,t){const s=new Map;for(const a of n){const l=a.transform,h=t.data.field(a.field);s.set(a.field,gO(l,h,e))}return s}class pg extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wO extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&TO(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=cu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=cu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ew();return this.mutations.forEach(a=>{const l=e.get(a.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(a.key)?null:d;const p=Rw(h,d);p!==null&&s.set(a.key,p),h.isValidDocument()||h.convertToNoDocument(Ae.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(t,s)=>NT(t,s))&&So(this.baseMutations,e.baseMutations,(t,s)=>NT(t,s))}}class gg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Ke(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let a=function(){return hO}();const l=e.mutations;for(let h=0;h<l.length;h++)a=a.insert(l[h].key,s[h].version);return new gg(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,qe;function IO(n){switch(n){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function Cw(n){if(n===void 0)return gi("GRPC error has no .code"),te.UNKNOWN;switch(n){case At.OK:return te.OK;case At.CANCELLED:return te.CANCELLED;case At.UNKNOWN:return te.UNKNOWN;case At.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case At.INTERNAL:return te.INTERNAL;case At.UNAVAILABLE:return te.UNAVAILABLE;case At.UNAUTHENTICATED:return te.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case At.NOT_FOUND:return te.NOT_FOUND;case At.ALREADY_EXISTS:return te.ALREADY_EXISTS;case At.PERMISSION_DENIED:return te.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case At.ABORTED:return te.ABORTED;case At.OUT_OF_RANGE:return te.OUT_OF_RANGE;case At.UNIMPLEMENTED:return te.UNIMPLEMENTED;case At.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:n})}}(qe=At||(At={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new ns([4294967295,4294967295],0);function OT(n){const e=Wb().encode(n),t=new Fb;return t.update(e),new Uint8Array(t.digest())}function PT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ns([t,s],0),new ns([a,l],0)]}class yg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new iu(`Invalid padding: ${t}`);if(s<0)throw new iu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new iu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ns.fromNumber(this.pe)}we(e,t,s){let a=e.add(t.multiply(ns.fromNumber(s)));return a.compare(CO)===1&&(a=new ns([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=OT(e),[s,a]=PT(t);for(let l=0;l<this.hashCount;l++){const h=this.we(s,a,l);if(!this.be(h))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new yg(l,a,t);return s.forEach(d=>h.insert(d)),h}insert(e){if(this.pe===0)return;const t=OT(e),[s,a]=PT(t);for(let l=0;l<this.hashCount;l++){const h=this.we(s,a,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new wf(Ae.min(),a,new ct(Ne),yi(),Ue())}}class Vu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Vu(s,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,s,a){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=a}}class Nw{constructor(e,t){this.targetId=e,this.Ce=t}}class Dw{constructor(e,t,s=Qt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class kT{constructor(){this.Fe=0,this.Me=MT(),this.xe=Qt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ue(),t=Ue(),s=Ue();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Te(38017,{changeType:l})}}),new Vu(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=MT()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ke(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class NO{constructor(e){this.ze=e,this.je=new Map,this.He=yi(),this.Je=yh(),this.Ye=yh(),this.Ze=new ct(Ne)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,s=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(Cp(l))if(s===0){const h=new ge(l.path);this.tt(t,h,tn.newNoDocument(h,Ae.min()))}else Ke(s===1,20013,{expectedCount:s});else{const h=this.ut(t);if(h!==s){const d=this.ct(e),p=d?this.lt(d,e,h):1;if(p!==0){this.st(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let h,d;try{h=ls(s).toUint8Array()}catch(p){if(p instanceof tw)return Ao("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new yg(h,a,l)}catch(p){return Ao(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const h=this.ze.Pt(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,h)=>{const d=this._t(h);if(d){if(l.current&&Cp(d.target)){const p=new ge(d.target.path);this.Et(p).has(h)||this.dt(h,p)||this.tt(h,p,tn.newNoDocument(p,e))}l.Le&&(t.set(h,l.qe()),l.Qe())}});let s=Ue();this.Ye.forEach((l,h)=>{let d=!0;h.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const a=new wf(e,t,this.Ze,this.He,s);return this.He=yi(),this.Je=yh(),this.Ye=yh(),this.Ze=new ct(Ne),a}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new kT,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Pt(Ne),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Pt(Ne),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new kT),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function yh(){return new ct(ge.comparator)}function MT(){return new ct(ge.comparator)}const DO={asc:"ASCENDING",desc:"DESCENDING"},xO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OO={and:"AND",or:"OR"};class PO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xp(n,e){return n.useProto3Json||gf(e)?e:{value:e}}function Qh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kO(n,e){return Qh(n,e.toTimestamp())}function Dr(n){return Ke(!!n,49232),Ae.fromTimestamp(function(t){const s=os(t);return new Ot(s.seconds,s.nanos)}(n))}function _g(n,e){return Op(n,e).canonicalString()}function Op(n,e){const t=function(a){return new st(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Ow(n){const e=st.fromString(n);return Ke(Uw(e),10190,{key:e.toString()}),e}function Pp(n,e){return _g(n.databaseId,e.path)}function rp(n,e){const t=Ow(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(kw(t))}function Pw(n,e){return _g(n.databaseId,e)}function MO(n){const e=Ow(n);return e.length===4?st.emptyPath():kw(e)}function kp(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kw(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function VT(n,e,t){return{name:Pp(n,e),fields:t.value.mapValue.fields}}function VO(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Te(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(Ke(_===void 0||typeof _=="string",58123),Qt.fromBase64String(_||"")):(Ke(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Qt.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(g){const _=g.code===void 0?te.UNKNOWN:Cw(g.code);return new fe(_,g.message||"")}(h);t=new Dw(s,a,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=rp(n,s.document.name),l=Dr(s.document.updateTime),h=s.document.createTime?Dr(s.document.createTime):Ae.min(),d=new pn({mapValue:{fields:s.document.fields}}),p=tn.newFoundDocument(a,l,h,d),g=s.targetIds||[],_=s.removedTargetIds||[];t=new Oh(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=rp(n,s.document),l=s.readTime?Dr(s.readTime):Ae.min(),h=tn.newNoDocument(a,l),d=s.removedTargetIds||[];t=new Oh([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=rp(n,s.document),l=s.removedTargetIds||[];t=new Oh([],l,a,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,h=new RO(a,l),d=s.targetId;t=new Nw(d,h)}}return t}function UO(n,e){let t;if(e instanceof Mu)t={update:VT(n,e.key,e.value)};else if(e instanceof pg)t={delete:Pp(n,e.key)};else if(e instanceof _s)t={update:VT(n,e.key,e.data),updateMask:KO(e.fieldMask)};else{if(!(e instanceof wO))return Te(16599,{ft:e.type});t={verify:Pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const d=h.transform;if(d instanceof wu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Au)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Su)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $h)return{fieldPath:h.field.canonicalString(),increment:d.Re};throw Te(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:kO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)}(n,e.precondition)),t}function LO(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map(t=>function(a,l){let h=a.updateTime?Dr(a.updateTime):Dr(l);return h.isEqual(Ae.min())&&(h=Dr(l)),new EO(h,a.transformResults||[])}(t,e))):[]}function jO(n,e){return{documents:[Pw(n,e.path)]}}function zO(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Pw(n,a);const l=function(g){if(g.length!==0)return Vw(ar.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(g){if(g.length!==0)return g.map(_=>function(w){return{field:go(w.field),direction:FO(w.dir)}}(_))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=xp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:t,parent:a}}function BO(n){let e=MO(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Ke(s===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(b){const w=Mw(b);return w instanceof ar&&hw(w)?w.getFilters():[w]}(t.where));let h=[];t.orderBy&&(h=function(b){return b.map(w=>function(R){return new bu(yo(R.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(b){let w;return w=typeof b=="object"?b.value:b,gf(w)?null:w}(t.limit));let p=null;t.startAt&&(p=function(b){const w=!!b.before,C=b.values||[];return new Kh(C,w)}(t.startAt));let g=null;return t.endAt&&(g=function(b){const w=!b.before,C=b.values||[];return new Kh(C,w)}(t.endAt)),aO(e,a,h,l,d,"F",p,g)}function qO(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=yo(t.unaryFilter.field);return St.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=yo(t.unaryFilter.field);return St.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=yo(t.unaryFilter.field);return St.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=yo(t.unaryFilter.field);return St.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(n):n.fieldFilter!==void 0?function(t){return St.create(yo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ar.create(t.compositeFilter.filters.map(s=>Mw(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(t.compositeFilter.op))}(n):Te(30097,{filter:n})}function FO(n){return DO[n]}function HO(n){return xO[n]}function GO(n){return OO[n]}function go(n){return{fieldPath:n.canonicalString()}}function yo(n){return $t.fromServerFormat(n.fieldPath)}function Vw(n){return n instanceof St?function(t){if(t.op==="=="){if(wT(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(bT(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wT(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(bT(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:HO(t.op),value:t.value}}}(n):n instanceof ar?function(t){const s=t.getFilters().map(a=>Vw(a));return s.length===1?s[0]:{compositeFilter:{op:GO(t.op),filters:s}}}(n):Te(54877,{filter:n})}function KO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Uw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t,s,a,l=Ae.min(),h=Ae.min(),d=Qt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.wt=e}}function QO(n){const e=BO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.yn=new XO}addToCollectionParentIndex(e,t){return this.yn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(as.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(as.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class XO{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Pt(st.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Pt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lw=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(Lw,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Co(0)}static ir(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="LruGarbageCollector",WO=1048576;function jT([n,e],[t,s]){const a=Ne(n,t);return a===0?Ne(e,s):a}class ZO{constructor(e){this.cr=e,this.buffer=new Pt(jT),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();jT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JO{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){he(LT,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lo(t)?he(LT,"Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.Ir(3e5)})}}class e2{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(pf.le);const s=new ZO(t);return this.Er.forEachTarget(e,a=>s.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>s.Pr(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Er.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(UT)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UT):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let s,a,l,h,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,h=Date.now(),this.nthSequenceNumber(e,a))).next(b=>(s=b,d=Date.now(),this.removeTargets(e,s,t))).next(b=>(l=b,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(b=>(g=Date.now(),mo()<=Ve.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${a} in `+(d-h)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b})))}}function t2(n,e){return new e2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.changes=new va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&cu(s.mutation,a,Cn.empty(),Ot.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ue()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ue()){const a=sa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let h=ru();return l.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=sa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ue()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,s,a){let l=yi();const h=uu(),d=function(){return uu()}();return t.forEach((p,g)=>{const _=s.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof _s)?l=l.insert(g.key,g):_!==void 0?(h.set(g.key,_.mutation.getFieldMask()),cu(_.mutation,g,_.mutation.getFieldMask(),Ot.now())):h.set(g.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((g,_)=>h.set(g,_)),t.forEach((g,_)=>{var b;return d.set(g,new r2(_,(b=h.get(g))!==null&&b!==void 0?b:null))}),d))}recalculateAndSaveOverlays(e,t){const s=uu();let a=new ct((h,d)=>h-d),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let _=s.get(p)||Cn.empty();_=d.applyToLocalView(g,_),s.set(p,_);const b=(a.get(d.batchId)||Ue()).add(p);a=a.insert(d.batchId,b)})}).next(()=>{const h=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,b=Ew();_.forEach(w=>{if(!l.has(w)){const C=Rw(t.get(w),s.get(w));C!==null&&b.set(w,C),l=l.add(w)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,b))}return ne.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const h=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ne.resolve(sa());let d=_u,p=l;return h.next(g=>ne.forEach(g,(_,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),l.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{p=p.insert(_,w)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,p,g,Ue())).next(_=>({batchId:d,changes:vw(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next(s=>{let a=ru();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let h=ru();return this.indexManager.getCollectionParents(e,l).next(d=>ne.forEach(d,p=>{const g=function(b,w){return new jo(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next(_=>{_.forEach((b,w)=>{h=h.insert(b,w)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(h=>{l.forEach((p,g)=>{const _=g.getKey();h.get(_)===null&&(h=h.insert(_,tn.newInvalidDocument(_)))});let d=ru();return h.forEach((p,g)=>{const _=l.get(p);_!==void 0&&cu(_.mutation,g,Cn.empty(),Ot.now()),Ef(t,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Dr(a.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:QO(a.bundledQuery),readTime:Dr(a.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.overlays=new ct(ge.comparator),this.Or=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=sa();return ne.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.St(e,t,l)}),ne.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Or.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const a=sa(),l=t.length+1,h=new ge(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new ct((g,_)=>g-_);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let _=l.get(g.largestBatchId);_===null&&(_=sa(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=sa(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=a)););return ne.resolve(d)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.Or.get(a.largestBatchId).delete(s.key);this.Or.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new SO(t,s));let l=this.Or.get(t);l===void 0&&(l=Ue(),this.Or.set(t,l)),this.Or.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(){this.Nr=new Pt(zt.Br),this.Lr=new Pt(zt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const s=new zt(e,t);this.Nr=this.Nr.add(s),this.Lr=this.Lr.add(s)}qr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Qr(new zt(e,t))}$r(e,t){e.forEach(s=>this.removeReference(s,t))}Ur(e){const t=new ge(new st([])),s=new zt(t,e),a=new zt(t,e+1),l=[];return this.Lr.forEachInRange([s,a],h=>{this.Qr(h),l.push(h.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new ge(new st([])),s=new zt(t,e),a=new zt(t,e+1);let l=Ue();return this.Lr.forEachInRange([s,a],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new zt(e,0),s=this.Nr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class zt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return ge.comparator(e.key,t.key)||Ne(e.Gr,t.Gr)}static kr(e,t){return Ne(e.Gr,t.Gr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Pt(zt.Br)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new AO(l,t,s,a);this.mutationQueue.push(h);for(const d of a)this.zr=this.zr.add(new zt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(e,t){return ne.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Hr(s),l=a<0?0:a;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?ug:this.Jn-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new zt(t,0),a=new zt(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([s,a],h=>{const d=this.jr(h.Gr);l.push(d)}),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pt(Ne);return t.forEach(a=>{const l=new zt(a,0),h=new zt(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,h],d=>{s=s.add(d.Gr)})}),ne.resolve(this.Jr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;ge.isDocumentKey(l)||(l=l.child(""));const h=new zt(new ge(l),0);let d=new Pt(Ne);return this.zr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Gr)),!0)},h),ne.resolve(this.Jr(d))}Jr(e){const t=[];return e.forEach(s=>{const a=this.jr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Ke(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.zr;return ne.forEach(t.mutations,a=>{const l=new zt(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=s})}Xn(e){}containsKey(e,t){const s=new zt(t,0),a=this.zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.Zr=e,this.docs=function(){return new ct(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,h=this.Zr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(t))}getEntries(e,t){let s=yi();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():tn.newInvalidDocument(a))}),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=yi();const h=t.path,d=new ge(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||Lx(Ux(_),s)<=0||(a.has(_.key)||Ef(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Te(9500)}Xr(e,t){return ne.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new c2(this)}getSize(e){return ne.resolve(this.size)}}class c2 extends n2{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(s)}),ne.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.persistence=e,this.ei=new va(t=>fg(t),dg),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ti=0,this.ni=new vg,this.targetCount=0,this.ri=Co.rr()}forEachTarget(e,t){return this.ei.forEach((s,a)=>t(a)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ti&&(this.ti=t),ne.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Co(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.ar(t),ne.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.ei.forEach((h,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.ei.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ne.waitFor(l).next(()=>a)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.ei.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this.ni.qr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this.ni.$r(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(h=>{l.push(a.markPotentiallyOrphaned(e,h))}),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ni.Wr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t){this.ii={},this.overlays={},this.si=new pf(0),this.oi=!1,this.oi=!0,this._i=new o2,this.referenceDelegate=e(this),this.ai=new h2(this),this.indexManager=new YO,this.remoteDocumentCache=function(a){return new u2(a)}(s=>this.referenceDelegate.ui(s)),this.serializer=new $O(t),this.ci=new s2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new a2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ii[e.toKey()];return s||(s=new l2(t,this.referenceDelegate),this.ii[e.toKey()]=s),s}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const a=new f2(this.si.next());return this.referenceDelegate.li(),s(a).next(l=>this.referenceDelegate.hi(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Pi(e,t){return ne.or(Object.values(this.ii).map(s=>()=>s.containsKey(e,t)))}}class f2 extends zx{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ti=new vg,this.Ii=null}static Ei(e){return new Eg(e)}get di(){if(this.Ii)return this.Ii;throw Te(60996)}addReference(e,t,s){return this.Ti.addReference(s,t),this.di.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ti.removeReference(s,t),this.di.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.di.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.di,s=>{const a=ge.fromPath(s);return this.Ai(e,a).next(l=>{l||t.removeEntry(a,Ae.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ne.or([()=>ne.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Yh{constructor(e,t){this.persistence=e,this.Ri=new va(s=>Fx(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=t2(this,t)}static Ei(e,t){return new Yh(e,t)}li(){}hi(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Vr(e){let t=0;return this.Ar(e,s=>{t++}).next(()=>t)}Ar(e,t){return ne.forEach(this.Ri,(s,a)=>this.gr(e,s,a).next(l=>l?ne.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.Xr(e,h=>this.gr(e,h,t).next(d=>{d||(s++,l.removeEntry(h,Ae.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.Ri.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.Ri.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ne.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nh(e.data.value)),t}gr(e,t,s){return ne.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return ne.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.ls=s,this.hs=a}static Ps(e,t){let s=Ue(),a=Ue();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Tg(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return $C()?8:Bx(rn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.Rs(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Vs(e,t,a,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new d2;return this.fs(e,t,h).next(d=>{if(l.result=d,this.Is)return this.gs(e,t,h,d.size)})}).next(()=>l.result)}gs(e,t,s,a){return s.documentReadCount<this.Es?(mo()<=Ve.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ne.resolve()):(mo()<=Ve.DEBUG&&he("QueryEngine","Query:",po(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ds*a?(mo()<=Ve.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(t))):ne.resolve())}Rs(e,t){if(IT(t))return ne.resolve(null);let s=Nr(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Dp(t,null,"F"),s=Nr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=Ue(...l);return this.As.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.ps(t,d);return this.ys(t,g,h,p.readTime)?this.Rs(e,Dp(t,null,"F")):this.ws(e,g,t,p)}))})))}Vs(e,t,s,a){return IT(t)||a.isEqual(Ae.min())?ne.resolve(null):this.As.getDocuments(e,s).next(l=>{const h=this.ps(t,l);return this.ys(t,h,s,a)?ne.resolve(null):(mo()<=Ve.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),po(t)),this.ws(e,h,t,Vx(a,_u)).next(d=>d))})}ps(e,t){let s=new Pt(yw(e));return t.forEach((a,l)=>{Ef(e,l)&&(s=s.add(l))}),s}ys(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}fs(e,t,s){return mo()<=Ve.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",po(t)),this.As.getDocumentsMatchingQuery(e,t,as.min(),s)}ws(e,t,s,a){return this.As.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="LocalStore",p2=3e8;class g2{constructor(e,t,s,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new ct(Ne),this.Ds=new va(l=>fg(l),dg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(s)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i2(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function y2(n,e,t,s){return new g2(n,e,t,s)}async function zw(n,e){const t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],d=[];let p=Ue();for(const g of a){h.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(s,p).next(g=>({Ms:g,removedBatchIds:h,addedBatchIds:d}))})})}function _2(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(d,p,g,_){const b=g.batch,w=b.keys();let C=ne.resolve();return w.forEach(R=>{C=C.next(()=>_.getEntry(p,R)).next(L=>{const V=g.docVersions.get(R);Ke(V!==null,48541),L.version.compareTo(V)<0&&(b.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),_.addEntry(L)))})}),C.next(()=>d.mutationQueue.removeMutationBatch(p,b))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let p=Ue();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function Bw(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function v2(n,e){const t=Se(n),s=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const d=[];e.targetChanges.forEach((_,b)=>{const w=a.get(b);if(!w)return;d.push(t.ai.removeMatchingKeys(l,_.removedDocuments,b).next(()=>t.ai.addMatchingKeys(l,_.addedDocuments,b)));let C=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(Qt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,s)),a=a.insert(b,C),function(L,V,z){return L.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=p2?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(w,C,_)&&d.push(t.ai.updateTargetData(l,C))});let p=yi(),g=Ue();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(E2(l,h,e.documentUpdates).next(_=>{p=_.xs,g=_.Os})),!s.isEqual(Ae.min())){const _=t.ai.getLastRemoteSnapshotVersion(l).next(b=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,s));d.push(_)}return ne.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,g)).next(()=>p)}).then(l=>(t.Ss=a,l))}function E2(n,e,t){let s=Ue(),a=Ue();return t.forEach(l=>s=s.add(l)),e.getEntries(n,s).next(l=>{let h=yi();return t.forEach((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):he(bg,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{xs:h,Os:a}})}function T2(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ug),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function b2(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.ai.getTargetData(s,e).next(l=>l?(a=l,ne.resolve(a)):t.ai.allocateTargetId(s).next(h=>(a=new Ji(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.ai.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ss.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(s.targetId,s),t.Ds.set(e,s.targetId)),s})}async function Mp(n,e,t){const s=Se(n),a=s.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,a))}catch(h){if(!Lo(h))throw h;he(bg,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ss=s.Ss.remove(e),s.Ds.delete(a.target)}function zT(n,e,t){const s=Se(n);let a=Ae.min(),l=Ue();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,g,_){const b=Se(p),w=b.Ds.get(_);return w!==void 0?ne.resolve(b.Ss.get(w)):b.ai.getTargetData(g,_)}(s,h,Nr(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,s.ai.getMatchingKeysForTargetId(h,d.targetId).next(p=>{l=p})}).next(()=>s.bs.getDocumentsMatchingQuery(h,e,t?a:Ae.min(),t?l:Ue())).next(d=>(w2(s,lO(e),d),{documents:d,Ns:l})))}function w2(n,e,t){let s=n.vs.get(e)||Ae.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),n.vs.set(e,s)}class BT{constructor(){this.activeTargetIds=mO()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A2{constructor(){this.So=new BT,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,s){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new BT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="ConnectivityMonitor";class FT{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){he(qT,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){he(qT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function Vp(){return _h===null?_h=function(){return 268435456+Math.round(2147483648*Math.random())}():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="RestConnection",R2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class I2{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${s}/databases/${a}`,this.qo=this.databaseId.database===Hh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Qo(e,t,s,a,l){const h=Vp(),d=this.$o(e,t.toUriEncodedString());he(ip,`Sending RPC '${e}' ${h}:`,d,s);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,a,l);const{host:g}=new URL(d),_=ko(g);return this.Ko(e,d,p,s,_).then(b=>(he(ip,`Received RPC '${e}' ${h}: `,b),b),b=>{throw Ao(ip,`RPC '${e}' ${h} failed with error: `,b,"url: ",d,"request:",s),b})}Wo(e,t,s,a,l,h){return this.Qo(e,t,s,a,l)}Uo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}$o(e,t){const s=R2[e];return`${this.Lo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class N2 extends I2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,s,a,l){const h=Vp();return new Promise((d,p)=>{const g=new Hb;g.setWithCredentials(!0),g.listenOnce(Gb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Ch.NO_ERROR:const b=g.getResponseJson();he(Zt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(b)),d(b);break;case Ch.TIMEOUT:he(Zt,`RPC '${e}' ${h} timed out`),p(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Ch.HTTP_ERROR:const w=g.getStatus();if(he(Zt,`RPC '${e}' ${h} failed with status:`,w,"response text:",g.getResponseText()),w>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const R=C==null?void 0:C.error;if(R&&R.status&&R.message){const L=function(z){const U=z.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(U)>=0?U:te.UNKNOWN}(R.status);p(new fe(L,R.message))}else p(new fe(te.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new fe(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{s_:e,streamId:h,o_:g.getLastErrorCode(),__:g.getLastError()})}}finally{he(Zt,`RPC '${e}' ${h} completed.`)}});const _=JSON.stringify(a);he(Zt,`RPC '${e}' ${h} sending request:`,a),g.send(t,"POST",_,s,15)})}a_(e,t,s){const a=Vp(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Qb(),d=$b(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const _=l.join("");he(Zt,`Creating RPC '${e}' stream ${a}: ${_}`,p);const b=h.createWebChannel(_,p);let w=!1,C=!1;const R=new C2({Go:V=>{C?he(Zt,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(w||(he(Zt,`Opening RPC '${e}' stream ${a} transport.`),b.open(),w=!0),he(Zt,`RPC '${e}' stream ${a} sending:`,V),b.send(V))},zo:()=>b.close()}),L=(V,z,U)=>{V.listen(z,q=>{try{U(q)}catch(se){setTimeout(()=>{throw se},0)}})};return L(b,nu.EventType.OPEN,()=>{C||(he(Zt,`RPC '${e}' stream ${a} transport opened.`),R.t_())}),L(b,nu.EventType.CLOSE,()=>{C||(C=!0,he(Zt,`RPC '${e}' stream ${a} transport closed`),R.r_())}),L(b,nu.EventType.ERROR,V=>{C||(C=!0,Ao(Zt,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),R.r_(new fe(te.UNAVAILABLE,"The operation could not be completed")))}),L(b,nu.EventType.MESSAGE,V=>{var z;if(!C){const U=V.data[0];Ke(!!U,16349);const q=U,se=(q==null?void 0:q.error)||((z=q[0])===null||z===void 0?void 0:z.error);if(se){he(Zt,`RPC '${e}' stream ${a} received error:`,se);const ae=se.status;let ie=function(D){const P=At[D];if(P!==void 0)return Cw(P)}(ae),O=se.message;ie===void 0&&(ie=te.INTERNAL,O="Unknown error status: "+ae+" with message "+se.message),C=!0,R.r_(new fe(ie,O)),b.close()}else he(Zt,`RPC '${e}' stream ${a} received:`,U),R.i_(U)}}),L(d,Kb.STAT_EVENT,V=>{V.stat===wp.PROXY?he(Zt,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===wp.NOPROXY&&he(Zt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{R.n_()},0),R}}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n){return new PO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t,s=1e3,a=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=s,this.c_=a,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),s=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-s);a>0&&he("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="PersistentStream";class Fw{constructor(e,t,s,a,l,h,d,p){this.bi=e,this.R_=s,this.V_=a,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new qw(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.m_===t&&this.B_(s,a)},s=>{e(()=>{const a=new fe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.L_(a)})})}B_(e,t){const s=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{s(()=>this.listener.jo())}),this.stream.Jo(()=>{s(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{s(()=>this.L_(a))}),this.stream.onMessage(a=>{s(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return he(HT,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(he(HT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class D2 extends Fw{constructor(e,t,s,a,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,h),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=VO(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?Dr(h.readTime):Ae.min()}(e);return this.listener.Q_(t,s)}U_(e){const t={};t.database=kp(this.serializer),t.addTarget=function(l,h){let d;const p=h.target;if(d=Cp(p)?{documents:jO(l,p)}:{query:zO(l,p).gt},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=xw(l,h.resumeToken);const g=xp(l,h.expectedCount);g!==null&&(d.expectedCount=g)}else if(h.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Qh(l,h.snapshotVersion.toTimestamp());const g=xp(l,h.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const s=qO(this.serializer,e);s&&(t.labels=s),this.F_(t)}K_(e){const t={};t.database=kp(this.serializer),t.removeTarget=e,this.F_(t)}}class x2 extends Fw{constructor(e,t,s,a,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,h),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=LO(e.writeResults,e.commitTime),s=Dr(e.commitTime);return this.listener.j_(s,t)}H_(){const e={};e.database=kp(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>UO(this.serializer,s))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{}class P2 extends O2{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,s,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Qo(e,Op(t,s),a,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(te.UNKNOWN,l.toString())})}Wo(e,t,s,a,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Wo(e,Op(t,s),a,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(te.UNKNOWN,h.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class k2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(gi(t),this.ea=!1):he("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="RemoteStore";class M2{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(h=>{s.enqueueAndForget(async()=>{Ea(this)&&(he(fa,"Restarting streams for network reachability change."),await async function(p){const g=Se(p);g.aa.add(4),await Uu(g),g.la.set("Unknown"),g.aa.delete(4),await Sf(g)}(this))})}),this.la=new k2(s,a)}}async function Sf(n){if(Ea(n))for(const e of n.ua)await e(!0)}async function Uu(n){for(const e of n.ua)await e(!1)}function Hw(n,e){const t=Se(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Rg(t)?Sg(t):zo(t).b_()&&Ag(t,e))}function wg(n,e){const t=Se(n),s=zo(t);t._a.delete(e),s.b_()&&Gw(t,e),t._a.size===0&&(s.b_()?s.v_():Ea(t)&&t.la.set("Unknown"))}function Ag(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zo(n).U_(e)}function Gw(n,e){n.ha.Ke(e),zo(n).K_(e)}function Sg(n){n.ha=new NO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),zo(n).start(),n.la.ta()}function Rg(n){return Ea(n)&&!zo(n).w_()&&n._a.size>0}function Ea(n){return Se(n).aa.size===0}function Kw(n){n.ha=void 0}async function V2(n){n.la.set("Online")}async function U2(n){n._a.forEach((e,t)=>{Ag(n,e)})}async function L2(n,e){Kw(n),Rg(n)?(n.la.ia(e),Sg(n)):n.la.set("Unknown")}async function j2(n,e,t){if(n.la.set("Online"),e instanceof Dw&&e.state===2&&e.cause)try{await async function(a,l){const h=l.cause;for(const d of l.targetIds)a._a.has(d)&&(await a.remoteSyncer.rejectListen(d,h),a._a.delete(d),a.ha.removeTarget(d))}(n,e)}catch(s){he(fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Xh(n,s)}else if(e instanceof Oh?n.ha.Xe(e):e instanceof Nw?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Ae.min()))try{const s=await Bw(n.localStore);t.compareTo(s)>=0&&await function(l,h){const d=l.ha.It(h);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l._a.get(g);_&&l._a.set(g,_.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,g)=>{const _=l._a.get(p);if(!_)return;l._a.set(p,_.withResumeToken(Qt.EMPTY_BYTE_STRING,_.snapshotVersion)),Gw(l,p);const b=new Ji(_.target,p,g,_.sequenceNumber);Ag(l,b)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(s){he(fa,"Failed to raise snapshot:",s),await Xh(n,s)}}async function Xh(n,e,t){if(!Lo(e))throw e;n.aa.add(1),await Uu(n),n.la.set("Offline"),t||(t=()=>Bw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(fa,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Sf(n)})}function $w(n,e){return e().catch(t=>Xh(n,t,e))}async function Rf(n){const e=Se(n),t=cs(e);let s=e.oa.length>0?e.oa[e.oa.length-1].batchId:ug;for(;z2(e);)try{const a=await T2(e.localStore,s);if(a===null){e.oa.length===0&&t.v_();break}s=a.batchId,B2(e,a)}catch(a){await Xh(e,a)}Qw(e)&&Yw(e)}function z2(n){return Ea(n)&&n.oa.length<10}function B2(n,e){n.oa.push(e);const t=cs(n);t.b_()&&t.W_&&t.G_(e.mutations)}function Qw(n){return Ea(n)&&!cs(n).w_()&&n.oa.length>0}function Yw(n){cs(n).start()}async function q2(n){cs(n).H_()}async function F2(n){const e=cs(n);for(const t of n.oa)e.G_(t.mutations)}async function H2(n,e,t){const s=n.oa.shift(),a=gg.from(s,e,t);await $w(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Rf(n)}async function G2(n,e){e&&cs(n).W_&&await async function(s,a){if(function(h){return IO(h)&&h!==te.ABORTED}(a.code)){const l=s.oa.shift();cs(s).D_(),await $w(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Rf(s)}}(n,e),Qw(n)&&Yw(n)}async function GT(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),he(fa,"RemoteStore received new credentials");const s=Ea(t);t.aa.add(3),await Uu(t),s&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Sf(t)}async function K2(n,e){const t=Se(n);e?(t.aa.delete(2),await Sf(t)):e||(t.aa.add(2),await Uu(t),t.la.set("Unknown"))}function zo(n){return n.Pa||(n.Pa=function(t,s,a){const l=Se(t);return l.Y_(),new D2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:V2.bind(null,n),Jo:U2.bind(null,n),Zo:L2.bind(null,n),Q_:j2.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),Rg(n)?Sg(n):n.la.set("Unknown")):(await n.Pa.stop(),Kw(n))})),n.Pa}function cs(n){return n.Ta||(n.Ta=function(t,s,a){const l=Se(t);return l.Y_(),new x2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:q2.bind(null,n),Zo:G2.bind(null,n),z_:F2.bind(null,n),j_:H2.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Rf(n)):(await n.Ta.stop(),n.oa.length>0&&(he(fa,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const h=Date.now()+s,d=new Ig(e,t,h,a,l);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(n,e){if(gi("AsyncQueue",`${e}: ${n}`),Lo(n))return new fe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ge.comparator(t.key,s.key):(t,s)=>ge.comparator(t.key,s.key),this.keyedMap=ru(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new wo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.Ia=new ct(ge.comparator)}track(e){const t=e.doc.key,s=this.Ia.get(t);s?e.type!==0&&s.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&s.type!==1?this.Ia=this.Ia.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Ia=this.Ia.remove(t):e.type===1&&s.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,Ea:s}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,s)=>{e.push(s)}),e}}class No{constructor(e,t,s,a,l,h,d,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,a,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new No(e,t,wo.emptySet(t),h,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Q2{constructor(){this.queries=$T(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,s){const a=Se(t),l=a.queries;a.queries=$T(),l.forEach((h,d)=>{for(const p of d.Ra)p.onError(s)})})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function $T(){return new va(n=>gw(n),vf)}async function Ng(n,e){const t=Se(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.Va()&&e.ma()&&(s=2):(l=new $2,s=e.ma()?0:1);try{switch(s){case 0:l.Aa=await t.onListen(a,!0);break;case 1:l.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(h){const d=Cg(h,`Initialization of query '${po(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&xg(t)}async function Dg(n,e){const t=Se(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const h=l.Ra.indexOf(e);h>=0&&(l.Ra.splice(h,1),l.Ra.length===0?a=e.ma()?0:1:!l.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Y2(n,e){const t=Se(n);let s=!1;for(const a of e){const l=a.query,h=t.queries.get(l);if(h){for(const d of h.Ra)d.pa(a)&&(s=!0);h.Aa=a}}s&&xg(t)}function X2(n,e,t){const s=Se(n),a=s.queries.get(e);if(a)for(const l of a.Ra)l.onError(t);s.queries.delete(e)}function xg(n){n.fa.forEach(e=>{e.next()})}var Up,QT;(QT=Up||(Up={})).ya="default",QT.Cache="cache";class Og{constructor(e,t,s){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=s||{}}pa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new No(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const s=t!=="Offline";return(!this.options.Fa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.key=e}}class Ww{constructor(e){this.key=e}}class W2{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ue(),this.mutatedKeys=Ue(),this.Ua=yw(e),this.Ka=new wo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const s=t?t.za:new KT,a=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,h=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,b)=>{const w=a.get(_),C=Ef(this.query,b)?b:null,R=!!w&&this.mutatedKeys.has(w.key),L=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;w&&C?w.data.isEqual(C.data)?R!==L&&(s.track({type:3,doc:C}),V=!0):this.ja(w,C)||(s.track({type:2,doc:C}),V=!0,(p&&this.Ua(C,p)>0||g&&this.Ua(C,g)<0)&&(d=!0)):!w&&C?(s.track({type:0,doc:C}),V=!0):w&&!C&&(s.track({type:1,doc:w}),V=!0,(p||g)&&(d=!0)),V&&(C?(h=h.add(C),l=L?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{Ka:h,za:s,ys:d,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const h=e.za.da();h.sort((_,b)=>function(C,R){const L=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:V})}};return L(C)-L(R)}(_.type,b.type)||this.Ua(_.doc,b.doc)),this.Ha(s),a=a!=null&&a;const d=t&&!a?this.Ja():[],p=this.$a.size===0&&this.current&&!a?1:0,g=p!==this.Qa;return this.Qa=p,h.length!==0||g?{snapshot:new No(this.query,e.Ka,l,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ya:d}:{Ya:d}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new KT,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ue(),this.Ka.forEach(s=>{this.Za(s.key)&&(this.$a=this.$a.add(s.key))});const t=[];return e.forEach(s=>{this.$a.has(s)||t.push(new Ww(s))}),this.$a.forEach(s=>{e.has(s)||t.push(new Xw(s))}),t}Xa(e){this.qa=e.Ns,this.$a=Ue();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return No.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Pg="SyncEngine";class Z2{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class J2{constructor(e){this.key=e,this.tu=!1}}class eP{constructor(e,t,s,a,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.nu={},this.ru=new va(d=>gw(d),vf),this.iu=new Map,this.su=new Set,this.ou=new ct(ge.comparator),this._u=new Map,this.au=new vg,this.uu={},this.cu=new Map,this.lu=Co.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function tP(n,e,t=!0){const s=rA(n);let a;const l=s.ru.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.eu()):a=await Zw(s,e,t,!0),a}async function nP(n,e){const t=rA(n);await Zw(t,e,!0,!1)}async function Zw(n,e,t,s){const a=await b2(n.localStore,Nr(e)),l=a.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await rP(n,e,l,h==="current",a.resumeToken)),n.isPrimaryClient&&t&&Hw(n.remoteStore,a),d}async function rP(n,e,t,s,a){n.Pu=(b,w,C)=>async function(L,V,z,U){let q=V.view.Ga(z);q.ys&&(q=await zT(L.localStore,V.query,!1).then(({documents:O})=>V.view.Ga(O,q)));const se=U&&U.targetChanges.get(V.targetId),ae=U&&U.targetMismatches.get(V.targetId)!=null,ie=V.view.applyChanges(q,L.isPrimaryClient,se,ae);return XT(L,V.targetId,ie.Ya),ie.snapshot}(n,b,w,C);const l=await zT(n.localStore,e,!0),h=new W2(e,l.Ns),d=h.Ga(l.documents),p=Vu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),g=h.applyChanges(d,n.isPrimaryClient,p);XT(n,t,g.Ya);const _=new Z2(e,t,h);return n.ru.set(e,_),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),g.snapshot}async function iP(n,e,t){const s=Se(n),a=s.ru.get(e),l=s.iu.get(a.targetId);if(l.length>1)return s.iu.set(a.targetId,l.filter(h=>!vf(h,e))),void s.ru.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Mp(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&wg(s.remoteStore,a.targetId),Lp(s,a.targetId)}).catch(Uo)):(Lp(s,a.targetId),await Mp(s.localStore,a.targetId,!0))}async function sP(n,e){const t=Se(n),s=t.ru.get(e),a=t.iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),wg(t.remoteStore,s.targetId))}async function aP(n,e,t){const s=dP(n);try{const a=await function(h,d){const p=Se(h),g=Ot.now(),_=d.reduce((C,R)=>C.add(R.key),Ue());let b,w;return p.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=yi(),L=Ue();return p.Cs.getEntries(C,_).next(V=>{R=V,R.forEach((z,U)=>{U.isValidDocument()||(L=L.add(z))})}).next(()=>p.localDocuments.getOverlayedDocuments(C,R)).next(V=>{b=V;const z=[];for(const U of d){const q=bO(U,b.get(U.key).overlayedDocument);q!=null&&z.push(new _s(U.key,q,lw(q.value.mapValue),Gn.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,z,d)}).next(V=>{w=V;const z=V.applyToLocalDocumentSet(b,L);return p.documentOverlayCache.saveOverlays(C,V.batchId,z)})}).then(()=>({batchId:w.batchId,changes:vw(b)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,d,p){let g=h.uu[h.currentUser.toKey()];g||(g=new ct(Ne)),g=g.insert(d,p),h.uu[h.currentUser.toKey()]=g}(s,a.batchId,t),await Lu(s,a.changes),await Rf(s.remoteStore)}catch(a){const l=Cg(a,"Failed to persist write");t.reject(l)}}async function Jw(n,e){const t=Se(n);try{const s=await v2(t.localStore,e);e.targetChanges.forEach((a,l)=>{const h=t._u.get(l);h&&(Ke(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?h.tu=!0:a.modifiedDocuments.size>0?Ke(h.tu,14607):a.removedDocuments.size>0&&(Ke(h.tu,42227),h.tu=!1))}),await Lu(t,s,e)}catch(s){await Uo(s)}}function YT(n,e,t){const s=Se(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.ru.forEach((l,h)=>{const d=h.view.ga(e);d.snapshot&&a.push(d.snapshot)}),function(h,d){const p=Se(h);p.onlineState=d;let g=!1;p.queries.forEach((_,b)=>{for(const w of b.Ra)w.ga(d)&&(g=!0)}),g&&xg(p)}(s.eventManager,e),a.length&&s.nu.Q_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function oP(n,e,t){const s=Se(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s._u.get(e),l=a&&a.key;if(l){let h=new ct(ge.comparator);h=h.insert(l,tn.newNoDocument(l,Ae.min()));const d=Ue().add(l),p=new wf(Ae.min(),new Map,new ct(Ne),h,d);await Jw(s,p),s.ou=s.ou.remove(l),s._u.delete(e),kg(s)}else await Mp(s.localStore,e,!1).then(()=>Lp(s,e,t)).catch(Uo)}async function lP(n,e){const t=Se(n),s=e.batch.batchId;try{const a=await _2(t.localStore,e);tA(t,s,null),eA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Lu(t,a)}catch(a){await Uo(a)}}async function uP(n,e,t){const s=Se(n);try{const a=await function(h,d){const p=Se(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next(b=>(Ke(b!==null,37113),_=b.keys(),p.mutationQueue.removeMutationBatch(g,b))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(s.localStore,e);tA(s,e,t),eA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Lu(s,a)}catch(a){await Uo(a)}}function eA(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function tA(n,e,t){const s=Se(n);let a=s.uu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.uu[s.currentUser.toKey()]=a}}function Lp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.iu.get(e))n.ru.delete(s),t&&n.nu.Tu(s,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(s=>{n.au.containsKey(s)||nA(n,s)})}function nA(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(wg(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),kg(n))}function XT(n,e,t){for(const s of t)s instanceof Xw?(n.au.addReference(s.key,e),cP(n,s)):s instanceof Ww?(he(Pg,"Document no longer in limbo: "+s.key),n.au.removeReference(s.key,e),n.au.containsKey(s.key)||nA(n,s.key)):Te(19791,{Iu:s})}function cP(n,e){const t=e.key,s=t.path.canonicalString();n.ou.get(t)||n.su.has(s)||(he(Pg,"New document in limbo: "+t),n.su.add(s),kg(n))}function kg(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new ge(st.fromString(e)),s=n.lu.next();n._u.set(s,new J2(t)),n.ou=n.ou.insert(t,s),Hw(n.remoteStore,new Ji(Nr(_f(t.path)),s,"TargetPurposeLimboResolution",pf.le))}}async function Lu(n,e,t){const s=Se(n),a=[],l=[],h=[];s.ru.isEmpty()||(s.ru.forEach((d,p)=>{h.push(s.Pu(p,e,t).then(g=>{var _;if((g||t)&&s.isPrimaryClient){const b=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){a.push(g);const b=Tg.Ps(p.targetId,g);l.push(b)}}))}),await Promise.all(h),s.nu.Q_(a),await async function(p,g){const _=Se(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ne.forEach(g,w=>ne.forEach(w.ls,C=>_.persistence.referenceDelegate.addReference(b,w.targetId,C)).next(()=>ne.forEach(w.hs,C=>_.persistence.referenceDelegate.removeReference(b,w.targetId,C)))))}catch(b){if(!Lo(b))throw b;he(bg,"Failed to update sequence numbers: "+b)}for(const b of g){const w=b.targetId;if(!b.fromCache){const C=_.Ss.get(w),R=C.snapshotVersion,L=C.withLastLimboFreeSnapshotVersion(R);_.Ss=_.Ss.insert(w,L)}}}(s.localStore,l))}async function hP(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){he(Pg,"User change. New user:",e.toKey());const s=await zw(t.localStore,e);t.currentUser=e,function(l,h){l.cu.forEach(d=>{d.forEach(p=>{p.reject(new fe(te.CANCELLED,h))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Lu(t,s.Ms)}}function fP(n,e){const t=Se(n),s=t._u.get(e);if(s&&s.tu)return Ue().add(s.key);{let a=Ue();const l=t.iu.get(e);if(!l)return a;for(const h of l){const d=t.ru.get(h);a=a.unionWith(d.view.Wa)}return a}}function rA(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oP.bind(null,e),e.nu.Q_=Y2.bind(null,e.eventManager),e.nu.Tu=X2.bind(null,e.eventManager),e}function dP(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uP.bind(null,e),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return y2(this.persistence,new m2,e.initialUser,this.serializer)}Ru(e){return new jw(Eg.Ei,this.serializer)}Au(e){return new A2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class mP extends Wh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Ke(this.persistence.referenceDelegate instanceof Yh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new JO(s,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new jw(s=>Yh.Ei(s,t),this.serializer)}}class jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>YT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=hP.bind(null,this.syncEngine),await K2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q2}()}createDatastore(e){const t=Af(e.databaseInfo.databaseId),s=function(l){return new N2(l)}(e.databaseInfo);return function(l,h,d,p){return new P2(l,h,d,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,h,d){return new M2(s,a,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>YT(this.syncEngine,t,0),function(){return FT.C()?new FT:new S2}())}createSyncEngine(e,t){return function(a,l,h,d,p,g,_){const b=new eP(a,l,h,d,p,g);return _&&(b.hu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Se(a);he(fa,"RemoteStore shutting down."),l.aa.add(5),await Uu(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}jp.provider={build:()=>new jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class pP{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=en.UNAUTHENTICATED,this.clientId=Zb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{he(hs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(he(hs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Cg(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function ap(n,e){n.asyncQueue.verifyOperationInProgress(),he(hs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async a=>{s.isEqual(a)||(await zw(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function WT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await gP(n);he(hs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>GT(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>GT(e.remoteStore,a)),n._onlineComponents=e}async function gP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(hs,"Using user provided OfflineComponentProvider");try{await ap(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===te.FAILED_PRECONDITION||a.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Ao("Error using user provided cache. Falling back to memory cache: "+t),await ap(n,new Wh)}}else he(hs,"Using default OfflineComponentProvider"),await ap(n,new mP(void 0));return n._offlineComponents}async function iA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(hs,"Using user provided OnlineComponentProvider"),await WT(n,n._uninitializedComponentsProvider._online)):(he(hs,"Using default OnlineComponentProvider"),await WT(n,new jp))),n._onlineComponents}function yP(n){return iA(n).then(e=>e.syncEngine)}async function Zh(n){const e=await iA(n),t=e.eventManager;return t.onListen=tP.bind(null,e.syncEngine),t.onUnlisten=iP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sP.bind(null,e.syncEngine),t}function _P(n,e,t={}){const s=new fi;return n.asyncQueue.enqueueAndForget(async()=>function(l,h,d,p,g){const _=new Mg({next:w=>{_.yu(),h.enqueueAndForget(()=>Dg(l,b));const C=w.docs.has(d);!C&&w.fromCache?g.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&p&&p.source==="server"?g.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),b=new Og(_f(d.path),_,{includeMetadataChanges:!0,Fa:!0});return Ng(l,b)}(await Zh(n),n.asyncQueue,e,t,s)),s.promise}function vP(n,e,t={}){const s=new fi;return n.asyncQueue.enqueueAndForget(async()=>function(l,h,d,p,g){const _=new Mg({next:w=>{_.yu(),h.enqueueAndForget(()=>Dg(l,b)),w.fromCache&&p.source==="server"?g.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),b=new Og(d,_,{includeMetadataChanges:!0,Fa:!0});return Ng(l,b)}(await Zh(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n,e,t){if(!t)throw new fe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EP(n,e,t,s){if(e===!0&&s===!0)throw new fe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JT(n){if(!ge.isDocumentKey(n))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function e0(n){if(ge.isDocumentKey(n))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function If(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=If(n);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="firestore.googleapis.com",t0=!0;class n0{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oA,this.ssl=t0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:t0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WO)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sA((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Ix;switch(s.type){case"firstParty":return new xx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=ZT.get(t);s&&(he("ComponentProvider","Removing Datastore"),ZT.delete(t),s.terminate())}(this),Promise.resolve()}}function TP(n,e,t,s={}){var a;n=yn(n,Cf);const l=ko(e),h=n._getSettings(),d=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&Yp(`https://${p}`),h.host!==oA&&h.host!==p&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},h),{host:p,ssl:l,emulatorOptions:s});if(!ss(g,d)&&(n._setSettings(g),s.mockUserToken)){let _,b;if(typeof s.mockUserToken=="string")_=s.mockUserToken,b=en.MOCK_USER;else{_=J0(s.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new en(w)}n._authCredentials=new Cx(new Xb(_,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class nn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class rs extends vs{constructor(e,t,s){super(e,t,_f(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new ge(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function Kn(n,e,...t){if(n=it(n),aA("collection","path",e),n instanceof Cf){const s=st.fromString(e,...t);return e0(s),new rs(n,null,s)}{if(!(n instanceof nn||n instanceof rs))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(st.fromString(e,...t));return e0(s),new rs(n.firestore,null,s)}}function Xe(n,e,...t){if(n=it(n),arguments.length===1&&(e=Zb.newId()),aA("doc","path",e),n instanceof Cf){const s=st.fromString(e,...t);return JT(s),new nn(n,null,new ge(s))}{if(!(n instanceof nn||n instanceof rs))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(st.fromString(e,...t));return JT(s),new nn(n.firestore,n instanceof rs?n.converter:null,new ge(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="AsyncQueue";class i0{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new qw(this,"async_queue_retry"),this.ju=()=>{const s=sp();s&&he(r0,"Visibility state changed to "+s.visibilityState),this.y_.A_()},this.Hu=e;const t=sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new fi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Lo(e))throw e;he(r0,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(s=>{throw this.Ku=s,this.Wu=!1,gi("INTERNAL UNHANDLED ERROR: ",s0(s)),s}).then(s=>(this.Wu=!1,s))));return this.Hu=t,t}enqueueAfterDelay(e,t,s){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=Ig.createAndSchedule(this,e,t,s,l=>this.Xu(l));return this.Uu.push(a),a}Ju(){this.Ku&&Te(47125,{ec:s0(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function s0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(n){return function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class _i extends Cf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new i0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i0(e),this._firestoreClient=void 0,await e}}}function hu(n,e){const t=typeof n=="object"?n:uf(),s=typeof n=="string"?n:Hh,a=ds(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=X0("firestore");l&&TP(a,...l)}return a}function Nf(n){if(n._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bP(n),n._firestoreClient}function bP(n){var e,t,s;const a=n._freezeSettings(),l=function(d,p,g,_){return new Kx(d,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,sA(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new pP(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do(Qt.fromBase64String(e))}catch(t){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Do(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=/^__.*__$/;class AP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mu(e,this.data,t,this.fieldTransforms)}}class lA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new _s(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{oc:n})}}class Lg{constructor(e,t,s,a,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:s,cc:!1});return a.lc(e),a}hc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:s,cc:!1});return a._c(),a}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Jh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(uA(this.oc)&&wP.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class SP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Af(e)}dc(e,t,s,a=!1){return new Lg({oc:e,methodName:t,Ec:s,path:$t.emptyPath(),cc:!1,Ic:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Of(n){const e=n._freezeSettings(),t=Af(n._databaseId);return new SP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cA(n,e,t,s,a,l={}){const h=n.dc(l.merge||l.mergeFields?2:0,e,t,a);zg("Data must be an object, but it was:",h,s);const d=hA(s,h);let p,g;if(l.merge)p=new Cn(h.fieldMask),g=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const b of l.mergeFields){const w=zp(e,b,t);if(!h.contains(w))throw new fe(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);dA(_,w)||_.push(w)}p=new Cn(_),g=h.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,g=h.fieldTransforms;return new AP(new pn(d),p,g)}class Pf extends xf{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pf}}class jg extends xf{_toFieldTransform(e){return new _O(e.path,new wu)}isEqual(e){return e instanceof jg}}function RP(n,e,t,s){const a=n.dc(1,e,t);zg("Data must be an object, but it was:",a,s);const l=[],h=pn.empty();ys(s,(p,g)=>{const _=Bg(e,p,t);g=it(g);const b=a.hc(_);if(g instanceof Pf)l.push(_);else{const w=ju(g,b);w!=null&&(l.push(_),h.set(_,w))}});const d=new Cn(l);return new lA(h,d,a.fieldTransforms)}function IP(n,e,t,s,a,l){const h=n.dc(1,e,t),d=[zp(e,s,t)],p=[a];if(l.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)d.push(zp(e,l[w])),p.push(l[w+1]);const g=[],_=pn.empty();for(let w=d.length-1;w>=0;--w)if(!dA(g,d[w])){const C=d[w];let R=p[w];R=it(R);const L=h.hc(C);if(R instanceof Pf)g.push(C);else{const V=ju(R,L);V!=null&&(g.push(C),_.set(C,V))}}const b=new Cn(g);return new lA(_,b,h.fieldTransforms)}function CP(n,e,t,s=!1){return ju(t,n.dc(s?4:3,e))}function ju(n,e){if(fA(n=it(n)))return zg("Unsupported field value:",e,n),hA(n,e);if(n instanceof xf)return function(s,a){if(!uA(a.oc))throw a.Tc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Tc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(s,a){const l=[];let h=0;for(const d of s){let p=ju(d,a.Pc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(n,e)}return function(s,a){if((s=it(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return pO(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Ot.fromDate(s);return{timestampValue:Qh(a.serializer,l)}}if(s instanceof Ot){const l=new Ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qh(a.serializer,l)}}if(s instanceof Vg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Do)return{bytesValue:xw(a.serializer,s._byteString)};if(s instanceof nn){const l=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw a.Tc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:_g(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Ug)return function(h,d){return{mapValue:{fields:{[aw]:{stringValue:ow},[Gh]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw d.Tc("VectorValues must only contain numeric values.");return mg(d.serializer,g)})}}}}}}(s,a);throw a.Tc(`Unsupported field value: ${If(s)}`)}(n,e)}function hA(n,e){const t={};return ew(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(n,(s,a)=>{const l=ju(a,e.uc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function fA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ot||n instanceof Vg||n instanceof Do||n instanceof nn||n instanceof xf||n instanceof Ug)}function zg(n,e,t){if(!fA(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const s=If(t);throw s==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+s)}}function zp(n,e,t){if((e=it(e))instanceof Df)return e._internalPath;if(typeof e=="string")return Bg(n,e);throw Jh("Field path arguments must be of type string or ",n,!1,void 0,t)}const NP=new RegExp("[~\\*/\\[\\]]");function Bg(n,e,t){if(e.search(NP)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Df(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jh(n,e,t,s,a){const l=s&&!s.isEmpty(),h=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${a}`),p+=")"),new fe(te.INVALID_ARGUMENT,d+n+p)}function dA(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DP extends mA{data(){return super.data()}}function kf(n,e){return typeof e=="string"?Bg(n,e):e instanceof Df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qg{}class gA extends qg{}function yA(n,e,...t){let s=[];e instanceof qg&&s.push(e),s=s.concat(t),function(l){const h=l.filter(p=>p instanceof Fg).length,d=l.filter(p=>p instanceof Mf).length;if(h>1||h>0&&d>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class Mf extends gA{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Mf(e,t,s)}_apply(e){const t=this._parse(e);return vA(e._query,t),new vs(e.firestore,e.converter,Np(e._query,t))}_parse(e){const t=Of(e.firestore);return function(l,h,d,p,g,_,b){let w;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){l0(b,_);const R=[];for(const L of b)R.push(o0(p,l,L));w={arrayValue:{values:R}}}else w=o0(p,l,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||l0(b,_),w=CP(d,h,b,_==="in"||_==="not-in");return St.create(g,_,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function xP(n,e,t){const s=e,a=kf("where",n);return Mf._create(a,s,t)}class Fg extends qg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fg(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let h=a;const d=l.getFlattenedFilters();for(const p of d)vA(h,p),h=Np(h,p)}(e._query,t),new vs(e.firestore,e.converter,Np(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hg extends gA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hg(e,t)}_apply(e){const t=function(a,l,h){if(a.startAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bu(l,h)}(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,function(a,l){const h=a.explicitOrderBy.concat([l]);return new jo(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function _A(n,e="asc"){const t=e,s=kf("orderBy",n);return Hg._create(s,t)}function o0(n,e,t){if(typeof(t=it(t))=="string"){if(t==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pw(e)&&t.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(st.fromString(t));if(!ge.isDocumentKey(s))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return TT(n,new ge(s))}if(t instanceof nn)return TT(n,t._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${If(t)}.`)}function l0(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vA(n,e){const t=function(a,l){for(const h of a)for(const d of h.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OP{convertValue(e,t="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ys(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,a;const l=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[Gh].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(h=>vt(h.doubleValue));return new Ug(l)}convertGeoPoint(e){return new Vg(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=yf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=os(e);return new Ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);Ke(Uw(s),9688,{name:e});const a=new Eu(s.get(1),s.get(3)),l=new ge(s.popFirst(5));return a.isEqual(t)||gi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TA extends mA{constructor(e,t,s,a,l,h){super(e,t,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(kf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Ph extends TA{data(e={}){return super.data(e)}}class bA{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new su(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Ph(this._firestore,this._userDataWriter,s.key,s,new su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(d=>{const p=new Ph(a._firestore,a._userDataWriter,d.doc.key,d.doc,new su(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new Ph(a._firestore,a._userDataWriter,d.doc.key,d.doc,new su(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),_=h.indexOf(d.doc.key)),{type:PP(d.type),doc:p,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(n){n=yn(n,nn);const e=yn(n.firestore,_i);return _P(Nf(e),n._key).then(t=>AA(e,n,t))}class Gg extends OP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function xo(n){n=yn(n,vs);const e=yn(n.firestore,_i),t=Nf(e),s=new Gg(e);return pA(n._query),vP(t,n._query).then(a=>new bA(e,s,n,a))}function zu(n,e,t){n=yn(n,nn);const s=yn(n.firestore,_i),a=EA(n.converter,e,t);return Uf(s,[cA(Of(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Gn.none())])}function $n(n,e,t,...s){n=yn(n,nn);const a=yn(n.firestore,_i),l=Of(a);let h;return h=typeof(e=it(e))=="string"||e instanceof Df?IP(l,"updateDoc",n._key,e,t,s):RP(l,"updateDoc",n._key,e),Uf(a,[h.toMutation(n._key,Gn.exists(!0))])}function Kg(n){return Uf(yn(n.firestore,_i),[new pg(n._key,Gn.none())])}function Vf(n,e){const t=yn(n.firestore,_i),s=Xe(n),a=EA(n.converter,e);return Uf(t,[cA(Of(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Gn.exists(!1))]).then(()=>s)}function wA(n,...e){var t,s,a;n=it(n);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||a0(e[h])||(l=e[h],h++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(a0(e[h])){const b=e[h];e[h]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[h+1]=(s=b.error)===null||s===void 0?void 0:s.bind(b),e[h+2]=(a=b.complete)===null||a===void 0?void 0:a.bind(b)}let p,g,_;if(n instanceof nn)g=yn(n.firestore,_i),_=_f(n._key.path),p={next:b=>{e[h]&&e[h](AA(g,n,b))},error:e[h+1],complete:e[h+2]};else{const b=yn(n,vs);g=yn(b.firestore,_i),_=b._query;const w=new Gg(g);p={next:C=>{e[h]&&e[h](new bA(g,w,b,C))},error:e[h+1],complete:e[h+2]},pA(n._query)}return function(w,C,R,L){const V=new Mg(L),z=new Og(C,V,R);return w.asyncQueue.enqueueAndForget(async()=>Ng(await Zh(w),z)),()=>{V.yu(),w.asyncQueue.enqueueAndForget(async()=>Dg(await Zh(w),z))}}(Nf(g),_,d,p)}function Uf(n,e){return function(s,a){const l=new fi;return s.asyncQueue.enqueueAndForget(async()=>aP(await yP(s),a,l)),l.promise}(Nf(n),e)}function AA(n,e,t){const s=t.docs.get(e._key),a=new Gg(n);return new TA(n,a,e._key,s,new su(t.hasPendingWrites,t.fromCache),e.converter)}function kP(){return new jg("serverTimestamp")}(function(e,t=!0){(function(a){Vo=a})(_a),sr(new Qn("firestore",(s,{instanceIdentifier:a,options:l})=>{const h=s.getProvider("app").getImmediate(),d=new _i(new Nx(s.getProvider("auth-internal")),new Ox(h,s.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(g.options.projectId,_)}(h,a),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),gn(uT,cT,e),gn(uT,cT,"esm2017")})();var SA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u0=ui.createContext&&ui.createContext(SA),MP=["attr","size","title"];function VP(n,e){if(n==null)return{};var t=UP(n,e),s,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)s=l[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function UP(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function ef(){return ef=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ef.apply(this,arguments)}function c0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function tf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?c0(Object(t),!0).forEach(function(s){LP(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c0(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function LP(n,e,t){return e=jP(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jP(n){var e=zP(n,"string");return typeof e=="symbol"?e:e+""}function zP(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RA(n){return n&&n.map((e,t)=>ui.createElement(e.tag,tf({key:t},e.attr),RA(e.child)))}function $g(n){return e=>ui.createElement(BP,ef({attr:tf({},n.attr)},e),RA(n.child))}function BP(n){var e=t=>{var{attr:s,size:a,title:l}=n,h=VP(n,MP),d=a||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),ui.createElement("svg",ef({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,h,{className:p,style:tf(tf({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&ui.createElement("title",null,l),n.children)};return u0!==void 0?ui.createElement(u0.Consumer,null,t=>e(t)):e(SA)}function qP(n){return $g({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(n)}function FP(n){return $g({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(n)}function HP(n){return $g({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(n)}const GP=()=>{const[n,e]=k.useState(!1),[t,s]=k.useState(null),[a,l]=k.useState(null),h=fs(),d=mf(),p=hu();k.useEffect(()=>{const w=hf(d,async C=>{if(s(C||null),C)try{const R=Xe(p,"user",C.uid),L=await Rt(R);L.exists()?l(L.data().rol):l(null)}catch(R){console.error("Error al obtener el rol del usuario:",R)}else l(null)});return()=>w()},[d,p]);const g=()=>{e(!n)},_=()=>{gD(d).then(()=>{alert("Sesin cerrada"),h("/login")}).catch(w=>{console.error("Error al cerrar sesin: ",w)})},b=()=>{h("/login")};return T.jsx("header",{className:"header",children:T.jsxs("div",{className:"header-content",children:[T.jsx(vo,{to:"/",className:"header-logo",children:"Store TI"}),T.jsxs("div",{className:"header-icons",children:[T.jsxs(vo,{to:"/kit",title:"Kit",className:"cart-link",children:[T.jsx(qP,{})," "]}),T.jsx(vo,{to:"/carrito",title:"Carrito",className:"cart-link",children:T.jsx(FP,{})}),T.jsxs("div",{className:"user-menu",children:[T.jsx("button",{onClick:g,className:"user-icon-btn",title:"Perfil",style:{background:"none",border:"none",color:"inherit"},children:t&&t.photoURL?T.jsx("img",{src:t.photoURL,alt:"Usuario",className:"user-icon-avatar"}):T.jsx(HP,{})}),n&&T.jsx("div",{className:"user-popup",children:t?T.jsxs(T.Fragment,{children:[T.jsx("h2",{children:"Perfil de Usuario"}),T.jsx("img",{src:t.photoURL||"default-avatar.png",alt:"Usuario",className:"user-avatar"}),T.jsx("h3",{children:t.displayName||"Nombre de Usuario"}),T.jsx("p",{children:t.email}),T.jsx("button",{className:"profile-button",onClick:()=>h("/perfil"),children:"Ver Perfil"}),a==="admin"&&T.jsx("button",{className:"admin-button",onClick:()=>h("/admin"),children:"Panel de Administrador"}),T.jsx("button",{className:"logout-button",onClick:_,children:"Cerrar Sesin"})]}):T.jsxs(T.Fragment,{children:[T.jsx("h2",{children:"Bienvenido!"}),T.jsx("p",{children:"Debes iniciar sesin para ver tu perfil."}),T.jsx("button",{className:"settings-button",onClick:b,children:"Iniciar Sesin"})]})})]})]})]})})},KP=()=>T.jsxs(T.Fragment,{children:[T.jsx(GP,{}),T.jsxs("main",{children:[T.jsx(WI,{})," "]})]});var $P="firebase",QP="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn($P,QP,"app");const IA="@firebase/installations",Qg="0.6.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1e4,NA=`w:${Qg}`,DA="FIS_v2",YP="https://firebaseinstallations.googleapis.com/v1",XP=60*60*1e3,WP="installations",ZP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},da=new ya(WP,ZP,JP);function xA(n){return n instanceof Xn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA({projectId:n}){return`${YP}/projects/${n}/installations`}function PA(n){return{token:n.token,requestStatus:2,expiresIn:tk(n.expiresIn),creationTime:Date.now()}}async function kA(n,e){const s=(await e.json()).error;return da.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function MA({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function ek(n,{refreshToken:e}){const t=MA(n);return t.append("Authorization",nk(e)),t}async function VA(n){const e=await n();return e.status>=500&&e.status<600?n():e}function tk(n){return Number(n.replace("s","000"))}function nk(n){return`${DA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=OA(n),a=MA(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const h={fid:t,authVersion:DA,appId:n.appId,sdkVersion:NA},d={method:"POST",headers:a,body:JSON.stringify(h)},p=await VA(()=>fetch(s,d));if(p.ok){const g=await p.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:PA(g.authToken)}}else throw await kA("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=/^[cdef][\w-]{21}$/,Bp="";function ak(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=ok(n);return sk.test(t)?t:Bp}catch{return Bp}}function ok(n){return ik(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=new Map;function jA(n,e){const t=Lf(n);zA(t,e),lk(t,e)}function zA(n,e){const t=LA.get(n);if(t)for(const s of t)s(e)}function lk(n,e){const t=uk();t&&t.postMessage({key:n,fid:e}),ck()}let aa=null;function uk(){return!aa&&"BroadcastChannel"in self&&(aa=new BroadcastChannel("[Firebase] FID Change"),aa.onmessage=n=>{zA(n.data.key,n.data.fid)}),aa}function ck(){LA.size===0&&aa&&(aa.close(),aa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="firebase-installations-database",fk=1,ma="firebase-installations-store";let op=null;function Yg(){return op||(op=sb(hk,fk,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ma)}}})),op}async function nf(n,e){const t=Lf(n),a=(await Yg()).transaction(ma,"readwrite"),l=a.objectStore(ma),h=await l.get(t);return await l.put(e,t),await a.done,(!h||h.fid!==e.fid)&&jA(n,e.fid),e}async function BA(n){const e=Lf(n),s=(await Yg()).transaction(ma,"readwrite");await s.objectStore(ma).delete(e),await s.done}async function jf(n,e){const t=Lf(n),a=(await Yg()).transaction(ma,"readwrite"),l=a.objectStore(ma),h=await l.get(t),d=e(h);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!h||h.fid!==d.fid)&&jA(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xg(n){let e;const t=await jf(n.appConfig,s=>{const a=dk(s),l=mk(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===Bp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function dk(n){const e=n||{fid:ak(),registrationStatus:0};return qA(e)}function mk(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(da.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=pk(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:gk(n)}:{installationEntry:e}}async function pk(n,e){try{const t=await rk(n,e);return nf(n.appConfig,t)}catch(t){throw xA(t)&&t.customData.serverCode===409?await BA(n.appConfig):await nf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function gk(n){let e=await h0(n.appConfig);for(;e.registrationStatus===1;)await UA(100),e=await h0(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Xg(n);return s||t}return e}function h0(n){return jf(n,e=>{if(!e)throw da.create("installation-not-found");return qA(e)})}function qA(n){return yk(n)?{fid:n.fid,registrationStatus:0}:n}function yk(n){return n.registrationStatus===1&&n.registrationTime+CA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k({appConfig:n,heartbeatServiceProvider:e},t){const s=vk(n,t),a=ek(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const h={installation:{sdkVersion:NA,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(h)},p=await VA(()=>fetch(s,d));if(p.ok){const g=await p.json();return PA(g)}else throw await kA("Generate Auth Token",p)}function vk(n,{fid:e}){return`${OA(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wg(n,e=!1){let t;const s=await jf(n.appConfig,l=>{if(!FA(l))throw da.create("not-registered");const h=l.authToken;if(!e&&bk(h))return l;if(h.requestStatus===1)return t=Ek(n,e),l;{if(!navigator.onLine)throw da.create("app-offline");const d=Ak(l);return t=Tk(n,d),d}});return t?await t:s.authToken}async function Ek(n,e){let t=await f0(n.appConfig);for(;t.authToken.requestStatus===1;)await UA(100),t=await f0(n.appConfig);const s=t.authToken;return s.requestStatus===0?Wg(n,e):s}function f0(n){return jf(n,e=>{if(!FA(e))throw da.create("not-registered");const t=e.authToken;return Sk(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Tk(n,e){try{const t=await _k(n,e),s=Object.assign(Object.assign({},e),{authToken:t});return await nf(n.appConfig,s),t}catch(t){if(xA(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await BA(n.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await nf(n.appConfig,s)}throw t}}function FA(n){return n!==void 0&&n.registrationStatus===2}function bk(n){return n.requestStatus===2&&!wk(n)}function wk(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+XP}function Ak(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Sk(n){return n.requestStatus===1&&n.requestTime+CA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(n){const e=n,{installationEntry:t,registrationPromise:s}=await Xg(e);return s?s.catch(console.error):Wg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(n,e=!1){const t=n;return await Ck(t),(await Wg(t,e)).token}async function Ck(n){const{registrationPromise:e}=await Xg(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(n){if(!n||!n.options)throw lp("App Configuration");if(!n.name)throw lp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw lp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function lp(n){return da.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="installations",Dk="installations-internal",xk=n=>{const e=n.getProvider("app").getImmediate(),t=Nk(e),s=ds(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Ok=n=>{const e=n.getProvider("app").getImmediate(),t=ds(e,HA).getImmediate();return{getId:()=>Rk(t),getToken:a=>Ik(t,a)}};function Pk(){sr(new Qn(HA,xk,"PUBLIC")),sr(new Qn(Dk,Ok,"PRIVATE"))}Pk();gn(IA,Qg);gn(IA,Qg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="analytics",kk="firebase_id",Mk="origin",Vk=60*1e3,Uk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new lf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dn=new ya("analytics","Analytics",Lk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n){if(!n.startsWith(Zg)){const e=Dn.create("invalid-gtag-resource",{gtagURL:n});return _n.warn(e.message),""}return n}function GA(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function zk(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Bk(n,e){const t=zk("firebase-js-sdk-policy",{createScriptURL:jk}),s=document.createElement("script"),a=`${Zg}?l=${n}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function qk(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Fk(n,e,t,s,a,l){const h=s[a];try{if(h)await e[h];else{const p=(await GA(t)).find(g=>g.measurementId===a);p&&await e[p.appId]}}catch(d){_n.error(d)}n("config",a,l)}async function Hk(n,e,t,s,a){try{let l=[];if(a&&a.send_to){let h=a.send_to;Array.isArray(h)||(h=[h]);const d=await GA(t);for(const p of h){const g=d.find(b=>b.measurementId===p),_=g&&e[g.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",s,a||{})}catch(l){_n.error(l)}}function Gk(n,e,t,s){async function a(l,...h){try{if(l==="event"){const[d,p]=h;await Hk(n,e,t,d,p)}else if(l==="config"){const[d,p]=h;await Fk(n,e,t,s,d,p)}else if(l==="consent"){const[d,p]=h;n("consent",d,p)}else if(l==="get"){const[d,p,g]=h;n("get",d,p,g)}else if(l==="set"){const[d]=h;n("set",d)}else n(l,...h)}catch(d){_n.error(d)}}return a}function Kk(n,e,t,s,a){let l=function(...h){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=Gk(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function $k(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Zg)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=30,Yk=1e3;class Xk{constructor(e={},t=Yk){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const KA=new Xk;function Wk(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Zk(n){var e;const{appId:t,apiKey:s}=n,a={method:"GET",headers:Wk(s)},l=Uk.replace("{app-id}",t),h=await fetch(l,a);if(h.status!==200&&h.status!==304){let d="";try{const p=await h.json();!((e=p.error)===null||e===void 0)&&e.message&&(d=p.error.message)}catch{}throw Dn.create("config-fetch-failed",{httpStatus:h.status,responseMessage:d})}return h.json()}async function Jk(n,e=KA,t){const{appId:s,apiKey:a,measurementId:l}=n.options;if(!s)throw Dn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:s};throw Dn.create("no-api-key")}const h=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new nM;return setTimeout(async()=>{d.abort()},Vk),$A({appId:s,apiKey:a,measurementId:l},h,d,e)}async function $A(n,{throttleEndTimeMillis:e,backoffCount:t},s,a=KA){var l;const{appId:h,measurementId:d}=n;try{await eM(s,e)}catch(p){if(d)return _n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:h,measurementId:d};throw p}try{const p=await Zk(n);return a.deleteThrottleMetadata(h),p}catch(p){const g=p;if(!tM(g)){if(a.deleteThrottleMetadata(h),d)return _n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:h,measurementId:d};throw p}const _=Number((l=g==null?void 0:g.customData)===null||l===void 0?void 0:l.httpStatus)===503?kE(t,a.intervalMillis,Qk):kE(t,a.intervalMillis),b={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return a.setThrottleMetadata(h,b),_n.debug(`Calling attemptFetch again in ${_} millis`),$A(n,b,s,a)}}function eM(n,e){return new Promise((t,s)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),s(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function tM(n){if(!(n instanceof Xn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class nM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function rM(n,e,t,s,a){if(a&&a.global){n("event",t,s);return}else{const l=await e,h=Object.assign(Object.assign({},s),{send_to:l});n("event",t,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(){if(tb())try{await nb()}catch(n){return _n.warn(Dn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return _n.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function sM(n,e,t,s,a,l,h){var d;const p=Jk(n);p.then(C=>{t[C.measurementId]=C.appId,n.options.measurementId&&C.measurementId!==n.options.measurementId&&_n.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${C.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(C=>_n.error(C)),e.push(p);const g=iM().then(C=>{if(C)return s.getId()}),[_,b]=await Promise.all([p,g]);$k(l)||Bk(l,_.measurementId),a("js",new Date);const w=(d=h==null?void 0:h.config)!==null&&d!==void 0?d:{};return w[Mk]="firebase",w.update=!0,b!=null&&(w[kk]=b),a("config",_.measurementId,w),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.app=e}_delete(){return delete fu[this.app.options.appId],Promise.resolve()}}let fu={},d0=[];const m0={};let up="dataLayer",oM="gtag",p0,QA,g0=!1;function lM(){const n=[];if(eb()&&n.push("This is a browser extension environment."),QC()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,a)=>`(${a+1}) ${s}`).join(" "),t=Dn.create("invalid-analytics-context",{errorInfo:e});_n.warn(t.message)}}function uM(n,e,t){lM();const s=n.options.appId;if(!s)throw Dn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)_n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dn.create("no-api-key");if(fu[s]!=null)throw Dn.create("already-exists",{id:s});if(!g0){qk(up);const{wrappedGtag:l,gtagCore:h}=Kk(fu,d0,m0,up,oM);QA=l,p0=h,g0=!0}return fu[s]=sM(n,d0,m0,e,p0,up,t),new aM(n)}function cM(n=uf()){n=it(n);const e=ds(n,rf);return e.isInitialized()?e.getImmediate():hM(n)}function hM(n,e={}){const t=ds(n,rf);if(t.isInitialized()){const a=t.getImmediate();if(ss(e,t.getOptions()))return a;throw Dn.create("already-initialized")}return t.initialize({options:e})}function fM(n,e,t,s){n=it(n),rM(QA,fu[n.app.options.appId],e,t,s).catch(a=>_n.error(a))}const y0="@firebase/analytics",_0="0.10.13";function dM(){sr(new Qn(rf,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return uM(s,a,t)},"PUBLIC")),sr(new Qn("analytics-internal",n,"PRIVATE")),gn(y0,_0),gn(y0,_0,"esm2017");function n(e){try{const t=e.getProvider(rf).getImmediate();return{logEvent:(s,a,l)=>fM(t,s,a,l)}}catch(t){throw Dn.create("interop-component-reg-failed",{reason:t})}}}dM();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebasestorage.googleapis.com",XA="storageBucket",mM=2*60*1e3,pM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends Xn{constructor(e,t,s=0){super(cp(e),`Firebase Storage: ${t} (${cp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mt||(mt={}));function cp(n){return"storage/"+n}function Jg(){const n="An unknown error occurred, please check the error payload for server response.";return new pt(mt.UNKNOWN,n)}function gM(n){return new pt(mt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function yM(n){return new pt(mt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _M(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(mt.UNAUTHENTICATED,n)}function vM(){return new pt(mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EM(n){return new pt(mt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function TM(){return new pt(mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bM(){return new pt(mt.CANCELED,"User canceled the upload/download.")}function wM(n){return new pt(mt.INVALID_URL,"Invalid URL '"+n+"'.")}function AM(n){return new pt(mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function SM(){return new pt(mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XA+"' property when initializing the app?")}function RM(){return new pt(mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IM(){return new pt(mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CM(n){return new pt(mt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function qp(n){return new pt(mt.INVALID_ARGUMENT,n)}function WA(){return new pt(mt.APP_DELETED,"The Firebase app was deleted.")}function NM(n){return new pt(mt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function du(n,e){return new pt(mt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Jl(n){throw new pt(mt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Nn.makeFromUrl(e,t)}catch{return new Nn(e,"")}if(s.path==="")return s;throw AM(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";function l(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const h="(/(.*))?$",d=new RegExp("^gs://"+a+h,"i"),p={bucket:1,path:3};function g(se){se.path_=decodeURIComponent(se.path)}const _="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${b}/${_}/b/${a}/o${w}`,"i"),R={bucket:1,path:3},L=t===YA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",z=new RegExp(`^https?://${L}/${a}/${V}`,"i"),q=[{regex:d,indices:p,postModify:l},{regex:C,indices:R,postModify:g},{regex:z,indices:{bucket:1,path:2},postModify:g}];for(let se=0;se<q.length;se++){const ae=q[se],ie=ae.regex.exec(e);if(ie){const O=ie[ae.indices.bucket];let I=ie[ae.indices.path];I||(I=""),s=new Nn(O,I),ae.postModify(s);break}}if(s==null)throw wM(e);return s}}class DM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(n,e,t){let s=1,a=null,l=null,h=!1,d=0;function p(){return d===2}let g=!1;function _(...V){g||(g=!0,e.apply(null,V))}function b(V){a=setTimeout(()=>{a=null,n(C,p())},V)}function w(){l&&clearTimeout(l)}function C(V,...z){if(g){w();return}if(V){w(),_.call(null,V,...z);return}if(p()||h){w(),_.call(null,V,...z);return}s<64&&(s*=2);let q;d===1?(d=2,q=0):q=(s+Math.random())*1e3,b(q)}let R=!1;function L(V){R||(R=!0,w(),!g&&(a!==null?(V||(d=2),clearTimeout(a),b(0)):V||(d=1)))}return b(0),l=setTimeout(()=>{h=!0,L(!0)},t),L}function OM(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){return n!==void 0}function kM(n){return typeof n=="object"&&!Array.isArray(n)}function ey(n){return typeof n=="string"||n instanceof String}function v0(n){return ty()&&n instanceof Blob}function ty(){return typeof Blob<"u"}function E0(n,e,t,s){if(s<e)throw qp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw qp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function ZA(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const a=e(s)+"="+e(n[s]);t=t+a+"&"}return t=t.slice(0,-1),t}var oa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(oa||(oa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,t,s,a,l,h,d,p,g,_,b,w=!0,C=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=d,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=b,this.retry=w,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,L)=>{this.resolve_=R,this.reject_=L,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new vh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=d=>{const p=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const d=l.getErrorCode()===oa.NO_ERROR,p=l.getStatus();if(!d||MM(p,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===oa.ABORT;s(!1,new vh(!1,null,_));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new vh(g,l))})},t=(s,a)=>{const l=this.resolve_,h=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());PM(p)?l(p):l()}catch(p){h(p)}else if(d!==null){const p=Jg();p.serverResponse=d.getErrorText(),this.errorCallback_?h(this.errorCallback_(d,p)):h(p)}else if(a.canceled){const p=this.appDelete_?WA():bM();h(p)}else{const p=TM();h(p)}};this.canceled_?t(!1,new vh(!1,null,!0)):this.backoffId_=xM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vh{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function UM(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function LM(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jM(n,e){e&&(n["X-Firebase-GMPID"]=e)}function zM(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function BM(n,e,t,s,a,l,h=!0,d=!1){const p=ZA(n.urlParams),g=n.url+p,_=Object.assign({},n.headers);return jM(_,e),UM(_,t),LM(_,l),zM(_,s),new VM(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,h,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FM(...n){const e=qM();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(ty())return new Blob(n);throw new pt(mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function HM(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(n){if(typeof atob>"u")throw CM("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hp{constructor(e,t){this.data=e,this.contentType=t||null}}function KM(n,e){switch(n){case Ir.RAW:return new hp(JA(e));case Ir.BASE64:case Ir.BASE64URL:return new hp(eS(n,e));case Ir.DATA_URL:return new hp(QM(e),YM(e))}throw Jg()}function JA(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,h=n.charCodeAt(++t);s=65536|(l&1023)<<10|h&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function $M(n){let e;try{e=decodeURIComponent(n)}catch{throw du(Ir.DATA_URL,"Malformed data URL.")}return JA(e)}function eS(n,e){switch(n){case Ir.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw du(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ir.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw du(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=GM(e)}catch(a){throw a.message.includes("polyfill")?a:du(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}class tS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw du(Ir.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=XM(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function QM(n){const e=new tS(n);return e.base64?eS(Ir.BASE64,e.rest):$M(e.rest)}function YM(n){return new tS(n).contentType}function XM(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){let s=0,a="";v0(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(v0(this.data_)){const s=this.data_,a=HM(s,e,t);return a===null?null:new Zi(a)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Zi(s,!0)}}static getBlob(...e){if(ty()){const t=e.map(s=>s instanceof Zi?s.data_:s);return new Zi(FM.apply(null,t))}else{const t=e.map(h=>ey(h)?KM(Ir.RAW,h).data:h.data_);let s=0;t.forEach(h=>{s+=h.byteLength});const a=new Uint8Array(s);let l=0;return t.forEach(h=>{for(let d=0;d<h.length;d++)a[l++]=h[d]}),new Zi(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n){let e;try{e=JSON.parse(n)}catch{return null}return kM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ZM(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function rS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(n,e){return e}class un{constructor(e,t,s,a){this.server=e,this.local=t||e,this.writable=!!s,this.xform=a||JM}}let Eh=null;function eV(n){return!ey(n)||n.length<2?n:rS(n)}function iS(){if(Eh)return Eh;const n=[];n.push(new un("bucket")),n.push(new un("generation")),n.push(new un("metageneration")),n.push(new un("name","fullPath",!0));function e(l,h){return eV(h)}const t=new un("name");t.xform=e,n.push(t);function s(l,h){return h!==void 0?Number(h):h}const a=new un("size");return a.xform=s,n.push(a),n.push(new un("timeCreated")),n.push(new un("updated")),n.push(new un("md5Hash",null,!0)),n.push(new un("cacheControl",null,!0)),n.push(new un("contentDisposition",null,!0)),n.push(new un("contentEncoding",null,!0)),n.push(new un("contentLanguage",null,!0)),n.push(new un("contentType",null,!0)),n.push(new un("metadata","customMetadata",!0)),Eh=n,Eh}function tV(n,e){function t(){const s=n.bucket,a=n.fullPath,l=new Nn(s,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function nV(n,e,t){const s={};s.type="file";const a=t.length;for(let l=0;l<a;l++){const h=t[l];s[h.local]=h.xform(s,e[h.server])}return tV(s,n),s}function sS(n,e,t){const s=nS(e);return s===null?null:nV(n,s,t)}function rV(n,e,t,s){const a=nS(e);if(a===null||!ey(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const h=encodeURIComponent;return l.split(",").map(g=>{const _=n.bucket,b=n.fullPath,w="/b/"+h(_)+"/o/"+h(b),C=ny(w,t,s),R=ZA({alt:"media",token:g});return C+R})[0]}function iV(n,e){const t={},s=e.length;for(let a=0;a<s;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class aS{constructor(e,t,s,a){this.url=e,this.method=t,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(n){if(!n)throw Jg()}function sV(n,e){function t(s,a){const l=sS(n,a,e);return oS(l!==null),l}return t}function aV(n,e){function t(s,a){const l=sS(n,a,e);return oS(l!==null),rV(l,a,n.host,n._protocol)}return t}function lS(n){function e(t,s){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=vM():a=_M():t.getStatus()===402?a=yM(n.bucket):t.getStatus()===403?a=EM(n.path):a=s,a.status=t.getStatus(),a.serverResponse=s.serverResponse,a}return e}function oV(n){const e=lS(n);function t(s,a){let l=e(s,a);return s.getStatus()===404&&(l=gM(n.path)),l.serverResponse=a.serverResponse,l}return t}function lV(n,e,t){const s=e.fullServerUrl(),a=ny(s,n.host,n._protocol),l="GET",h=n.maxOperationRetryTime,d=new aS(a,l,aV(n,t),h);return d.errorHandler=oV(e),d}function uV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function cV(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=uV(null,e)),s}function hV(n,e,t,s,a){const l=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function d(){let q="";for(let se=0;se<2;se++)q=q+Math.random().toString().slice(2);return q}const p=d();h["Content-Type"]="multipart/related; boundary="+p;const g=cV(e,s,a),_=iV(g,t),b="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,w=`\r
--`+p+"--",C=Zi.getBlob(b,s,w);if(C===null)throw RM();const R={name:g.fullPath},L=ny(l,n.host,n._protocol),V="POST",z=n.maxUploadRetryTime,U=new aS(L,V,sV(n,t),z);return U.urlParams=R,U.headers=h,U.body=C.uploadData(),U.errorHandler=lS(e),U}class fV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,a,l){if(this.sent_)throw Jl("cannot .send() more than once");if(ko(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const h in l)l.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,l[h].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dV extends fV{initXhr(){this.xhr_.responseType="text"}}function uS(){return new dV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t){this._service=e,t instanceof Nn?this._location=t:this._location=Nn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pa(e,t)}get root(){const e=new Nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rS(this._location.path)}get storage(){return this._service}get parent(){const e=WM(this._location.path);if(e===null)return null;const t=new Nn(this._location.bucket,e);return new pa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw NM(e)}}function mV(n,e,t){n._throwIfRoot("uploadBytes");const s=hV(n.storage,n._location,iS(),new Zi(e,!0),t);return n.storage.makeRequestWithTokens(s,uS).then(a=>({metadata:a,ref:n}))}function pV(n){n._throwIfRoot("getDownloadURL");const e=lV(n.storage,n._location,iS());return n.storage.makeRequestWithTokens(e,uS).then(t=>{if(t===null)throw IM();return t})}function gV(n,e){const t=ZM(n._location.path,e),s=new Nn(n._location.bucket,t);return new pa(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(n){return/^[A-Za-z]+:\/\//.test(n)}function _V(n,e){return new pa(n,e)}function cS(n,e){if(n instanceof ry){const t=n;if(t._bucket==null)throw SM();const s=new pa(t,t._bucket);return e!=null?cS(s,e):s}else return e!==void 0?gV(n,e):n}function vV(n,e){if(e&&yV(e)){if(n instanceof ry)return _V(n,e);throw qp("To use ref(service, url), the first argument must be a Storage instance.")}else return cS(n,e)}function T0(n,e){const t=e==null?void 0:e[XA];return t==null?null:Nn.makeFromBucketSpec(t,n)}function EV(n,e,t,s={}){n.host=`${e}:${t}`;const a=ko(e);a&&Yp(`https://${n.host}`),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:J0(l,n.app.options.projectId))}class ry{constructor(e,t,s,a,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=YA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mM,this._maxUploadRetryTime=pM,this._requests=new Set,a!=null?this._bucket=Nn.makeFromBucketSpec(a,this._host):this._bucket=T0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nn.makeFromBucketSpec(this._url,e):this._bucket=T0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pa(this,e)}_makeRequest(e,t,s,a,l=!0){if(this._deleted)return new DM(WA());{const h=BM(e,this._appId,s,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const b0="@firebase/storage",w0="0.13.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="storage";function TV(n,e,t){return n=it(n),mV(n,e,t)}function bV(n){return n=it(n),pV(n)}function wV(n,e){return n=it(n),vV(n,e)}function AV(n=uf(),e){n=it(n);const s=ds(n,hS).getImmediate({identifier:e}),a=X0("storage");return a&&SV(s,...a),s}function SV(n,e,t,s={}){EV(n,e,t,s)}function RV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new ry(t,s,a,e,_a)}function IV(){sr(new Qn(hS,RV,"PUBLIC").setMultipleInstances(!0)),gn(b0,w0,""),gn(b0,w0,"esm2017")}IV();const CV={apiKey:"AIzaSyB3PdJVaf-BJzFKEcKa5eIwU6x8rxFgOqk",authDomain:"e-comerceti.firebaseapp.com",projectId:"e-comerceti",storageBucket:"e-comerceti.firebasestorage.app",databaseURL:"https://e-comerceti-default-rtdb.firebaseio.com",messagingSenderId:"758710169146",appId:"1:758710169146:web:024362d2458fd82370cf03",measurementId:"G-2WR9T5DNDV"},zf=ab(CV);cM(zf);const la=mf(zf),Le=hu(zf),NV=AV(zf),DV=async()=>(await xo(Kn(Le,"productos"))).docs.map(t=>({id:t.id,...t.data()})),fS=async(n,e)=>{const t=wV(NV,`IMG Productos/${e}`);return await TV(t,n),await bV(t)},xV=async(n,e)=>{const t=await fS(e,`${Date.now()}_${e.name}`),s={...n,imageUrl:t,createdAt:new Date};return(await Vf(Kn(Le,"productos"),s)).id},OV=async(n,e,t=null)=>{const s=Xe(Le,"productos",n);if(t){const a=await fS(t,`${Date.now()}_${t.name}`);e.imageUrl=a}await $n(s,e)},dS=k.createContext(),mS=({children:n})=>{const[e,t]=k.useState([]),[s,a]=k.useState(""),[l,h]=k.useState(null),d=()=>setTimeout(()=>a(""),3e3);k.useEffect(()=>{(async()=>{const w=la.currentUser;if(!w)return;const C=w.uid;h(C);try{const R=Xe(Le,"carritodecompras",C),L=await Rt(R);L.exists()&&t(L.data().productos||[])}catch(R){console.error("Error al cargar el carrito:",R)}})()},[]);const p=async b=>{try{const w=Xe(Le,"carritodecompras",l);await $n(w,{productos:b})}catch(w){console.error("Error sincronizando carrito en Firestore:",w)}},g=async b=>{const w=la.currentUser;if(!w){a("Debes iniciar sesin para agregar productos."),d();return}l||h(w.uid);try{const C=Xe(Le,"productos",b.id),R=await Rt(C);if(!R.exists()){a("Producto no encontrado."),d();return}const L=R.data().cantidad||0,V=e.find(ae=>ae.id===b.id),z=(V==null?void 0:V.cantidad)||0,U=b.cantidad||1;if(z+U>L){a(`Solo puedes agregar hasta ${L} unidades de "${b.nombre}".`),d();return}const q=V?e.map(ae=>ae.id===b.id?{...ae,cantidad:ae.cantidad+U}:ae):[...e,{...b,cantidad:U}];t(q);const se=Xe(Le,"carritodecompras",w.uid);await zu(se,{clienteId:w.uid,productos:q},{merge:!0}),a(`"${b.nombre}" agregado al carrito.`)}catch(C){console.error("Error al agregar al carrito:",C),a("Error al agregar al carrito.")}finally{d()}},_=async(b,w)=>{if(!l)return;const C=e.find(R=>R.id===b);if(C){if(w<1){if(!window.confirm("Eliminar este producto del carrito?"))return;const R=e.filter(L=>L.id!==b);t(R),await p(R);try{const L=Xe(Le,"productos",b),V=await Rt(L);if(V.exists()){const U=(V.data().cantidad||0)+C.cantidad;await $n(L,{cantidad:U})}}catch(L){console.error("Error al devolver stock:",L)}a("Producto eliminado y cantidad devuelta al inventario."),d();return}try{const R=Xe(Le,"productos",b),L=await Rt(R);if(!L.exists()){a("Producto no encontrado."),d();return}const V=L.data().cantidad||0;if(w>V){a(`Solo hay ${V} unidades disponibles.`),d();return}const z=e.map(U=>U.id===b?{...U,cantidad:w}:U);t(z),await p(z),a("Cantidad actualizada.")}catch(R){console.error("Error al actualizar cantidad:",R),a("Error al actualizar la cantidad.")}finally{d()}}};return T.jsx(dS.Provider,{value:{cartItems:e,addToCart:g,updateQuantity:_,clienteId:l,setCartItems:t,alertMessage:s},children:n})},Bf=()=>k.useContext(dS),pS=k.createContext(),gS=({children:n})=>{const[e,t]=k.useState(null),[s,a]=k.useState("cliente"),[l,h]=k.useState("");return k.useEffect(()=>{dD(la,Pb).then(()=>{const d=hf(la,async p=>{if(t(p),p)try{const g=Xe(Le,"users",p.uid),_=await Rt(g);if(_.exists()){const b=_.data();a(b.role||"cliente"),h(b.username||b.displayName||b.nombre||p.displayName||"")}else a("cliente"),h(p.displayName||"")}catch(g){console.error("Error al obtener datos de Firestore:",g),a("cliente"),h((p==null?void 0:p.displayName)||"")}else a("cliente"),h("")});return()=>d()}).catch(d=>{console.error("Error al establecer persistencia de sesin:",d)})},[]),T.jsx(pS.Provider,{value:{user:e,userRole:s,userName:l},children:n})},Bu=()=>k.useContext(pS),iy=({totalAmount:n})=>{const e=k.useRef(),{setCartItems:t}=Bf(),{user:s}=Bu(),[a,l]=k.useState(18),[h,d]=k.useState(!1);if(k.useEffect(()=>{(async()=>{if(document.querySelector('script[src*="paypal.com/sdk/js"]'))d(!0);else{const b=document.createElement("script");b.src="https://www.paypal.com/sdk/js?client-id=AfP7Juwwa59waiDlb7Btd_H2JzgfgpTesyqWSEg_0KB-8uxKtH5rwBQtqUSG8IceS9IT1PFgFbgzsB1a&currency=USD",b.async=!0,b.onload=()=>d(!0),document.body.appendChild(b)}})()},[]),k.useEffect(()=>{(async()=>{var _;try{const w=await(await fetch("https://v6.exchangerate-api.com/v6/8ccd450e55ace3d67099de6f/latest/USD")).json();(w==null?void 0:w.result)==="success"&&((_=w.conversion_rates)!=null&&_.MXN)?l(w.conversion_rates.MXN):(console.error("No se obtuvo el tipo de cambio MXN"),l(null))}catch(b){console.error("Error al obtener tipo de cambio:",b),l(null)}})()},[]),k.useEffect(()=>{let g=!0;const _=typeof n=="number"&&n>=1,b=typeof a=="number"&&a>0;if(!h||!window.paypal||!_||!b||!s||!e.current)return;e.current.innerHTML="";const w=n/a;if(isNaN(w)){console.error("totalUSD invlido:",w);return}return window.paypal.Buttons({createOrder:(C,R)=>R.order.create({purchase_units:[{amount:{value:w.toFixed(2),currency_code:"USD"},description:"Compra en Tienda de Electrnica"}]}),onApprove:async(C,R)=>{try{const L=await R.order.capture();if(console.log("Pago completado:",L),s&&g){const V=Xe(Le,"carritodecompras",s.uid),z=[],U=await Rt(V);if(U.exists()){const se=U.data();z.push(...se.productos||[])}const q={};s.direccion&&(q.direccion=s.direccion),s.displayName&&(q.displayName=s.displayName),s.email&&(q.email=s.email),s.imagen&&(q.imagen=s.imagen),s.nombre&&(q.nombre=s.nombre),s.photoURL&&(q.photoURL=s.photoURL),s.rol&&(q.rol=s.rol),s.telefono&&(q.telefono=s.telefono),s.uid&&(q.uid=s.uid),await Vf(Kn(Le,"pedidos"),{clienteId:s.uid,productos:z,totalMXN:n,totalUSD:w.toFixed(2),paypalOrderId:L.id,fecha:kP(),estado:"pendiente",metodoPago:"PayPal",...q}),console.log("Pedido guardado en Firebase correctamente."),await $n(V,{productos:[]}),t([]),alert("Pago exitoso! Gracias por tu compra.")}}catch(L){console.error("Error en onApprove:",L),alert("Hubo un error al procesar tu pago o guardar el pedido. Por favor, contacta soporte.")}},onError:C=>{console.error("Error en el pago:",C),alert("Ocurri un error al procesar el pago.")}}).render(e.current),()=>{g=!1}},[h,n,a,s,t]),a===null)return T.jsx("p",{children:"No se pudo obtener el tipo de cambio. Intenta ms tarde."});if(typeof n!="number"||n<1)return T.jsx("p",{children:"No se puede procesar el pago. El monto mnimo es $1.00 MXN."});const p=n/a;return T.jsxs(T.Fragment,{children:[T.jsxs("p",{children:["Total: $",n.toFixed(2)," MXN (~$",p.toFixed(2)," USD)"]}),T.jsx("div",{ref:e})]})},PV=()=>{const{cartItems:n,updateQuantity:e,setCartItems:t,alertMessage:s}=Bf(),[a,l]=k.useState({}),{user:h}=Bu(),d=h==null?void 0:h.uid,[p,g]=k.useState(null),[_,b]=k.useState(!1);k.useEffect(()=>{(async()=>{if(!d)return;const q=Xe(Le,"carritodecompras",d),se=await Rt(q);if(se.exists()){const ae=se.data().productos||[];t(ae);const ie=ae.map(P=>P.id),O=ie.map(P=>Rt(Xe(Le,"productos",P))),D=(await Promise.all(O)).reduce((P,B,H)=>(B.exists()&&(P[ie[H]]=B.data().cantidad||0),P),{});l(D)}})()},[d,t]);const w=async(U,q)=>{if(q<1)return;const se=a[U]||0;if(q>se){alert(`Solo hay ${se} unidades disponibles de este producto.`);return}const ae=n.map(I=>I.id===U?{...I,cantidad:q}:I);t(ae);const ie=Xe(Le,"carritodecompras",d),O=await Rt(ie);if(O.exists()){const D=O.data().productos.map(P=>P.id===U?{...P,cantidad:q}:P);await $n(ie,{productos:D})}},C=U=>{g(U),b(!0)},R=async()=>{const U=p.id,q=p.cantidad,se=n.filter(D=>D.id!==U);t(se);const ae=Xe(Le,"carritodecompras",d),ie=await Rt(ae);if(ie.exists()){const P=ie.data().productos.filter(B=>B.id!==U);await $n(ae,{productos:P})}const O=Xe(Le,"productos",U),I=await Rt(O);if(I.exists()){const D=I.data().cantidad||0;await $n(O,{cantidad:D+q})}b(!1),g(null)},L=18,V=n.reduce((U,q)=>{const se=q.precio*(q.precioUnidad==="USD"?L:1),ae=parseInt(q.cantidad)||0;return U+se*ae},0),z=[...new Map(n.map(U=>[U.id,U])).values()];return T.jsxs("div",{className:"carrito-container",children:[T.jsx("h1",{children:"Carrito de Compras"}),s&&T.jsx("div",{className:"alert",children:s}),z.length===0?T.jsx("p",{className:"vacio",children:"Tu carrito est vaco."}):z.map(U=>{const q=U.precioUnidad==="USD"?U.precio*L:U.precio;return T.jsxs("div",{className:"producto",children:[T.jsx("img",{src:U.imageUrl,alt:U.nombre}),T.jsxs("div",{className:"info",children:[T.jsx("h3",{children:U.nombre}),T.jsxs("p",{className:"precio",children:["$",q," MXN"]}),T.jsxs("p",{className:"stock",children:["Stock disponible: ",a[U.id]]})]}),T.jsxs("div",{className:"cantidad",children:[T.jsx("button",{onClick:()=>w(U.id,U.cantidad-1),disabled:U.cantidad<=1,children:"-"}),T.jsx("span",{children:U.cantidad}),T.jsx("button",{onClick:()=>w(U.id,U.cantidad+1),disabled:U.cantidad>=a[U.id],children:"+"})]}),T.jsx("button",{className:"btn-eliminar",onClick:()=>C(U),children:""})]},U.id)}),T.jsx("hr",{}),T.jsxs("div",{className:"total",children:["Total: $",V.toFixed(2)," MXN"]}),z.length>0&&T.jsx(iy,{totalAmount:V}),_&&T.jsx("div",{className:"modal",children:T.jsxs("div",{className:"modal-content",children:[T.jsx("h3",{children:"Eliminar producto?"}),T.jsxs("p",{children:["Ests seguro de que deseas eliminar ",T.jsx("strong",{children:p==null?void 0:p.nombre})," del carrito?"]}),T.jsxs("div",{className:"modal-buttons",children:[T.jsx("button",{onClick:R,children:"S, eliminar"}),T.jsx("button",{onClick:()=>b(!1),children:"Cancelar"})]})]})})]})},kV=()=>{const[n,e]=k.useState(!1),[t,s]=k.useState(""),[a,l]=k.useState(""),[h,d]=k.useState(""),[p,g]=k.useState(""),[_,b]=k.useState(""),[w,C]=k.useState(!1),R=async U=>{if(U)try{const q=Xe(Le,"user",U.uid);(await Rt(q)).exists()?console.log("Usuario ya existe, no se actualiz el rol."):await zu(q,{uid:U.uid,email:U.email,displayName:U.displayName||p||"",photoURL:U.photoURL||"",rol:"cliente"})}catch(q){console.error("Error guardando el usuario en Firestore:",q)}},L=async U=>{U.preventDefault();try{const q=await fD(la,t,a);await R(q.user),window.location.href="/"}catch{b("Error al iniciar sesin. Verifica tus credenciales.")}},V=async U=>{if(U.preventDefault(),a!==h){b("Las contraseas no coinciden.");return}if(!w){b("Debes aceptar los Trminos y Condiciones.");return}try{const q=await hD(la,t,a);await R({...q.user,displayName:p}),window.location.href="/"}catch{b("Error al crear la cuenta. Intenta con otro correo.")}},z=async()=>{const U=new ai;try{const q=await MD(la,U);await R(q.user),window.location.href="/"}catch{b("Error al iniciar sesin con Google.")}};return T.jsx("div",{className:"login-page",children:T.jsxs("div",{className:"login-container",children:[T.jsx("h2",{children:n?"Crear Cuenta":"Iniciar Sesin"}),T.jsx("p",{children:n?"Completa los campos para registrarte":"Ingrese su correo electrnico para acceder a esta aplicacin"}),_&&T.jsx("p",{className:"error-message",children:_}),T.jsxs("form",{onSubmit:n?V:L,children:[n&&T.jsxs(T.Fragment,{children:[T.jsx("label",{htmlFor:"name",children:"Nombre Completo"}),T.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Nombre Completo",value:p,onChange:U=>g(U.target.value),required:!0})]}),T.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),T.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Correo Electrnico",value:t,onChange:U=>s(U.target.value),required:!0}),T.jsx("label",{htmlFor:"password",children:"Contrasea"}),T.jsx("input",{type:"password",id:"password",name:"password",placeholder:"Contrasea",value:a,onChange:U=>l(U.target.value),required:!0}),n&&T.jsxs(T.Fragment,{children:[T.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea"}),T.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirmar Contrasea",value:h,onChange:U=>d(U.target.value),required:!0}),T.jsxs("div",{className:"terms-container",children:[T.jsx("input",{type:"checkbox",id:"terms",checked:w,onChange:U=>C(U.target.checked),required:!0}),T.jsxs("label",{htmlFor:"terms",children:["Acepto los ",T.jsx("a",{href:"/terminos",target:"_blank",rel:"noopener noreferrer",children:"Trminos y Condiciones"})]})]})]}),!n&&T.jsx("a",{href:"#",className:"forgot-password",children:"Olvidaste tu contrasea?"}),T.jsx("button",{type:"submit",className:"btn-primary",children:n?"Registrarse":"Iniciar Sesin"}),T.jsx("div",{className:"separator",children:"O"}),T.jsx("button",{type:"button",className:"btn-google",onClick:z,children:"Iniciar sesin con Google"})]}),T.jsx("p",{className:"register-text",children:n?T.jsxs(T.Fragment,{children:["Ya tienes una cuenta?"," ",T.jsx("button",{className:"register-link",onClick:()=>e(!1),children:"Inicia sesin"})]}):T.jsxs(T.Fragment,{children:["No tienes una cuenta?"," ",T.jsx("button",{className:"register-link",onClick:()=>e(!0),children:"Crear cuenta"})]})})]})})},MV=()=>{const n=fs(),{userName:e}=Bu(),t=()=>{window.confirm("Ests seguro de que deseas salir e ir al inicio?")&&n("/")};return T.jsxs("div",{className:"sidebar",children:[T.jsx("h2",{children:"Panel de Administrador"}),T.jsx("p",{children:e?`Bienvenido, ${e}`:"Cargando usuario..."}),T.jsxs("nav",{children:[T.jsx("button",{onClick:t,children:"Inicio"}),T.jsx("button",{onClick:()=>n("/admin"),children:"Usuarios"}),T.jsx("button",{onClick:()=>n("/productos"),children:"Productos"}),T.jsx("button",{onClick:()=>n("/pedidos"),children:"Pedidos"})]})]})},sy=({children:n})=>T.jsxs("div",{className:"container",children:[T.jsx(MV,{}),T.jsx("div",{className:"main-content",children:n})]});function VV(){fs();const[n,e]=k.useState({username:"",email:"",password:"",confirmPassword:""}),[t,s]=k.useState([]),[a,l]=k.useState({username:"",rol:""}),[h,d]=k.useState("");k.useEffect(()=>{const w=mf(),C=hf(w,async R=>{if(R){const V=(await xo(Kn(Le,"user"))).docs.find(z=>z.data().email===R.email);if(V){const z=V.data();l({username:z.username||R.displayName||"Usuario sin nombre",rol:z.rol||"Sin rol"})}}else l({username:"",rol:""})});return()=>C()},[]);const p=async()=>{const C=(await xo(Kn(Le,"user"))).docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.rol==="admin");s(C)};k.useEffect(()=>{p()},[]);const g=w=>{const{name:C,value:R}=w.target;e({...n,[C]:R})},_=async()=>{if(n.password!==n.confirmPassword){d("Las contraseas no coinciden");return}try{await Vf(Kn(Le,"user"),{username:n.username,email:n.email,password:n.password,rol:"admin"}),p(),e({username:"",email:"",password:"",confirmPassword:""}),d("")}catch(w){console.error("Error al agregar el administrador: ",w)}},b=async w=>{try{await Kg(Xe(Le,"user",w)),p()}catch(C){console.error("Error al eliminar el administrador: ",C)}};return T.jsx(sy,{children:T.jsxs("main",{className:"admin-main",children:[T.jsxs("section",{className:"create-admin",children:[T.jsx("h3",{children:"Crear Nuevo Administrador"}),T.jsx("input",{type:"text",name:"username",placeholder:"Nombre de Usuario",value:n.username,onChange:g}),T.jsx("input",{type:"email",name:"email",placeholder:"Correo electrnico",value:n.email,onChange:g}),T.jsx("input",{type:"password",name:"password",placeholder:"Contrasea",value:n.password,onChange:g}),T.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirmar Contrasea",value:n.confirmPassword,onChange:g}),h&&T.jsx("p",{className:"error-message",children:h}),T.jsx("button",{onClick:_,children:"Crear Administrador"})]}),T.jsxs("section",{className:"list-admins",children:[T.jsx("h3",{children:"Administradores Existentes"}),T.jsxs("table",{children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Nombre de Usuario"}),T.jsx("th",{children:"Correo Electrnico"}),T.jsx("th",{children:"Acciones"})]})}),T.jsx("tbody",{children:t.map(w=>T.jsxs("tr",{children:[T.jsx("td",{children:w.username||w.displayName||"Nombre no disponible"}),T.jsx("td",{children:w.email}),T.jsx("td",{children:T.jsx("button",{className:"delete-button",onClick:()=>b(w.id),children:"Eliminar"})})]},w.id))})]})]})]})})}const UV=["Microcontroladores y placas","Sensores","Actuadores","Componentes Electronicos","Mdulos","Cables y conectores","Protoboards y PCB","Alimentacin","Herramientas","Kits armados"],LV=()=>{const[n,e]=k.useState(!1),[t,s]=k.useState([]),[a,l]=k.useState(""),[h,d]=k.useState(""),[p,g]=k.useState({nombre:"",descripcion:"",categoria:"",precio:"",cantidad:"",imagen:"",archivoImagen:null}),[_,b]=k.useState(null);fs();const w=()=>{e(!n),n&&(b(null),g({nombre:"",descripcion:"",categoria:"",precio:"",cantidad:"",imagen:"",archivoImagen:null}))},C=async()=>{const ie=Kn(Le,"productos"),I=(await xo(ie)).docs.map(D=>({id:D.id,...D.data()}));s(I)};k.useEffect(()=>{C()},[]);const R=ie=>l(ie.target.value),L=t.filter(ie=>{const O=ie.nombre.toLowerCase().includes(a.toLowerCase()),I=!h||ie.categoria===h;return O&&I}),V=a||h?L:t.slice(-3).reverse(),z=ie=>{const{name:O,value:I}=ie.target;g(D=>({...D,[O]:I}))},U=ie=>{const O=ie.target.files[0];O&&g(I=>({...I,archivoImagen:O,imagen:URL.createObjectURL(O)}))},q=async ie=>{ie.preventDefault();try{const O={nombre:p.nombre,descripcion:p.descripcion,categoria:p.categoria,precio:parseFloat(p.precio),cantidad:parseInt(p.cantidad)};if(_)await OV(_.id,O,p.archivoImagen);else{if(!p.archivoImagen){alert("Debes seleccionar una imagen");return}await xV(O,p.archivoImagen)}w(),C()}catch(O){console.error("Error al guardar el producto:",O)}},se=async ie=>{try{await Kg(Xe(Le,"productos",ie)),C()}catch(O){console.error("Error al eliminar producto:",O)}},ae=ie=>{b(ie),g({nombre:ie.nombre,descripcion:ie.descripcion,categoria:ie.categoria,precio:ie.precio,cantidad:ie.cantidad,imagen:ie.imageUrl||ie.imagen||"",archivoImagen:null}),e(!0)};return T.jsx(sy,{children:T.jsxs("div",{className:"main-content",children:[T.jsxs("div",{className:"top-buttons",children:[T.jsx("button",{onClick:w,className:"addButton",children:n?"Cancelar":"Agregar Producto"}),T.jsx("input",{type:"text",placeholder:"Buscar producto...",className:"searchInput",value:a,onChange:R})]}),T.jsxs("table",{className:"product-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Nombre"}),T.jsx("th",{children:"Descripcin"}),T.jsx("th",{children:"Categora"}),T.jsx("th",{children:"Precio"}),T.jsx("th",{children:"Cantidad"}),T.jsx("th",{children:"Imagen"}),T.jsx("th",{children:"Acciones"})]})}),T.jsx("tbody",{children:V.map(ie=>T.jsxs("tr",{children:[T.jsx("td",{children:ie.nombre}),T.jsx("td",{children:ie.descripcion}),T.jsx("td",{children:ie.categoria}),T.jsxs("td",{children:["$",ie.precio," MXN"]}),T.jsx("td",{children:ie.cantidad}),T.jsx("td",{children:ie.imageUrl||ie.imagen?T.jsx("img",{src:ie.imageUrl||ie.imagen,alt:ie.nombre,width:"50"}):T.jsx("span",{children:"Sin imagen"})}),T.jsxs("td",{children:[T.jsx("button",{className:"editButton",onClick:()=>ae(ie),children:"Editar"}),T.jsx("button",{className:"deleteButton",onClick:()=>se(ie.id),children:"Eliminar"})]})]},ie.id))})]}),n&&T.jsxs("div",{className:"formContainer",children:[T.jsx("h2",{children:_?"Editar Producto":"Agregar Producto"}),T.jsxs("form",{className:"form",onSubmit:q,children:[T.jsx("input",{name:"nombre",value:p.nombre,onChange:z,type:"text",placeholder:"Nombre",required:!0}),T.jsx("input",{name:"descripcion",value:p.descripcion,onChange:z,type:"text",placeholder:"Descripcin",required:!0}),T.jsxs("select",{name:"categoria",value:p.categoria,onChange:z,required:!0,children:[T.jsx("option",{value:"",children:"Selecciona una categora"}),UV.map(ie=>T.jsx("option",{value:ie,children:ie},ie))]}),T.jsx("input",{name:"precio",value:p.precio,onChange:z,type:"number",placeholder:"Precio en MXN",required:!0}),T.jsx("input",{name:"cantidad",value:p.cantidad,onChange:z,type:"number",placeholder:"Cantidad disponible",required:!0}),T.jsx("input",{type:"file",accept:"image/*",onChange:U}),p.imagen&&T.jsx("img",{src:p.imagen,alt:"Vista previa",width:"100"}),T.jsxs("div",{className:"form-buttons",children:[T.jsx("button",{type:"submit",className:"saveButton",children:"Guardar"}),T.jsx("button",{type:"button",className:"cancelButton",onClick:w,children:"Cancelar"})]})]})]})]})})};function jV({pedido:n,onCerrar:e}){var t;return T.jsx("div",{className:"modal",role:"dialog","aria-modal":"true","aria-labelledby":"titulo-modal",onClick:e,tabIndex:-1,children:T.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[T.jsxs("h2",{id:"titulo-modal",children:["Detalles Pedido ",n.id]}),[{label:"Cliente",value:n.clienteId},{label:"Fecha",value:yS(n.fecha)},{label:"Estado",value:n.estado},{label:"Total",value:n.totalMXN!==void 0?`$${n.totalMXN}`:"N/A"},{label:"Mtodo de envo",value:n.metodo},{label:"Direccin de envo",value:n.direccion},{label:"Mtodo de pago",value:n.metodoPago},{label:"Telfono",value:n.telefono},{label:"Comentarios",value:n.comentarios}].map((s,a)=>T.jsxs("div",{className:"detalle-item",children:[T.jsxs("span",{className:"detalle-label",children:[s.label,":"]}),T.jsx("span",{className:"detalle-valor",children:s.value||"No disponible"})]},a)),T.jsxs("div",{className:"detalle-item",children:[T.jsx("span",{className:"detalle-label",children:"Productos:"}),T.jsx("div",{className:"detalle-valor",children:((t=n.productos)==null?void 0:t.length)>0?T.jsx("ul",{children:n.productos.map((s,a)=>T.jsxs("li",{children:[s.nombre," x ",s.cantidad," - $",s.precio," c/u"]},a))}):T.jsx("span",{children:"No hay productos"})})]}),T.jsx("button",{onClick:e,children:"Cerrar"})]})})}function zV({estadoActual:n,onChange:e}){const[t,s]=k.useState(n),a=l=>{const h=l.target.value;h==="Cancelado"&&!window.confirm("Ests seguro de cancelar este pedido?")||(s(h),e(h))};return k.useEffect(()=>{s(n)},[n]),T.jsxs("select",{value:t,onChange:a,className:"select-estado","aria-label":"Selector de estado del pedido",children:[T.jsx("option",{value:"Pendiente",children:"Pendiente"}),T.jsx("option",{value:"Enviado",children:"Enviado"}),T.jsx("option",{value:"Entregado",children:"Entregado"}),T.jsx("option",{value:"Pagado",children:"Pagado"}),T.jsx("option",{value:"Cancelado",children:"Cancelado"})]})}function yS(n){return n?n.toDate?n.toDate().toLocaleString("es-MX"):new Date(n).toLocaleString("es-MX"):"N/A"}function BV(){const[n,e]=k.useState([]),[t,s]=k.useState(null),[a,l]=k.useState(!0),[h,d]=k.useState(null),[p,g]=k.useState(""),_=fs();k.useEffect(()=>{l(!0);const C=Kn(Le,"pedidos"),R=wA(C,L=>{const V=L.docs.map(z=>({id:z.id,...z.data()}));e(V),l(!1),d(null)},L=>{console.error("Error al obtener pedidos:",L),d("No se pudieron cargar los pedidos."),l(!1)});return()=>R()},[]);const b=async(C,R)=>{const L=Xe(Le,"pedidos",C),V=n.find(U=>U.id===C),z=(V==null?void 0:V.estado)||"Pendiente";e(n.map(U=>U.id===C?{...U,estado:R}:U));try{await $n(L,{estado:R})}catch(U){console.error("Error al actualizar el estado del pedido:",U),d("Error al actualizar el estado del pedido."),e(n.map(q=>q.id===C?{...q,estado:z}:q))}},w=n.filter(C=>C.id.toLowerCase().includes(p.toLowerCase())||C.clienteId&&C.clienteId.toLowerCase().includes(p.toLowerCase()));return T.jsx(sy,{children:T.jsxs("div",{className:"contenido-pedidos",children:[T.jsx("h1",{children:"Administracin de Pedidos y Envos"}),T.jsxs("div",{className:"barra-superior",children:[T.jsx("button",{className:"btn-envios",onClick:()=>_("/envios"),children:"ENVIOS"}),T.jsx("input",{type:"text",placeholder:"Buscar ID o Cliente...",className:"buscador",value:p,onChange:C=>g(C.target.value),"aria-label":"Buscar pedidos por ID o cliente"})]}),a&&T.jsx("p",{children:"Cargando pedidos..."}),h&&T.jsx("p",{className:"error",children:h}),!a&&!h&&T.jsxs("table",{children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"ID pedido"}),T.jsx("th",{children:"Cliente"}),T.jsx("th",{children:"Fecha"}),T.jsx("th",{children:"Total (MXN)"}),T.jsx("th",{children:"Estado"}),T.jsx("th",{children:"Mtodo envo"}),T.jsx("th",{children:"No. registro"}),T.jsx("th",{children:"Acciones"})]})}),T.jsxs("tbody",{children:[w.length===0&&T.jsx("tr",{children:T.jsx("td",{colSpan:"8",style:{textAlign:"center"},children:"No se encontraron pedidos"})}),w.map(C=>T.jsxs("tr",{children:[T.jsx("td",{children:C.id}),T.jsx("td",{children:C.clienteId||"N/A"}),T.jsx("td",{children:yS(C.fecha)}),T.jsx("td",{children:C.totalMXN!==void 0?`$${C.totalMXN}`:"N/A"}),T.jsx("td",{children:T.jsx("span",{className:`estado ${C.estado?C.estado.toLowerCase():""}`,children:C.estado||"Sin estado"})}),T.jsx("td",{children:C.metodo||"N/A"}),T.jsx("td",{children:C.registro||"N/A"}),T.jsxs("td",{children:[T.jsx("button",{className:"btn-detalles",onClick:()=>s(C),"aria-label":`Ver detalles del pedido ${C.id}`,children:"Ver detalles"}),T.jsx(zV,{estadoActual:C.estado||"Pendiente",onChange:R=>b(C.id,R)})]})]},C.id))]})]}),t&&T.jsx(jV,{pedido:t,onCerrar:()=>s(null)})]})})}/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),A0=n=>{const e=FV(n);return e.charAt(0).toUpperCase()+e.slice(1)},_S=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),HV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=k.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:h,...d},p)=>k.createElement("svg",{ref:p,...GV,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:_S("lucide",a),...!l&&!HV(d)&&{"aria-hidden":"true"},...d},[...h.map(([g,_])=>k.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=(n,e)=>{const t=k.forwardRef(({className:s,...a},l)=>k.createElement(KV,{ref:l,iconNode:e,className:_S(`lucide-${qV(A0(n))}`,`lucide-${n}`,s),...a}));return t.displayName=A0(n),t};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],YV=$V("search",QV);function XV({searchTerm:n,setSearchTerm:e}){return T.jsxs("div",{className:"search-container",children:[T.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"search-input",value:n,onChange:t=>e(t.target.value)}),T.jsx(YV,{className:"search-icon"})]})}const WV=({onCategorySelect:n})=>{const e=["Microcontroladores y placas","Sensores","Actuadores","Componentes Electronicos","Mdulos","Cables y conectores","Protoboards y PCB","Alimentacin","Herramientas","Kits armados"];return T.jsx("div",{className:"categories",children:e.map(t=>T.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),typeof n=="function"?n(t):console.warn("onCategorySelect no est definido o no es una funcin")},children:t},t))})},ZV=""+new URL("COCKET-NOVA-web3-2048x461-CFy3f9LT.jpg",import.meta.url).href,JV=""+new URL("SEEED-STUDIO-2024-web3-2048x461-BCZvHyss.jpg",import.meta.url).href,eU=""+new URL("03-MODULOS-UNIT-2048x461-zJ-u_hLC.jpg",import.meta.url).href,tU=()=>{const n=[ZV,JV,eU],[e,t]=k.useState(0);return k.useEffect(()=>{const s=setInterval(()=>{t(a=>(a+1)%n.length)},3e3);return()=>clearInterval(s)},[n.length]),T.jsx("div",{className:"banner",children:T.jsx("img",{src:n[e],alt:"Banner promocional"})})},vS=k.createContext(),ES=()=>k.useContext(vS),TS=({children:n})=>{const[e,t]=k.useState([]),[s,a]=k.useState(null),[l,h]=k.useState(""),d=mf(),p=()=>setTimeout(()=>h(""),3e3);k.useEffect(()=>{const z=hf(d,U=>{U?(a(U.uid),_(U.uid)):(a(null),t([]))});return()=>z()},[d]);const g=z=>z?Xe(Le,"kits",z):null,_=async z=>{const U=g(z);if(U)try{const q=await Rt(U);q.exists()?(t(q.data().productos||[]),console.log("Kit cargado desde Firebase:",q.data().productos)):t([])}catch(q){console.error("Error al cargar el kit desde Firestore:",q)}},b=async z=>{if(!s)return;const U=g(s);if(U)try{await zu(U,{userId:s,productos:z,updatedAt:new Date},{merge:!0}),t(z)}catch(q){console.error("Error al guardar el kit en Firebase:",q)}},w=async(z,U=1)=>{if(!s){h("Debes iniciar sesin para agregar productos al kit."),p();return}try{let q=[...e];const se={...z,imagen:z.imageUrl||z.imagen||""},ae=q.findIndex(ie=>ie.id===z.id);ae!==-1?q[ae].cantidad+=U:q.push({...se,cantidad:U}),await b(q),h(`"${z.nombre}" agregado al kit.`)}catch(q){console.error("Error al agregar producto al kit:",q),h("Error al agregar producto al kit.")}finally{p()}},C=async z=>{if(s)try{const U=e.find(I=>I.id===z);if(!U)return;const q=Xe(Le,"productos",z),se=await Rt(q);if(!se.exists())throw new Error("Producto no encontrado en la base de datos.");const ie=(se.data().cantidad||0)+U.cantidad;await $n(q,{cantidad:ie});const O=e.filter(I=>I.id!==z);await b(O),h(`Se elimin "${U.nombre}" y se actualiz el stock.`),p()}catch(U){console.error("Error al eliminar producto y actualizar stock:",U),h("Error al eliminar producto y actualizar stock."),p()}},R=async z=>{if(s)try{const U=e.filter(q=>q.id!==z);await b(U),h("Producto eliminado del kit."),p()}catch(U){console.error("Error al eliminar producto:",U)}},L=async(z,U)=>{if(s)try{let q=[...e];const se=q.findIndex(ae=>ae.id===z);if(se===-1)return;U<=0?q.splice(se,1):q[se].cantidad=U,await b(q),h("Cantidad actualizada."),p()}catch(q){console.error("Error al actualizar cantidad del producto:",q)}},V=async()=>{if(s)try{const z=g(s);if(!z)return;await Kg(z),t([]),h("Kit vaciado correctamente."),p()}catch(z){console.error("Error al vaciar el kit:",z)}};return T.jsx(vS.Provider,{value:{kitItems:e,userId:s,alertMessage:l,addToKit:w,removeFromKit:R,removeFromKitAndReturnStock:C,updateItemQuantity:L,clearKit:V,loadKitItems:_},children:n})},nU="https://via.placeholder.com/150?text=Sin+Imagen",rU=({product:n})=>{const{addToCart:e}=Bf(),{addToKit:t}=ES(),s=fs(),[a,l]=k.useState(1),[h,d]=k.useState(n.cantidad||0);if(!n)return null;k.useEffect(()=>{(async()=>{try{const L=Xe(Le,"productos",n.id),V=await Rt(L);if(V.exists()){const z=V.data();d(z.cantidad??0),l(U=>Math.min(U,z.cantidad??0))}else d(0)}catch(L){console.error("Error leyendo stock de producto:",L)}})()},[n.id]);const p=async R=>{try{const L=Xe(Le,"productos",n.id);await $n(L,{cantidad:R}),console.log(`Stock actualizado: ${R}`)}catch(L){console.error("Error actualizando stock:",L)}},g=()=>{s(`/product/${n.id}`,{state:{product:n}})},_=async R=>{if(R.stopPropagation(),window.confirm(`Agregar ${a} "${n.nombre}" al carrito?`)){e({...n,cantidad:a});const L=h-a;d(L),await p(L)}},b=async R=>{if(R.stopPropagation(),window.confirm(`Agregar ${a} "${n.nombre}" al kit?`)){t(n,a);const L=h-a;d(L),await p(L)}},w=R=>{R.stopPropagation(),l(L=>Math.max(1,L-1))},C=R=>{R.stopPropagation(),l(L=>L<h?L+1:L)};return T.jsxs("div",{className:"product-card",onClick:g,children:[T.jsx("img",{src:n.imageUrl||n.imagen||nU,alt:n.nombre||"Producto sin nombre",className:"product-image"}),T.jsx("h3",{className:"product-name",children:n.nombre||"Producto sin nombre"}),T.jsxs("p",{className:"product-price",children:["$",new Intl.NumberFormat("es-MX").format(n.precio??0)]}),T.jsxs("div",{className:"quantity-control",children:[T.jsxs("span",{className:"label",children:["Cantidad ",h]}),T.jsxs("div",{className:"quantity-selector",children:[T.jsx("button",{onClick:w,disabled:a<=1,title:a<=1?"Cantidad mnima":"Disminuir cantidad",children:"-"}),T.jsx("span",{children:a}),T.jsx("button",{onClick:C,disabled:a>=h,title:a>=h?"Stock mximo alcanzado":"Aumentar cantidad",children:"+"})]})]}),T.jsxs("div",{className:"product-buttons",children:[T.jsx("button",{className:"kit-button",onClick:b,children:"KIT"}),T.jsx("button",{className:"cart-button",onClick:_,children:"Carrito"})]})]})},Th=n=>(n==null?void 0:n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase())||"",iU=n=>{let e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},sU=({searchTerm:n,selectedCategory:e})=>{const[t,s]=k.useState([]);k.useEffect(()=>{(async()=>{const h=await DV(),d=iU(h);s(d)})()},[]);const a=t.filter(l=>{const h=Th(l.nombre).includes(Th(n)),d=e?Th(l.categoria)===Th(e):!0;return h&&d});return T.jsxs("section",{className:"products-section",children:[T.jsx("h2",{className:"products-title",children:"Productos Recomendados"}),T.jsx("div",{className:"products-container",children:a.length>0?a.map(l=>T.jsx(rU,{product:l},l.id)):T.jsx("p",{className:"no-results",children:"No se encontraron productos."})})]})},aU=({onCategorySelect:n})=>{const e=t=>{if(n){n(t);const s=document.querySelector(".products-section");s&&s.scrollIntoView({behavior:"smooth"})}};return T.jsxs("footer",{children:[T.jsxs("div",{className:"footer-container",children:[T.jsxs("div",{className:"footer-section",children:[T.jsx("h3",{children:"Categoras"}),T.jsxs("ul",{children:[T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("Microcontroladores y placas")},children:"Microcontroladores y placas"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("sensores")},children:"Sensores"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("actuadores")},children:"Actuadores"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("Componentes Electrnicos")},children:"Componentes Electrnicos"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("modulos")},children:"Mdulos"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("Cables y conectores")},children:"Cables y conectores"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("Protoboards y PCB")},children:"Protoboards y PCB"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("alimentacion")},children:"Alimentacin"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("herramientas")},children:"Herramientas"})}),T.jsx("li",{children:T.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("Kits armados")},children:"Kits armados"})})]})]}),T.jsxs("div",{className:"footer-section",children:[T.jsx("h3",{children:"Contacto"}),T.jsx("p",{children:" Direccin: Calle 123, Quertaro, Mxico"}),T.jsx("p",{children:" Telfono: +52 442 123 4567"}),T.jsx("p",{children:" Email: StoreTI@tienda.com"})]}),T.jsxs("div",{className:"footer-section",children:[T.jsx("h3",{children:"Sguenos"}),T.jsxs("div",{className:"social-icons",children:[T.jsx("a",{href:"#",children:T.jsx("i",{className:"fab fa-instagram"})}),T.jsx("a",{href:"#",children:T.jsx("i",{className:"fab fa-facebook-f"})})]})]})]}),T.jsx("div",{className:"footer-bottom",children:T.jsx("p",{children:" 2025 TiendaTech | Todos los derechos reservados."})})]})};function oU(){const[n,e]=k.useState(""),[t,s]=k.useState(null),a=l=>{console.log("Categora seleccionada:",l),s(l)};return T.jsxs(T.Fragment,{children:[T.jsx(XV,{searchTerm:n,setSearchTerm:e}),T.jsx(WV,{onCategorySelect:a})," ",T.jsx(tU,{}),T.jsx(sU,{searchTerm:n,selectedCategory:t})," ",T.jsx(aU,{onCategorySelect:a})]})}const lU="https://via.placeholder.com/150?text=Sin+Imagen",S0=n=>(n==null?void 0:n.imageUrl)||(n==null?void 0:n.imagen)||lU,uU=()=>{const{id:n}=UI(),{user:e}=Bu(),{setCartItems:t}=Bf(),s=fs(),[a,l]=k.useState(null),[h,d]=k.useState([]),[p,g]=k.useState(""),[_,b]=k.useState(""),[w,C]=k.useState(!0),[R,L]=k.useState([]),[V,z]=k.useState(!1),[U,q]=k.useState(!1),[se,ae]=k.useState(!1),ie=(e==null?void 0:e.uid)||"cliente-demo";k.useEffect(()=>{if(!n)return;(async()=>{C(!0);try{const Ie=Xe(Le,"productos",n),Me=await Rt(Ie);Me.exists()?(l({id:Me.id,...Me.data()}),b("")):(l(null),b("Producto no encontrado."))}catch(Ie){console.error("Error al cargar producto:",Ie),b("Error al cargar producto.")}finally{C(!1)}})()},[n]),k.useEffect(()=>{n&&(async()=>{try{const W=(await xo(Kn(Le,"productos"))).docs.map(oe=>({id:oe.id,...oe.data()})).filter(oe=>oe.id!==n).sort(()=>.5-Math.random()).slice(0,3);L(W)}catch(Ie){console.error("Error al cargar productos relacionados:",Ie)}})()},[n]),k.useEffect(()=>{if(!n)return;const N=yA(Kn(Le,`productos/${n}/comentarios`),_A("fecha","desc")),Ie=wA(N,Me=>{const W=Me.docs.map(oe=>({id:oe.id,...oe.data()}));d(W)},Me=>{console.error("Error al obtener comentarios:",Me)});return()=>Ie()},[n]);const O=async()=>{if(!p.trim()){b("El comentario no puede estar vaco."),setTimeout(()=>b(""),3e3);return}const N=(e==null?void 0:e.displayName)||"Invitado";try{await Vf(Kn(Le,`productos/${n}/comentarios`),{autor:N,texto:p.trim(),fecha:new Date}),g(""),b("Comentario enviado exitosamente!")}catch(Ie){console.error("Error al enviar comentario:",Ie),b("Error al enviar el comentario.")}setTimeout(()=>b(""),3e3)},I=async(N,Ie,Me,W)=>{if(Ie){Me(!0);try{const oe=Xe(Le,N,ie),me=await Rt(oe);let Oe=me.exists()?me.data().productos||[]:[];const M=Oe.find(re=>re.id===Ie.id);if(M){if(N==="carritodecompras"){const re=Ie.cantidad||0;if(M.cantidad>=re){W(`Solo hay ${re} unidades disponibles.`),Me(!1);return}}M.cantidad+=1}else{if(N==="carritodecompras"&&(Ie.cantidad||0)<=0){W("Este producto est agotado."),Me(!1);return}Oe.push({...Ie,cantidad:1})}me.exists()?await $n(oe,{productos:Oe}):await zu(oe,{productos:Oe}),N==="carritodecompras"&&t(Oe),W(`Producto agregado ${N==="carritodecompras"?"al carrito":"al Kit"}!`)}catch(oe){console.error(`Error al agregar al ${N}:`,oe),W(`Error al agregar el producto ${N==="carritodecompras"?"al carrito":"al Kit"}.`)}Me(!1),setTimeout(()=>W(""),3e3)}},D=N=>I("carritodecompras",N,z,b),P=N=>I("kits",N,q,b),B=()=>ae(!0),H=()=>ae(!1);return w?T.jsx("p",{children:"Cargando producto..."}):a?T.jsxs("div",{className:"product-detail-container",children:[T.jsxs("aside",{className:"related-products",children:[T.jsx("h3",{children:"Productos Recomendados"}),R.length===0?T.jsx("p",{children:"No hay productos relacionados."}):R.map(N=>T.jsxs("div",{className:"related-product-item",onClick:()=>s(`/product/${N.id}`),role:"button",tabIndex:0,onKeyDown:Ie=>Ie.key==="Enter"&&s(`/product/${N.id}`),children:[T.jsx("img",{src:S0(N),alt:N.nombre,loading:"lazy"}),T.jsx("p",{children:N.nombre})]},N.id))]}),T.jsxs("main",{className:"product-info",children:[T.jsx("img",{src:S0(a),alt:a.nombre,loading:"lazy"}),T.jsx("h2",{children:a.nombre}),T.jsxs("h3",{className:"price",children:["$",typeof a.precio=="number"?a.precio.toLocaleString():"0"]}),T.jsx("p",{className:"description",children:a.descripcion||"Sin descripcin detallada."}),T.jsxs("p",{children:[T.jsx("strong",{children:"Cantidad en stock:"})," ",a.cantidad||0]}),T.jsxs("div",{className:"action-buttons",children:[T.jsx("button",{className:"btn-carrito",onClick:()=>D(a),disabled:V||a.cantidad<=0,title:a.cantidad<=0?"Producto agotado":"Agregar al carrito",children:V?"Agregando...":"Agregar al Carrito"}),T.jsx("button",{className:"btn-kit",onClick:()=>P(a),disabled:U,children:U?"Agregando...":"Agregar al KIT"}),se?T.jsxs("div",{className:"paypal-container",children:[T.jsx(iy,{totalAmount:a.precio,onSuccess:()=>{b("Compra realizada con xito"),ae(!1)},onError:N=>{console.error("Error en PayPal:",N),b("Error al procesar la compra."),ae(!1)}}),T.jsx("button",{className:"btn-cancel",onClick:H,children:"Cancelar"})]}):T.jsx("button",{className:"btn-comprar",onClick:B,disabled:a.cantidad<=0,title:a.cantidad<=0?"Producto agotado":"Comprar Ahora",children:"Comprar Ahora"})]}),_&&T.jsx("p",{className:"message",children:_})]}),T.jsxs("aside",{className:"comments-section",children:[T.jsx("h3",{children:"Comentarios"}),T.jsx("textarea",{placeholder:"Enviar Comentarios...",value:p,onChange:N=>g(N.target.value),rows:3}),T.jsx("button",{className:"btn-comment",onClick:O,children:"Enviar Comentario"}),h.length===0?T.jsx("p",{children:"No hay comentarios todava."}):h.map(N=>{var Ie;return T.jsxs("div",{className:"comment",tabIndex:0,children:[T.jsxs("p",{children:[T.jsx("span",{className:"comment-author",children:N.autor})," - ",N.texto]}),T.jsx("p",{children:T.jsx("span",{className:"comment-date",children:(Ie=N.fecha)!=null&&Ie.seconds?new Date(N.fecha.seconds*1e3).toLocaleString():N.fecha instanceof Date?N.fecha.toLocaleString():"Fecha invlida"})})]},N.id)})]})]}):T.jsx("p",{children:_||"Producto no encontrado."})},cU="https://via.placeholder.com/150?text=Sin+Imagen",hU=n=>(n==null?void 0:n.imageUrl)||(n==null?void 0:n.imagen)||cU,fU=()=>{const{kitItems:n,clearKit:e,removeFromKit:t}=ES(),[s,a]=k.useState(!1),[l,h]=k.useState(!1),[d,p]=k.useState(null),g=()=>{window.confirm("Ests seguro de que quieres vaciar el kit?")&&e()},_=()=>n.reduce((R,L)=>R+L.precio*L.cantidad,0),b=R=>{p(R),h(!0)},w=async(R,L)=>{try{const V=Xe(Le,"productos",R),z=await Rt(V);if(z.exists()){const q=(z.data().cantidad||0)+L;await $n(V,{cantidad:q})}else console.error("Producto no encontrado en Firebase")}catch(V){throw console.error("Error actualizando cantidad en Firebase:",V),V}},C=async()=>{if(d){try{await w(d.id,d.cantidad),t(d.id)}catch{alert("Error al actualizar cantidad en el servidor. Intenta de nuevo.")}p(null),h(!1)}};return T.jsxs("div",{className:"kit-container",children:[T.jsx("h2",{className:"kit-title",children:"KIT ARDUINO"}),n.length===0?T.jsx("p",{className:"no-items",children:"Tu kit est vaco. Agrega productos desde la pgina de productos."}):T.jsx("div",{className:"kit-items",children:n.map(R=>T.jsxs("div",{className:"kit-item",children:[T.jsx("img",{src:hU(R),alt:R.nombre,className:"kit-item-image"}),T.jsxs("div",{className:"kit-item-info",children:[T.jsx("h4",{children:R.nombre}),T.jsxs("p",{className:"kit-price",children:["$",R.precio]}),T.jsxs("p",{className:"kit-quantity",children:["Cantidad: ",R.cantidad]})]}),T.jsx("button",{className:"btn-eliminar",onClick:()=>b(R),children:""})]},R.id))}),n.length>0&&T.jsxs("div",{className:"kit-actions",children:[s?T.jsxs("div",{className:"paypal-container",children:[T.jsx(iy,{totalAmount:_(),onSuccess:()=>{e(),a(!1)}}),T.jsx("button",{className:"btn-cancel",onClick:()=>a(!1),children:"Cancelar"})]}):T.jsx("button",{className:"btn-buy",onClick:()=>a(!0),children:"Comprar Ahora"}),T.jsx("button",{className:"btn-clear",onClick:g,children:"Vaciar Kit"})]}),l&&T.jsx("div",{className:"modal",children:T.jsxs("div",{className:"modal-content",children:[T.jsx("h3",{children:"Eliminar producto?"}),T.jsxs("p",{children:["Ests seguro de que deseas eliminar ",T.jsx("strong",{children:d==null?void 0:d.nombre})," del kit?"]}),T.jsxs("div",{className:"modal-buttons",children:[T.jsx("button",{onClick:C,children:"S, eliminar"}),T.jsx("button",{onClick:()=>h(!1),children:"Cancelar"})]})]})})]})};class dU extends k.Component{constructor(e){super(e),this.state={hasError:!1,errorMessage:""}}static getDerivedStateFromError(e){return{hasError:!0,errorMessage:e.message}}componentDidCatch(e,t){console.error("Error caught in ErrorBoundary:",e,t)}render(){return this.state.hasError?T.jsxs("h2",{children:["Algo sali mal: ",this.state.errorMessage]}):this.props.children}}const mU=()=>{const{user:n}=Bu(),[e,t]=k.useState({nombre:"",email:"",direccion:"",telefono:"",imagen:""}),[s,a]=k.useState([]),[l,h]=k.useState(!1);k.useEffect(()=>{const _=async()=>{if(n){const w=hu(),C=Xe(w,"user",n.uid),R=await Rt(C);if(R.exists()){const L=R.data();t({nombre:L.nombre||n.displayName||"",email:L.email||n.email||"",direccion:L.direccion||"",telefono:L.telefono||"",imagen:L.imagen||L.photoURL||n.photoURL||""})}else t({nombre:n.displayName||"",email:n.email||"",direccion:"",telefono:"",imagen:n.photoURL||""})}},b=async()=>{if(n)try{const w=hu(),C=Kn(w,"pedidos"),R=yA(C,xP("uid","==",n.uid),_A("fecha","desc")),V=(await xo(R)).docs.map(z=>({id:z.id,...z.data()}));a(V)}catch(w){console.error("Error al obtener pedidos:",w)}};_(),b()},[n]);const d=_=>{const{name:b,value:w}=_.target;t(C=>({...C,[b]:w}))},p=_=>{const b=_.target.files[0];if(b){const w=new FileReader;w.onload=C=>{t(R=>({...R,imagen:C.target.result}))},w.readAsDataURL(b)}},g=async()=>{if(n)try{const _=hu(),b=Xe(_,"user",n.uid);await zu(b,{nombre:e.nombre,email:e.email,direccion:e.direccion,telefono:e.telefono,imagen:e.imagen},{merge:!0}),alert("Datos guardados correctamente"),h(!1)}catch(_){console.error("Error al guardar datos:",_),alert("Error al guardar datos en Firestore")}};return T.jsxs("div",{className:"perfil-main-container",children:[T.jsxs("section",{className:"perfil-container",children:[T.jsx("h2",{children:"Mi Perfil"}),T.jsxs("div",{className:"perfil-content",children:[T.jsxs("div",{className:"perfil-avatar",children:[T.jsx("img",{src:e.imagen||"default-avatar.png",alt:"Foto de perfil"}),l&&T.jsx("input",{type:"file",accept:"image/*",onChange:p})]}),T.jsxs("div",{className:"perfil-form",children:[T.jsxs("div",{children:[T.jsx("label",{children:"Nombre"}),T.jsx("input",{type:"text",name:"nombre",value:e.nombre,onChange:d,disabled:!l})]}),T.jsxs("div",{children:[T.jsx("label",{children:"Correo"}),T.jsx("input",{type:"email",name:"email",value:e.email,disabled:!0})]}),T.jsxs("div",{children:[T.jsx("label",{children:"Direccin"}),T.jsx("input",{type:"text",name:"direccion",value:e.direccion,onChange:d,disabled:!l})]}),T.jsxs("div",{children:[T.jsx("label",{children:"Telfono"}),T.jsx("input",{type:"tel",name:"telefono",value:e.telefono,onChange:d,disabled:!l})]}),l?T.jsx("button",{className:"save-button",onClick:g,children:"Guardar Cambios"}):T.jsx("button",{className:"save-button",onClick:()=>h(!0),children:"Editar Perfil"})]})]})]}),T.jsxs("section",{className:"historial-container",children:[T.jsx("h2",{children:"Historial de Compras"}),T.jsx("ul",{className:"historial-list",children:s.length===0?T.jsx("li",{children:"No hay pedidos registrados."}):s.map(_=>{var b;return T.jsxs("li",{children:["Pedido #",_.numeroPedido||_.id," - ",(b=_.fecha)!=null&&b.seconds?new Date(_.fecha.seconds*1e3).toLocaleDateString():"Sin fecha"]},_.id)})})]})]})};function pU(){return T.jsxs(gS,{children:[" ",T.jsx(mS,{children:T.jsx(TS,{children:T.jsxs(JI,{children:[T.jsx(Hn,{path:"/login",element:T.jsx(kV,{})}),T.jsx(Hn,{path:"admin",element:T.jsx(VV,{})}),T.jsx(Hn,{path:"productos",element:T.jsx(LV,{})}),T.jsx(Hn,{path:"pedidos",element:T.jsx(BV,{})}),T.jsxs(Hn,{path:"/",element:T.jsx(KP,{}),children:[T.jsx(Hn,{index:!0,element:T.jsx(oU,{})}),T.jsx(Hn,{path:"carrito",element:T.jsx(PV,{})}),T.jsx(Hn,{path:"kit",element:T.jsx(fU,{})}),T.jsx(Hn,{path:"perfil",element:T.jsx(mU,{})})," ",T.jsx(Hn,{path:"product/:id",element:T.jsx(dU,{children:T.jsx(uU,{})})})]}),T.jsx(Hn,{path:"*",element:T.jsxs("div",{style:{padding:"2rem"},children:[T.jsx("h2",{children:"Pgina no encontrada."}),T.jsx(vo,{to:"/",children:"Ir al inicio"})]})})]})})})]})}/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr;(function(n){n.INITIAL="initial",n.PENDING="pending",n.REJECTED="rejected",n.RESOLVED="resolved"})(Rr||(Rr={}));var is;(function(n){n.LOADING_STATUS="setLoadingStatus",n.RESET_OPTIONS="resetOptions",n.SET_BRAINTREE_INSTANCE="braintreeInstance"})(is||(is={}));var R0;(function(n){n.NUMBER="number",n.CVV="cvv",n.EXPIRATION_DATE="expirationDate",n.EXPIRATION_MONTH="expirationMonth",n.EXPIRATION_YEAR="expirationYear",n.POSTAL_CODE="postalCode"})(R0||(R0={}));var Jt=function(){return Jt=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Jt.apply(this,arguments)};function gU(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}var Ru="data-react-paypal-script-id",_o={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},yU="Failed to load the PayPal JS SDK script.";function _U(n){for(var e="",t=0;t<n.length;t++){var s=n[t].charCodeAt(0)*t;n[t+1]&&(s+=n[t+1].charCodeAt(0)*(t-1)),e+=String.fromCharCode(97+Math.abs(s)%26)}return e}function bS(n){var e=n,t=Ru;e[t];var s=gU(e,[t+""]);return"react-paypal-js-".concat(_U(JSON.stringify(s)))}function vU(n){var e=self.document.querySelector("script[".concat(Ru,'="').concat(n,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function EU(n,e){var t,s;switch(e.type){case is.LOADING_STATUS:return typeof e.value=="object"?Jt(Jt({},n),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):Jt(Jt({},n),{loadingStatus:e.value});case is.RESET_OPTIONS:return vU(n.options[Ru]),Jt(Jt({},n),{loadingStatus:Rr.PENDING,options:Jt(Jt((t={},t[_o.DATA_SDK_INTEGRATION_SOURCE]=_o.DATA_LIBRARY_VALUE,t),e.value),(s={},s[Ru]="".concat(bS(e.value)),s))});case is.SET_BRAINTREE_INSTANCE:return Jt(Jt({},n),{braintreePayPalCheckoutInstance:e.value});default:return n}}var TU=k.createContext(null);k.createContext({});function bU(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function wU(n,e){var t=document.querySelector('script[src="'.concat(n,'"]'));if(t===null)return null;var s=wS(n,e),a=t.cloneNode();if(delete a.dataset.uidAuto,Object.keys(a.dataset).length!==Object.keys(s.dataset).length)return null;var l=!0;return Object.keys(a.dataset).forEach(function(h){a.dataset[h]!==s.dataset[h]&&(l=!1)}),l?t:null}function AU(n){var e=n.url,t=n.attributes,s=n.onSuccess,a=n.onError,l=wS(e,t);l.onerror=a,l.onload=s,document.head.insertBefore(l,document.head.firstElementChild)}function SU(n){var e=n.sdkBaseUrl,t=n.environment,s=bU(n,["sdkBaseUrl","environment"]),a=e||CU(t),l=s,h=Object.keys(l).filter(function(g){return typeof l[g]<"u"&&l[g]!==null&&l[g]!==""}).reduce(function(g,_){var b=l[_].toString();return _=RU(_),_.substring(0,4)==="data"||_==="crossorigin"?g.attributes[_]=b:g.queryParams[_]=b,g},{queryParams:{},attributes:{}}),d=h.queryParams,p=h.attributes;return d["merchant-id"]&&d["merchant-id"].indexOf(",")!==-1&&(p["data-merchant-id"]=d["merchant-id"],d["merchant-id"]="*"),{url:"".concat(a,"?").concat(IU(d)),attributes:p}}function RU(n){var e=function(t,s){return(s?"-":"")+t.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function IU(n){var e="";return Object.keys(n).forEach(function(t){e.length!==0&&(e+="&"),e+=t+"="+n[t]}),e}function CU(n){return n==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function wS(n,e){e===void 0&&(e={});var t=document.createElement("script");return t.src=n,Object.keys(e).forEach(function(s){t.setAttribute(s,e[s]),s==="data-csp-nonce"&&t.setAttribute("nonce",e["data-csp-nonce"])}),t}function NU(n,e){if(e===void 0&&(e=Promise),AS(n,e),typeof document>"u")return e.resolve(null);var t=SU(n),s=t.url,a=t.attributes,l=a["data-namespace"]||"paypal",h=I0(l);return a["data-js-sdk-library"]||(a["data-js-sdk-library"]="paypal-js"),wU(s,a)&&h?e.resolve(h):DU({url:s,attributes:a},e).then(function(){var d=I0(l);if(d)return d;throw new Error("The window.".concat(l," global variable is not available."))})}function DU(n,e){e===void 0&&(e=Promise),AS(n,e);var t=n.url,s=n.attributes;if(typeof t!="string"||t.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new e(function(a,l){if(typeof document>"u")return a();AU({url:t,attributes:s,onSuccess:function(){return a()},onError:function(){var h=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return l(h)}})})}function I0(n){return window[n]}function AS(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");var t=n.environment;if(t&&t!=="production"&&t!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var xU=function(n){var e,t=n.options,s=t===void 0?{clientId:"test"}:t,a=n.children,l=n.deferLoading,h=l===void 0?!1:l,d=k.useReducer(EU,{options:Jt(Jt({},s),(e={},e[_o.DATA_JS_SDK_LIBRARY]=_o.DATA_LIBRARY_VALUE,e[_o.DATA_SDK_INTEGRATION_SOURCE]=_o.DATA_LIBRARY_VALUE,e[Ru]="".concat(bS(s)),e)),loadingStatus:h?Rr.INITIAL:Rr.PENDING}),p=d[0],g=d[1];return k.useEffect(function(){if(h===!1&&p.loadingStatus===Rr.INITIAL)return g({type:is.LOADING_STATUS,value:Rr.PENDING});if(p.loadingStatus===Rr.PENDING){var _=!0;return NU(p.options).then(function(){_&&g({type:is.LOADING_STATUS,value:Rr.RESOLVED})}).catch(function(b){console.error("".concat(yU," ").concat(b)),_&&g({type:is.LOADING_STATUS,value:{state:Rr.REJECTED,message:String(b)}})}),function(){_=!1}}},[p.options,h,p.loadingStatus]),ui.createElement(TU.Provider,{value:Jt(Jt({},p),{dispatch:g})},a)};function C0(){}k.createContext({cardFieldsForm:null,fields:{},registerField:C0,unregisterField:C0});sI.createRoot(document.getElementById("root")).render(T.jsx(ui.StrictMode,{children:T.jsx(xU,{options:{"client-id":"AfP7Juwwa59waiDlb7Btd_H2JzgfgpTesyqWSEg_0KB-8uxKtH5rwBQtqUSG8IceS9IT1PFgFbgzsB1a"},children:T.jsxs(gS,{children:[" ",T.jsxs(mS,{children:[" ",T.jsxs(TS,{children:[" ",T.jsx(wC,{children:T.jsx(pU,{})})]})]})]})})}));
